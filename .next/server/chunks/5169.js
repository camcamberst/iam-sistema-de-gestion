"use strict";exports.id=5169,exports.ids=[5169],exports.modules={8421:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(95344),s=a(3729);function l({compact:e=!1,showTitle:t=!0,refreshTrigger:a,userRole:l}){let[i,o]=(0,s.useState)([]),[d,n]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null);async function x(){try{n(!0),m(null);let e=await fetch("/api/rates?activeOnly=true"),t=await e.json();if(!t.success)throw Error(t.error||"Error al cargar tasas");let a=new Date,r=["USD→COP","EUR→USD","GBP→USD"],s=t.data.filter(e=>{let t=e.valid_to?new Date(e.valid_to):null;return(!t||t>a)&&r.includes(e.kind)}).sort((e,t)=>new Date(t.valid_from).getTime()-new Date(e.valid_from).getTime()).reduce((e,t)=>(e.find(e=>e.kind===t.kind)||e.push(t),e),[]).sort((e,t)=>{let a={"USD→COP":1,"EUR→USD":2,"GBP→USD":3};return(a[e.kind]||4)-(a[t.kind]||4)});o(s)}catch(e){m(e.message||"Error inesperado")}finally{n(!1)}}(0,s.useEffect)(()=>{x()},[]),(0,s.useEffect)(()=>{void 0!==a&&x()},[a]);let u=e=>{switch(e){case"USD→COP":return"USD → COP";case"EUR→USD":return"EUR → USD";case"GBP→USD":return"GBP → USD";default:return e}},h=e=>"global"===e?"Global":e.startsWith("group:")?`Grupo: ${e.replace("group:","")}`:e,p=e=>{switch(e){case"manual":return"✏️";case"ECB":return"\uD83C\uDFDB️";case"system":return"\uD83E\uDD16";case"OXR":return"\uD83D\uDCCA";default:return"\uD83D\uDCCB"}};return e?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 cursor-pointer",children:[t&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Solo manuales"})]}),d&&r.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin ml-auto"})]}),c?r.jsx("p",{className:"text-red-600 text-xs",children:c}):r.jsx("div",{className:"space-y-1",children:0===i.length?r.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-xs text-center py-2",children:"No hay tasas de calculadora"}):i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-gray-50 dark:bg-white rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xs",children:p(e.source)}),r.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-900",children:u(e.kind)})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:e.value}),"superadmin_aff"!==l&&r.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:h(e.scope)})]})]},e.id))})]}):(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/20 dark:border-gray-600/20 shadow-md dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Solo tasas manuales"})]})]}),r.jsx("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/80 backdrop-blur-sm border border-blue-200/50 rounded-lg hover:bg-blue-100/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",disabled:d,children:d?"Actualizando...":"Actualizar"})]}),c?(0,r.jsxs)("div",{className:"text-center py-6",children:[r.jsx("div",{className:"w-10 h-10 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("p",{className:"text-red-600 text-xs mb-3",children:c}),r.jsx("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-lg hover:bg-red-100/80 focus:ring-2 focus:ring-red-500/20 transition-all duration-200",children:"Reintentar"})]}):r.jsx("div",{className:"space-y-2",children:0===i.length?(0,r.jsxs)("div",{className:"text-center py-6",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),r.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium mb-1",children:"No hay tasas de calculadora"}),r.jsx("p",{className:"text-gray-400 dark:text-gray-400 text-xs",children:"Configura las tasas manualmente"})]}):i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-white backdrop-blur-sm rounded-lg border border-gray-200/30 dark:border-gray-500/30 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-gray-50 dark:bg-gray-50 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-xs",children:p(e.source)})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:u(e.kind)}),"superadmin_aff"!==l&&r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-900",children:h(e.scope)})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-900",children:e.value}),r.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:new Date(e.valid_from).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]},e.id))})]})}},70577:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(95344),s=a(3729),l=a(20783),i=a.n(l),o=a(92509),d=a(15807);function n({userRole:e,userId:t,userGroups:a=[]}){let[l,n]=(0,s.useState)(null),[c,m]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[f,g]=(0,s.useState)("current"),[b,y]=(0,s.useState)(null),v=(e,t="USD")=>"COP"===t?new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),k=async(r=!1)=>{try{r||u(!0),p(null);let s=(0,d.iR)(),l=s;if("period-1"===f){let[e,t]=s.split("-");l=`${e}-${t}-15`}else if("period-2"===f){let[e,t]=s.split("-"),a=new Date(parseInt(e),parseInt(t)-1,1),r=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();l=`${e}-${t}-${String(r).padStart(2,"0")}`}let i=new URLSearchParams({adminId:t,userRole:e,periodDate:l}),o=await fetch(`/api/admin/billing-summary?${i}`),c=await o.json();if(!c.success)throw Error(c.error||"Error al cargar los datos");if(c.affiliateStudioName&&y(c.affiliateStudioName),c.groupedData&&Array.isArray(c.groupedData)&&c.groupedData.length>0){let e=c.summary||{totalModels:c.groupedData.reduce((e,t)=>e+t.totalModels,0),totalUsdBruto:c.groupedData.reduce((e,t)=>e+t.totalUsdBruto,0),totalUsdModelo:c.groupedData.reduce((e,t)=>e+(t.totalUsdModelo||0),0),totalUsdSede:c.groupedData.reduce((e,t)=>e+t.totalUsdSede,0),totalCopModelo:c.groupedData.reduce((e,t)=>e+(t.totalCopModelo||0),0),totalCopSede:c.groupedData.reduce((e,t)=>e+(t.totalCopSede||0),0)};n(e),m(c.groupedData)}else{let t=c.data||[];"admin"===e&&a.length>0&&(t=t.filter(e=>a.includes(e.groupName)));let r={totalModels:t.length,totalUsdBruto:t.reduce((e,t)=>e+t.usdBruto,0),totalUsdModelo:t.reduce((e,t)=>e+t.usdModelo,0),totalUsdSede:t.reduce((e,t)=>e+t.usdSede,0),totalCopModelo:t.reduce((e,t)=>e+t.copModelo,0),totalCopSede:t.reduce((e,t)=>e+t.copSede,0)},s=new Map;t.forEach(t=>{let a=t.organizationId||"unknown",r=t.groupId||"unknown";if(!s.has(a)){let t="superadmin_aff"===e&&c.affiliateStudioName?c.affiliateStudioName:"Agencia Innova";s.set(a,{sedeId:a,sedeName:t,totalModels:0,groups:[],totalUsdBruto:0,totalUsdModelo:0,totalUsdSede:0})}let l=s.get(a);l.totalModels++,l.totalUsdBruto+=t.usdBruto,l.totalUsdModelo+=t.usdModelo,l.totalUsdSede+=t.usdSede;let i=l.groups.find(e=>e.groupId===r);i||(i={groupId:r,groupName:t.groupName||"Grupo Desconocido",totalModels:0,totalUsdBruto:0,totalUsdModelo:0,totalUsdSede:0},l.groups.push(i)),i.totalModels++,i.totalUsdBruto+=t.usdBruto,i.totalUsdModelo+=t.usdModelo,i.totalUsdSede+=t.usdSede}),n(r),m(Array.from(s.values()))}}catch(e){console.error("Error loading billing data:",e),p(e.message||"Error al cargar los datos")}finally{r||u(!1)}},{isPolling:w,isSilentUpdating:j}=(0,o.t)(k,[t,e,a],{refreshInterval:15e3,enabled:!0,silentUpdate:!0,onRefresh:()=>{console.log("\uD83D\uDD04 [BILLING-SUMMARY-COMPACT] Datos actualizados autom\xe1ticamente")}});return((0,s.useEffect)(()=>{t&&e&&k()},[t,e,a,f]),x)?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-700/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),r.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"})})]}):h?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-700/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-red-500 to-red-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),(0,r.jsxs)("div",{className:"text-center py-4",children:[r.jsx("div",{className:"text-sm text-red-600 mb-2",children:h}),r.jsx("button",{onClick:()=>k(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Reintentar"})]})]}):(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-green-900/10 dark:ring-0.5 dark:ring-green-500/15 border border-white/20 dark:border-gray-600/20 p-4 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),r.jsx(i(),{href:"/admin/sedes/dashboard",className:"text-xs text-blue-600 dark:text-white hover:text-blue-800 dark:hover:text-gray-200 font-medium",children:"Ver completo →"})]}),l&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-blue-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-blue-600",children:["$",v(l.totalUsdBruto)]}),r.jsx("div",{className:"text-xs text-blue-700",children:"USD Bruto"})]}),(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-green-600",children:["$",v(l.totalUsdModelo)]}),r.jsx("div",{className:"text-xs text-green-700",children:"USD Modelos"})]}),(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-purple-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-purple-600",children:["$",v(l.totalUsdSede)]}),r.jsx("div",{className:"text-xs text-purple-700",children:"superadmin_aff"===e&&b?`USD ${b}`:"USD Agencia"})]})]}),c.length>0&&(0,r.jsxs)("div",{className:"border-t border-gray-200/50 pt-3",children:[(0,r.jsxs)("div",{className:"text-xs font-medium text-gray-900 dark:text-white mb-2",children:[l.totalModels," modelos • ","super_admin"===e?"Todas las sedes":"Tu sede"]}),r.jsx("div",{className:"max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:r.jsx("div",{className:"space-y-2 pr-2",children:c.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-white rounded-lg border border-gray-200/40 dark:border-gray-600/40 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center ${e.isAffiliate?"bg-gradient-to-br from-purple-500/10 to-pink-500/10":"bg-gradient-to-br from-blue-500/10 to-indigo-500/10"}`,children:r.jsx("svg",{className:`w-2.5 h-2.5 ${e.isAffiliate?"text-purple-600":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1.5",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:e.sedeName}),e.isAffiliate&&r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",children:"Afiliado"})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-900 dark:text-gray-900",children:[e.totalModels," modelos • ",e.groups.length," grupos"]})]})]}),e.groups.length>0&&r.jsx("div",{className:"ml-6 space-y-1",children:e.groups.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-1.5 bg-gray-50/60 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1.5",children:[r.jsx("div",{className:"w-3 h-3 bg-gradient-to-br from-gray-400/20 to-gray-500/20 rounded flex items-center justify-center",children:r.jsx("svg",{className:"w-1.5 h-1.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-900",children:e.groupName}),(0,r.jsxs)("div",{className:"text-xs text-gray-900 dark:text-gray-900",children:[e.totalModels," modelos"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end min-w-[70px]",children:[(0,r.jsxs)("div",{className:"text-xs font-semibold text-blue-600 dark:text-blue-600 leading-tight",children:["$",v(e.totalUsdBruto)]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight mt-0.5",children:"USD Bruto"})]})]},e.groupId))})]},e.sedeId))})})]})]})]})}},87502:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(95344),s=a(3729),l=a(25545),i=a(66262),o=a(67970),d=a(14513),n=a(33265);function c({userRole:e,userGroups:t,userId:a}){let[c,m]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{f()},[e,t,a]),(0,s.useEffect)(()=>{c.length>0&&console.log("\uD83D\uDD0D Timeline requests con fechas:",c.map(e=>({id:e.id,status:e.status,requested_at:e.requested_at,delivered_at:e.delivered_at,confirmed_at:e.confirmed_at,deactivated_at:e.deactivated_at,reverted_at:e.reverted_at,updated_at:e.updated_at})))},[c]);let f=async()=>{try{u(!0),p(null);let r=await fetch("/api/modelo-plataformas/timeline",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:e,userGroups:t||[],userId:a||""})});if(!r.ok)throw Error("Error al cargar timeline");let s=await r.json();m(s.requests||[])}catch(e){p(e instanceof Error?e.message:"Error desconocido")}finally{u(!1)}},g=async e=>{try{if(!(await fetch(`/api/modelo-plataformas/timeline/${e}/close`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Error al cerrar solicitud");await f()}catch(e){p(e instanceof Error?e.message:"Error al cerrar solicitud")}},b=e=>{switch(e){case"solicitada":return"#93c5fd";case"pendiente":return"#fde047";case"entregada":return"#86efac";case"inviable":return"#fca5a5";default:return"#e2e8f0"}},y=e=>{switch(e){case"solicitada":case"pendiente":default:return r.jsx(l.Z,{className:"w-4 h-4"});case"entregada":return r.jsx(i.Z,{className:"w-4 h-4"});case"inviable":return r.jsx(o.Z,{className:"w-4 h-4"})}},v=e=>"entregada"===e||"inviable"===e;return x?r.jsx("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300 text-sm",children:"Cargando timeline..."})]})}):h?r.jsx("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-4",children:(0,r.jsxs)("div",{className:"text-center py-4",children:[r.jsx(o.Z,{className:"w-6 h-6 text-red-500 mx-auto mb-2"}),r.jsx("p",{className:"text-red-600 text-sm",children:h})]})}):(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-3 sm:p-4",style:{overflow:"visible"},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 mb-3 sm:mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[r.jsx(l.Z,{className:"w-4 h-4 sm:w-4 sm:h-4 mr-2"}),"Timeline Portafolio Modelos"]}),(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:[c.length," solicitud",1!==c.length?"es":""]})]}),0===c.length?(0,r.jsxs)("div",{className:"text-center py-4 sm:py-4",children:[r.jsx(l.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-xs sm:text-sm",children:"No hay solicitudes de plataformas activas"})]}):(0,r.jsxs)("div",{className:"max-h-96 sm:max-h-80 overflow-y-auto space-y-2.5 sm:space-y-3 relative",style:{overflowX:"visible"},children:[c.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg border border-white/30 dark:border-gray-600/30 p-3 sm:p-3",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 mb-2.5 sm:mb-2",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:space-x-2 min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2.5 h-2.5 sm:w-2 sm:h-2 rounded-full flex-shrink-0",style:{backgroundColor:b(e.status)}}),r.jsx("span",{className:"text-sm sm:text-sm font-semibold sm:font-medium text-gray-900 dark:text-gray-100 truncate",children:(0,n.W)(e.model_email)})]}),(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-1.5 sm:gap-0 sm:space-x-2",children:[r.jsx("span",{className:"hidden sm:inline text-xs text-gray-500 dark:text-gray-300",children:"•"}),r.jsx("span",{className:"text-xs sm:text-xs font-semibold sm:font-medium px-2.5 sm:px-2 py-1 sm:py-1 rounded-full text-white",style:{backgroundColor:b(e.status),textShadow:"0 1px 2px rgba(0,0,0,0.3)",display:"inline-block"},children:e.platform_name}),r.jsx("span",{className:"hidden sm:inline text-xs text-gray-500 dark:text-gray-300",children:"•"}),r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:e.group_name})]})]}),v(e.status)&&r.jsx("button",{onClick:()=>g(e.id),className:"p-2 sm:p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors active:scale-95 touch-manipulation self-start sm:self-auto",title:"Cerrar solicitud",children:r.jsx(d.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 overflow-x-auto sm:ml-[calc(2rem+1.5rem+0.5rem+1.5rem+0.5rem+3.5rem)] pb-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:b("solicitada")},children:y("solicitada")}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:[new Date(e.requested_at).toLocaleDateString()," ",new Date(e.requested_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),r.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:"Solicitada"})]}),["pendiente","entregada","inviable"].includes(e.status)&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 sm:w-6 h-0.5 bg-gray-300 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:b("pendiente")},children:y("pendiente")}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:[e.updated_at?`${new Date(e.updated_at).toLocaleDateString()} ${new Date(e.updated_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`:"Sin fecha",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),r.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:"Pendiente"})]})]}),["entregada","inviable"].includes(e.status)&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 sm:w-6 h-0.5 bg-gray-300 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[r.jsx("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:b(e.status)},children:y(e.status)}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:["entregada"===e.status&&e.delivered_at?`${new Date(e.delivered_at).toLocaleDateString()} ${new Date(e.delivered_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`:"inviable"===e.status&&e.reverted_at?`${new Date(e.reverted_at).toLocaleDateString()} ${new Date(e.reverted_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`:"Finalizado",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),r.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 capitalize whitespace-nowrap",children:"entregada"===e.status?"Entregada":"Inviable"})]})]})]})]},e.id)),c.length>5&&r.jsx("div",{className:"text-center py-2 sm:py-2",children:(0,r.jsxs)("span",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-300",children:["Y ",c.length-5," solicitud",c.length-5!=1?"es":""," m\xe1s..."]})})]})]})}},77098:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(95344),s=a(47983),l=a.n(s),i=a(3729),o=a(95322);function d({className:e=""}){let[t,a]=(0,i.useState)({europe:"",japan:"",uk:"",colombia:""}),[s,d]=(0,i.useState)(0),[c,m]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=()=>{let e=new Date,t=t=>new Intl.DateTimeFormat("es-CO",{timeZone:t,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(e).toUpperCase();a({europe:t("Europe/Berlin"),japan:t("Asia/Tokyo"),uk:t("Europe/London"),colombia:t("America/Bogota")});let r=(0,o.iR)(),[s,l,i]=r.split("-").map(Number),d=new Date(s,l,0).getDate(),n=[],c=e=>e<=0?"Periodo cerrado":`${Math.floor(e/36e5)}h ${Math.floor(e%36e5/6e4)}m`;if(15===i||i===d){let t=new Date(e);t.setHours(10,0,0,0);let a=t.getTime()-e.getTime(),s=c(a),l=a<=0;n.push({text:l?"Periodo cerrado para dxlive":`${s} para cierre de periodo dxlive`,urgent:a>0&&a<=18e5,closed:l});let i=(0,o.o8)(e).colombiaDateTime;if(new Intl.DateTimeFormat("en-CA",{timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit"}).format(i)<r){let t=new Date(e);t.setDate(t.getDate()+1),i=(0,o.o8)(t).colombiaDateTime}let d=i.getTime()-e.getTime(),m=c(d),x=d<=0;n.push({text:x?"Periodo cerrado para p\xe1ginas Eur":`${m} para cierre de periodo p\xe1ginas Eur`,urgent:d>0&&d<=18e5,closed:x});let u=new Date(e);u.setHours(24,0,0,0);let h=u.getTime()-e.getTime(),p=c(h),f=h<=0;n.push({text:f?"Periodo cerrado (total)":`${p} para cierre total de periodo`,urgent:h>0&&h<=18e5,closed:f})}else{let e=(i<15?15:d)-i;n.push({text:`${e} ${1===e?"d\xeda":"d\xedas"} para el pr\xf3ximo cierre de periodo`,urgent:!1,closed:!1})}m(n)};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,i.useEffect)(()=>{if(c.length<=1)return;let e=setInterval(()=>{d(e=>(e+1)%c.length)},4e3);return()=>clearInterval(e)},[c.length]);let x=c[s];return(0,r.jsxs)("div",{className:`jsx-1e31773023b9cf88 w-full max-w-full mx-auto mb-6 px-2 ${e}`,children:[(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 relative",children:[r.jsx("div",{className:"jsx-1e31773023b9cf88 absolute inset-0 bg-gradient-to-r from-blue-500/10 via-indigo-500/10 to-purple-500/10 rounded-2xl blur-xl"}),(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 relative overflow-hidden bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-xl border border-white/30 dark:border-gray-700/40 shadow-lg py-1.5 px-6 flex flex-row items-center justify-between gap-6 ring-1 ring-blue-500/10 dark:ring-blue-400/10 h-11",children:[(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 flex items-center gap-5 sm:gap-8 border-r border-gray-300/50 dark:border-gray-600/50 pr-6 h-full",children:[r.jsx(n,{label:"EUR",time:t.europe,icon:"\uD83C\uDDEA\uD83C\uDDFA",color:"blue"}),r.jsx(n,{label:"UK",time:t.uk,icon:"\uD83C\uDDEC\uD83C\uDDE7",color:"purple"}),r.jsx(n,{label:"JPN",time:t.japan,icon:"\uD83C\uDDEF\uD83C\uDDF5",color:"red"}),(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 hidden lg:flex items-center gap-2 px-2.5 py-1 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700/50 dark:to-gray-700/50 rounded-lg border border-blue-200/50 dark:border-gray-600/50",children:[r.jsx("span",{className:"jsx-1e31773023b9cf88 text-[9px] font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"COL"}),r.jsx("span",{className:"jsx-1e31773023b9cf88 text-xs font-mono font-medium text-gray-800 dark:text-gray-200",children:t.colombia})]})]}),r.jsx("div",{className:"jsx-1e31773023b9cf88 flex-1 flex items-center overflow-hidden h-full relative",children:x&&(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 flex items-center gap-3 animate-fade-in-smooth whitespace-nowrap",children:[r.jsx("span",{className:`jsx-1e31773023b9cf88 flex h-1.5 w-1.5 rounded-full flex-shrink-0 ${x.closed?"bg-purple-500 dark:bg-purple-400":x.urgent?"bg-orange-500 animate-pulse-fast":"bg-blue-500 animate-pulse-slow"}`}),r.jsx("p",{className:`jsx-1e31773023b9cf88 text-xs sm:text-sm font-medium uppercase tracking-wide ${x.closed?"text-purple-600 dark:text-purple-400":x.urgent?"text-orange-600 dark:text-orange-400 animate-blink":"text-gray-700 dark:text-gray-200"}`,children:x.text})]},s)})]})]}),r.jsx(l(),{id:"1e31773023b9cf88",children:"@-webkit-keyframes fadeInSmooth{from{opacity:0;-webkit-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes fadeInSmooth{from{opacity:0;-moz-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes fadeInSmooth{from{opacity:0;-o-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes fadeInSmooth{from{opacity:0;-webkit-transform:translatex(15px);-moz-transform:translatex(15px);-o-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-fade-in-smooth{-webkit-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;-moz-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;-o-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards}@-webkit-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@-moz-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@-o-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}.animate-blink{-webkit-animation:blink 1s ease-in-out infinite;-moz-animation:blink 1s ease-in-out infinite;-o-animation:blink 1s ease-in-out infinite;animation:blink 1s ease-in-out infinite}@-webkit-keyframes pulseSlow{0%,100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.6;-webkit-transform:scale(.95);transform:scale(.95)}}@-moz-keyframes pulseSlow{0%,100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}50%{opacity:.6;-moz-transform:scale(.95);transform:scale(.95)}}@-o-keyframes pulseSlow{0%,100%{opacity:1;-o-transform:scale(1);transform:scale(1)}50%{opacity:.6;-o-transform:scale(.95);transform:scale(.95)}}@keyframes pulseSlow{0%,100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:.6;-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}}.animate-pulse-slow{-webkit-animation:pulseSlow 2s ease-in-out infinite;-moz-animation:pulseSlow 2s ease-in-out infinite;-o-animation:pulseSlow 2s ease-in-out infinite;animation:pulseSlow 2s ease-in-out infinite}@-webkit-keyframes pulseFast{0%,100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.3;-webkit-transform:scale(.9);transform:scale(.9)}}@-moz-keyframes pulseFast{0%,100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}50%{opacity:.3;-moz-transform:scale(.9);transform:scale(.9)}}@-o-keyframes pulseFast{0%,100%{opacity:1;-o-transform:scale(1);transform:scale(1)}50%{opacity:.3;-o-transform:scale(.9);transform:scale(.9)}}@keyframes pulseFast{0%,100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:.3;-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}}.animate-pulse-fast{-webkit-animation:pulseFast.8s ease-in-out infinite;-moz-animation:pulseFast.8s ease-in-out infinite;-o-animation:pulseFast.8s ease-in-out infinite;animation:pulseFast.8s ease-in-out infinite}"})]})}function n({label:e,time:t,icon:a,color:s}){let l=t.split("\xa0"),i=l[0]||t.split(" ")[0],o=l[1]||t.split(" ")[1]||"";return o=o.charAt(0).toUpperCase(),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs",children:a}),r.jsx("span",{className:"text-[9px] font-semibold text-white dark:text-white uppercase tracking-wide",children:e}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:`text-sm font-mono font-semibold bg-gradient-to-br ${{blue:"from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500",purple:"from-purple-500 to-purple-600 dark:from-purple-400 dark:to-purple-500",red:"from-red-500 to-red-600 dark:from-red-400 dark:to-red-500"}[s]} bg-clip-text text-transparent`,children:i}),r.jsx("span",{className:"text-[9px] font-semibold text-white/60 dark:text-white/60",children:o})]})]})}},92509:(e,t,a)=>{a.d(t,{t:()=>s});var r=a(3729);function s(e,t,a={}){let{refreshInterval:s=3e4,enabled:l=!0,onRefresh:i,silentUpdate:o=!0}=a,d=(0,r.useRef)(null),n=(0,r.useRef)(!0),[c,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),h=(0,r.useCallback)(()=>{i&&i(),e()},[e,i]),p=(0,r.useCallback)(async()=>{if(n.current){u(!0);try{i&&i(),await e(!0)}catch(e){console.error("\uD83D\uDD04 [BILLING-POLLING] Error en actualizaci\xf3n silenciosa:",e)}finally{n.current&&u(!1)}}},[e,i]);return(0,r.useEffect)(()=>(n.current=!0,()=>{n.current=!1}),[]),(0,r.useEffect)(()=>(d.current&&clearInterval(d.current),l&&n.current?(m(!0),d.current=setInterval(()=>{n.current&&(console.log("\uD83D\uDD04 [BILLING-POLLING] Actualizaci\xf3n silenciosa iniciada"),o?p():(i&&i(),e()))},s)):m(!1),()=>{d.current&&clearInterval(d.current)}),[s,l,e,i,o,p,...t]),(0,r.useEffect)(()=>()=>{d.current&&clearInterval(d.current)},[]),{isPolling:c,isSilentUpdating:x,manualRefresh:h}}},66262:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(97075).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},67970:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(97075).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},14513:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(97075).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},33265:(e,t,a)=>{a.d(t,{W:()=>r});let r=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""}};