exports.id=1582,exports.ids=[1582],exports.modules={41692:(e,r,a)=>{Promise.resolve().then(a.bind(a,37761))},14443:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,26840,23)),Promise.resolve().then(a.t.bind(a,38771,23)),Promise.resolve().then(a.t.bind(a,13225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,43982,23))},37761:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});var s=a(95344),i=a(3729);let t=({children:e})=>{let[r,a]=(0,i.useState)(!1),[t,o]=(0,i.useState)("light");return(0,i.useEffect)(()=>{let e=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){let e=document.documentElement.classList.contains("dark")?"dark":"light";e!==t&&(o(e),a(!0),setTimeout(()=>{a(!1)},600))}})});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[t]),(0,s.jsxs)("div",{className:`relative transition-all duration-500 ease-in-out ${r?"opacity-90 scale-[0.98] blur-[1px]":"opacity-100 scale-100 blur-0"}`,children:[r&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-indigo-500/10 dark:from-gray-900/20 dark:via-gray-800/20 dark:to-gray-900/20 animate-pulse"}),s.jsx("div",{className:"absolute inset-0 bg-white/5 dark:bg-black/5 backdrop-blur-sm"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-blue-400/20 via-transparent to-transparent animate-ping"})]}),e]})}},52769:(e,r,a)=>{"use strict";a.d(r,{E4:()=>l,P1:()=>c});var s=a(72829),i=a(36654);async function t(e,r){try{console.log(`ðŸ“Š [CHAT-STATUS] Actualizando estado de usuario ${e}: ${r?"EN L\xcdNEA":"OFFLINE"}`);let a=function(){{let e=process.env.SUPABASE_SERVICE_ROLE_KEY;return(0,i.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}})}}(),{error:s}=await a.from("chat_user_status").upsert({user_id:e,is_online:r,last_seen:new Date().toISOString(),updated_at:new Date().toISOString()});s?console.error("âŒ [CHAT-STATUS] Error actualizando estado:",s):console.log(`âœ… [CHAT-STATUS] Estado actualizado exitosamente: ${r?"EN L\xcdNEA":"OFFLINE"}`)}catch(e){console.error("âŒ [CHAT-STATUS] Error general:",e)}}async function o(e){await t(e,!0)}async function n(e){await t(e,!1)}async function l(e){try{console.log("\uD83D\uDD10 [AUTH] Iniciando login moderno:",{email:e.email});let{data:r,error:a}=await s.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(a)return console.error("âŒ [AUTH] Error de autenticaci\xf3n:",a.message),{success:!1,error:"Credenciales inv\xe1lidas"};if(!r.user)return{success:!1,error:"Usuario no encontrado"};console.log("âœ… [AUTH] Usuario autenticado en Supabase:",r.user.id);let{data:i,error:t}=await s.supabase.from("users").select("id, name, email, role, is_active, last_login, organization_id").eq("id",r.user.id).single();if(t)return console.error("âŒ [AUTH] Error obteniendo perfil base:",t.message),{success:!1,error:"Error obteniendo perfil de usuario"};let{data:n,error:l}=await s.supabase.from("user_groups").select("is_manager, groups(id, name)").eq("user_id",r.user.id);if(!i)return{success:!1,error:"Perfil de usuario no encontrado"};if(!i.is_active)return{success:!1,error:"Usuario inactivo"};await s.supabase.from("users").update({last_login:new Date().toISOString()}).eq("id",r.user.id);let c={id:i.id,email:r.user.email,name:i.name,role:i.role,organization_id:i.organization_id,groups:(n||[]).map(e=>({id:e.groups?.id,name:e.groups?.name,is_manager:e.is_manager})),is_active:i.is_active,last_login:i.last_login};console.log("âœ… [AUTH] Login exitoso:",{id:c.id,email:c.email,role:c.role,groups:c.groups.length});try{await o(c.id),console.log("\uD83D\uDCCA [AUTH] Usuario marcado como en l\xednea en el chat")}catch(e){console.error("âŒ [AUTH] Error marcando usuario como en l\xednea:",e)}return{success:!0,user:c}}catch(e){return console.error("âŒ [AUTH] Error general:",e),{success:!1,error:"Error interno del servidor"}}}async function c(){try{let{data:{user:e}}=await s.supabase.auth.getUser(),{error:r}=await s.supabase.auth.signOut();if(r&&console.error("âŒ [AUTH] Error en logout:",r.message),e)try{await n(e.id),console.log("\uD83D\uDCCA [AUTH] Usuario marcado como offline en el chat")}catch(e){console.error("âŒ [AUTH] Error marcando usuario como offline:",e)}}catch(e){console.error("âŒ [AUTH] Error general en logout:",e)}}},72829:(e,r,a)=>{"use strict";a.r(r),a.d(r,{supabase:()=>s});let s=(0,a(36654).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},41878:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c,metadata:()=>l});var s=a(25036);a(67272);let i=(0,a(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\components\ThemeTransition.tsx`),{__esModule:t,$$typeof:o}=i,n=i.default,l={title:"AIM Sistema de Gesti\xf3n",description:"Sistema de gesti\xf3n de usuarios con roles y grupos - Dise\xf1o Apple.com",icons:{icon:[{url:"/favicon.png",type:"image/png",sizes:"512x512"},{url:"/favicon.png",type:"image/png",sizes:"192x192"},{url:"/favicon.png",type:"image/png",sizes:"64x64"},{url:"/favicon.png",type:"image/png",sizes:"32x32"},{url:"/favicon.ico",type:"image/x-icon",sizes:"any"}],apple:[{url:"/favicon.png",type:"image/png",sizes:"180x180"}]}};function c({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{className:"min-h-screen bg-white text-gray-900 antialiased",children:s.jsx(n,{children:e})})})}},67272:()=>{}};