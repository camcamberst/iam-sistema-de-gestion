"use strict";exports.id=7042,exports.ids=[7042],exports.modules={27042:(e,o,r)=>{r.d(o,{formatResourcesForPrompt:()=>n,getRelevantResources:()=>s});var i=r(72964);let a=process.env.SUPABASE_SERVICE_ROLE_KEY;async function s(e,o){try{let r=(0,i.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",a,{auth:{autoRefreshToken:!1,persistSession:!1}}),s=function(e){let o=e.toLowerCase();return[...["makeup","maquillaje","iluminacion","iluminaci\xf3n","angulos","\xe1ngulos","camara","c\xe1mara","audio","sonido","micr\xf3fono","microfono","vestuario","ropa","fondos","setup","configuracion","configuraci\xf3n","tips","consejos","ayuda","soporte","problema","error","productividad","ganancias","ingresos","dinero","seguridad","privacidad","proteccion","protecci\xf3n","chaturbate","stripchat","myfreecams","bonga","cam4","livejasmin"].filter(e=>o.includes(e)),...e.toLowerCase().split(/\s+/).filter(e=>e.length>3&&!["para","como","que","con","por","del","las","los","una","uno"].includes(e))]}(e),n=r.from("bot_resources").select("*").eq("is_active",!0).order("priority",{ascending:!1}).order("created_at",{ascending:!1});if("modelo"===o.role){let e=o.portfolio?.map(e=>e.platform_id).filter(Boolean)||[];n=e.length>0?n.or(`platform_id.is.null,platform_id.in.(${e.join(",")})`):n.is("platform_id",null)}let{data:t,error:c}=await n.limit(20);if(c)return console.error("❌ [BOT-RESOURCES] Error obteniendo recursos:",c),[];if(!t||0===t.length)return[];return(function(e,o,r){let i=r.toLowerCase();return e.map(e=>{let r=e.priority,a=e.title.toLowerCase();if(o.forEach(e=>{a.includes(e)&&(r+=10)}),e.description){let i=e.description.toLowerCase();o.forEach(e=>{i.includes(e)&&(r+=5)})}return e.tags.forEach(e=>{let a=e.toLowerCase();i.includes(a)&&(r+=8),o.forEach(e=>{(a.includes(e)||e.includes(a))&&(r+=5)})}),(({tips_transmision:["transmision","transmisi\xf3n","transmitir","stream","streaming","tips","consejos","makeup","iluminacion"],tips_plataforma:["plataforma","chaturbate","stripchat","mfc","myfreecams"],guia_tecnica:["tecnico","t\xe9cnico","configuracion","configuraci\xf3n","setup","instalar","instalacion"],soporte:["soporte","ayuda","problema","error","no funciona","bug"],consejeria:["emocional","sentimientos","estres","ansiedad","depresion","motivacion"],productividad:["productividad","ganancias","ingresos","dinero","ganar","mejorar"],seguridad:["seguridad","privacidad","proteccion","protecci\xf3n","seguro","anonimo"]})[e.category]||[]).forEach(e=>{i.includes(e)&&(r+=7)}),{...e,_score:r}}).sort((e,o)=>o._score-e._score).map(({_score:e,...o})=>o)})(t,s,e).slice(0,10)}catch(e){return console.error("❌ [BOT-RESOURCES] Error obteniendo recursos:",e),[]}}function n(e){if(0===e.length)return"";let o=e.map((e,o)=>{let r=e.platform_id?` (Plataforma espec\xedfica)`:" (General)",i=e.tags.length>0?` - Tags: ${e.tags.join(", ")}`:"";return`
${o+1}. ${e.title}${r}${i}
   URL: ${e.url}
   ${e.description?`Descripci\xf3n: ${e.description}`:""}`}).join("\n");return`
RECURSOS \xdaTILES DISPONIBLES:
=============================
${o}

INSTRUCCIONES PARA USAR RECURSOS:
- Si el usuario pregunta sobre algo relacionado con estos recursos, puedes mencionarlos y sugerir que los visite
- Si un recurso es espec\xedfico de una plataforma, solo menci\xf3nalo si el usuario pregunta sobre esa plataforma
- Puedes mencionar m\xfaltiples recursos si son relevantes
- Siempre incluye el t\xedtulo y la URL del recurso cuando lo menciones
- Formatea las URLs de manera clara y legible
`}}};