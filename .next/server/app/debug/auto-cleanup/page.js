(()=>{var e={};e.id=3466,e.ids=[3466],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},84927:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=a(50482),r=a(69108),n=a(62563),i=a.n(n),l=a(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["debug",{children:["auto-cleanup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,61894)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\auto-cleanup\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\auto-cleanup\\page.tsx"],u="/debug/auto-cleanup/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/debug/auto-cleanup/page",pathname:"/debug/auto-cleanup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},15895:(e,t,a)=>{Promise.resolve().then(a.bind(a,47977))},41692:(e,t,a)=>{Promise.resolve().then(a.bind(a,37761))},14443:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2583,23)),Promise.resolve().then(a.t.bind(a,26840,23)),Promise.resolve().then(a.t.bind(a,38771,23)),Promise.resolve().then(a.t.bind(a,13225,23)),Promise.resolve().then(a.t.bind(a,9295,23)),Promise.resolve().then(a.t.bind(a,43982,23))},47977:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(95344),r=a(3729);function n(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),i=async()=>{try{t(!0),console.log("\uD83E\uDDF9 [AUTO-CLEANUP-TEST] Ejecutando limpieza autom\xe1tica...");let e=await fetch("/api/chat/auto-cleanup",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();console.log("\uD83E\uDDF9 [AUTO-CLEANUP-TEST] Resultado:",a),n(a)}catch(e){console.error("❌ [AUTO-CLEANUP-TEST] Error:",e),n({error:e?.message||"Error desconocido"})}finally{t(!1)}},l=async()=>{try{t(!0),console.log("\uD83D\uDCCA [AUTO-CLEANUP-TEST] Obteniendo estad\xedsticas...");let e=await fetch("/api/chat/auto-cleanup",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();console.log("\uD83D\uDCCA [AUTO-CLEANUP-TEST] Estad\xedsticas:",a),n(a)}catch(e){console.error("❌ [AUTO-CLEANUP-TEST] Error:",e),n({error:e?.message||"Error desconocido"})}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"\uD83E\uDDF9 Limpieza Autom\xe1tica de Usuarios Inactivos"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Herramienta para probar la limpieza autom\xe1tica de usuarios que no han enviado heartbeat en los \xfaltimos 2 minutos"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:i,disabled:e,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:e?"Ejecutando...":"Ejecutar Limpieza"}),s.jsx("button",{onClick:l,disabled:e,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:e?"Obteniendo...":"Ver Estad\xedsticas"})]})]}),a&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"\uD83D\uDCCA Resultados"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(a,null,2)})}),a.success&&a.stats&&(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.stats.total}),s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Usuarios"})]}),(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.stats.online}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"En L\xednea"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:a.stats.offline}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Offline"})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.stats.potentiallyInactive}),s.jsx("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Potencialmente Inactivos"})]})]}),a.success&&a.cleanedCount>0&&(0,s.jsxs)("div",{className:"mt-6 bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"✅ Usuarios Limpiados"}),(0,s.jsxs)("p",{className:"text-green-700 dark:text-green-300",children:["Se marcaron como offline ",a.cleanedCount," usuarios inactivos"]}),a.cleanedUsers&&s.jsx("div",{className:"mt-2",children:(0,s.jsxs)("p",{className:"text-sm text-green-600 dark:text-green-400",children:["IDs: ",a.cleanedUsers.join(", ")]})})]}),a.error&&(0,s.jsxs)("div",{className:"mt-6 bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-red-900 dark:text-red-100 mb-2",children:"❌ Error"}),s.jsx("p",{className:"text-red-700 dark:text-red-300",children:a.error})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"ℹ️ Informaci\xf3n"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsx("li",{children:"• La limpieza marca como offline usuarios que no han enviado heartbeat en 2+ minutos"}),s.jsx("li",{children:"• Los usuarios se marcan autom\xe1ticamente como online al hacer login"}),s.jsx("li",{children:"• El heartbeat se env\xeda cada 30 segundos cuando la pesta\xf1a est\xe1 activa"}),s.jsx("li",{children:"• Se detecta p\xe9rdida de conexi\xf3n a internet autom\xe1ticamente"}),s.jsx("li",{children:"• Al cerrar la pesta\xf1a/navegador se marca como offline"})]})]})]})})}},37761:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(95344),r=a(3729);let n=({children:e})=>{let[t,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)("light");return(0,r.useEffect)(()=>{let e=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){let e=document.documentElement.classList.contains("dark")?"dark":"light";e!==n&&(i(e),a(!0),setTimeout(()=>{a(!1)},600))}})});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[n]),(0,s.jsxs)("div",{className:`relative transition-all duration-500 ease-in-out ${t?"opacity-90 scale-[0.98] blur-[1px]":"opacity-100 scale-100 blur-0"}`,children:[t&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-indigo-500/10 dark:from-gray-900/20 dark:via-gray-800/20 dark:to-gray-900/20 animate-pulse"}),s.jsx("div",{className:"absolute inset-0 bg-white/5 dark:bg-black/5 backdrop-blur-sm"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-blue-400/20 via-transparent to-transparent animate-ping"})]}),e]})}},61894:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let s=(0,a(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\debug\auto-cleanup\page.tsx`),{__esModule:r,$$typeof:n}=s,i=s.default},41878:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>o});var s=a(25036);a(67272);let r=(0,a(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\components\ThemeTransition.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,o={title:"AIM Sistema de Gesti\xf3n",description:"Sistema de gesti\xf3n de usuarios con roles y grupos - Dise\xf1o Apple.com",icons:{icon:[{url:"/favicon.png",type:"image/png",sizes:"512x512"},{url:"/favicon.png",type:"image/png",sizes:"192x192"},{url:"/favicon.png",type:"image/png",sizes:"64x64"},{url:"/favicon.png",type:"image/png",sizes:"32x32"},{url:"/favicon.ico",type:"image/x-icon",sizes:"any"}],apple:[{url:"/favicon.png",type:"image/png",sizes:"180x180"}]}};function d({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{className:"min-h-screen bg-white text-gray-900 antialiased",children:s.jsx(l,{children:e})})})}},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,6611],()=>a(84927));module.exports=s})();