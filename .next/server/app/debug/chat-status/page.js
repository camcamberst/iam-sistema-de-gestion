(()=>{var e={};e.id=1114,e.ids=[1114],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},44537:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["debug",{children:["chat-status",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,32097)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\chat-status\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\chat-status\\page.tsx"],u="/debug/chat-status/page",g={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/debug/chat-status/page",pathname:"/debug/chat-status",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56142:(e,t,s)=>{Promise.resolve().then(s.bind(s,79710))},41692:(e,t,s)=>{Promise.resolve().then(s.bind(s,37761))},14443:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},79710:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(95344),a=s(3729);let i=(0,s(36654).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c");function n(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),o=async()=>{try{n(!0),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Iniciando diagn\xf3stico...");let{data:{session:e},error:s}=await i.auth.getSession();if(console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Sesi\xf3n:",e),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error sesi\xf3n:",s),!e){t({error:"No hay sesi\xf3n activa",session:null});return}let{data:r,error:a}=await i.from("users").select("id, email, name, role, is_active, last_login").eq("id",e.user.id).single();console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Usuario actual:",r),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error usuario:",a);let{data:o,error:l}=await i.from("chat_user_status").select("*").eq("user_id",e.user.id).single();console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Estado de chat:",o),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error estado:",l);let{data:d,error:c}=await i.from("chat_user_status").select(`
          user_id,
          is_online,
          last_seen,
          updated_at,
          users!inner(
            id,
            email,
            name,
            role
          )
        `).order("updated_at",{ascending:!1});console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Todos los estados:",d),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error todos los estados:",c);let u=async()=>{try{let{data:t,error:s}=await i.from("chat_user_status").upsert({user_id:e.user.id,is_online:!0,last_seen:new Date().toISOString(),updated_at:new Date().toISOString()}).select();return console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Resultado actualizaci\xf3n:",t),console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error actualizaci\xf3n:",s),{updateResult:t,updateError:s}}catch(e){return console.error("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Error en actualizaci\xf3n:",e),{updateResult:null,updateError:e}}},g=await u(),{data:m,error:x}=await i.from("chat_user_status").select("*").eq("user_id",e.user.id).single();console.log("\uD83D\uDD0D [CHAT-STATUS-DIAGNOSTIC] Estado despu\xe9s de actualizaci\xf3n:",m),t({session:{user:e.user,access_token:e.access_token?"Presente":"Ausente"},currentUser:r,userError:a,chatStatus:o,statusError:l,allChatStatuses:d,allStatusError:c,updateTest:g,chatStatusAfter:m,statusAfterError:x,timestamp:new Date().toISOString()})}catch(e){console.error("❌ [CHAT-STATUS-DIAGNOSTIC] Error general:",e),t({error:e?.message||"Error desconocido",timestamp:new Date().toISOString()})}finally{n(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"\uD83D\uDD0D Diagn\xf3stico de Estado de Chat"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Analiza el estado online/offline de usuarios en el sistema de chat"}),r.jsx("button",{onClick:o,disabled:s,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:s?"Ejecutando diagn\xf3stico...":"Ejecutar Diagn\xf3stico"})]}),e&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"\uD83D\uDCCA Resultados del Diagn\xf3stico"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uD83D\uDD10 Sesi\xf3n"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.session,null,2)})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uD83D\uDC64 Usuario Actual"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.currentUser,null,2)}),e.userError&&(0,r.jsxs)("div",{className:"mt-2 text-red-600 dark:text-red-400",children:["Error: ",JSON.stringify(e.userError,null,2)]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uD83D\uDCAC Estado de Chat"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.chatStatus,null,2)}),e.statusError&&(0,r.jsxs)("div",{className:"mt-2 text-red-600 dark:text-red-400",children:["Error: ",JSON.stringify(e.statusError,null,2)]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uD83D\uDC65 Todos los Estados de Chat"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.allChatStatuses,null,2)}),e.allStatusError&&(0,r.jsxs)("div",{className:"mt-2 text-red-600 dark:text-red-400",children:["Error: ",JSON.stringify(e.allStatusError,null,2)]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"\uD83D\uDD04 Prueba de Actualizaci\xf3n"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.updateTest,null,2)})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"✅ Estado Despu\xe9s de Actualizaci\xf3n"}),r.jsx("pre",{className:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(e.chatStatusAfter,null,2)})]}),e.error&&(0,r.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-red-900 dark:text-red-100 mb-2",children:"❌ Error General"}),r.jsx("p",{className:"text-red-700 dark:text-red-300",children:e.error})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Diagn\xf3stico ejecutado: ",e.timestamp]})]})]})]})})}},37761:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95344),a=s(3729);let i=({children:e})=>{let[t,s]=(0,a.useState)(!1),[i,n]=(0,a.useState)("light");return(0,a.useEffect)(()=>{let e=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){let e=document.documentElement.classList.contains("dark")?"dark":"light";e!==i&&(n(e),s(!0),setTimeout(()=>{s(!1)},600))}})});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[i]),(0,r.jsxs)("div",{className:`relative transition-all duration-500 ease-in-out ${t?"opacity-90 scale-[0.98] blur-[1px]":"opacity-100 scale-100 blur-0"}`,children:[t&&(0,r.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-indigo-500/10 dark:from-gray-900/20 dark:via-gray-800/20 dark:to-gray-900/20 animate-pulse"}),r.jsx("div",{className:"absolute inset-0 bg-white/5 dark:bg-black/5 backdrop-blur-sm"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-blue-400/20 via-transparent to-transparent animate-ping"})]}),e]})}},32097:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\debug\chat-status\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},41878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>l});var r=s(25036);s(67272);let a=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\components\ThemeTransition.tsx`),{__esModule:i,$$typeof:n}=a,o=a.default,l={title:"AIM Sistema de Gesti\xf3n",description:"Sistema de gesti\xf3n de usuarios con roles y grupos - Dise\xf1o Apple.com",icons:{icon:[{url:"/favicon.png",type:"image/png",sizes:"512x512"},{url:"/favicon.png",type:"image/png",sizes:"192x192"},{url:"/favicon.png",type:"image/png",sizes:"64x64"},{url:"/favicon.png",type:"image/png",sizes:"32x32"},{url:"/favicon.ico",type:"image/x-icon",sizes:"any"}],apple:[{url:"/favicon.png",type:"image/png",sizes:"180x180"}]}};function d({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{className:"min-h-screen bg-white text-gray-900 antialiased",children:r.jsx(o,{children:e})})})}},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,6611,6654],()=>s(44537));module.exports=r})();