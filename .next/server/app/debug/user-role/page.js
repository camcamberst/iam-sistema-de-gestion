(()=>{var e={};e.id=9861,e.ids=[9861],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},40951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var s=r(50482),a=r(69108),i=r(62563),n=r.n(i),l=r(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["debug",{children:["user-role",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35089)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\user-role\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\debug\\user-role\\page.tsx"],u="/debug/user-role/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/debug/user-role/page",pathname:"/debug/user-role",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},31041:(e,t,r)=>{Promise.resolve().then(r.bind(r,61401))},41692:(e,t,r)=>{Promise.resolve().then(r.bind(r,37761))},14443:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},61401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(95344),a=r(3729),i=r(22254),n=r(72829);function l(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null),c=(0,i.useRouter)();return((0,a.useEffect)(()=>{(async()=>{try{l(!0);let{data:e}=await n.supabase.auth.getUser(),r=e?.user?.id;if(!r){o("Usuario no autenticado"),l(!1);return}let{data:s,error:a}=await n.supabase.from("users").select("id, name, email, role, is_active").eq("id",r).single();if(a){o(`Error obteniendo perfil: ${a.message}`),l(!1);return}if(!s){o("Perfil de usuario no encontrado"),l(!1);return}t({auth:{id:e.user?.id||"",email:e.user?.email||"",created_at:e.user?.created_at||""},profile:s,expectedRedirect:"modelo"===s.role?"/admin/model/dashboard":"/admin/dashboard"})}catch(e){o(`Error general: ${e}`)}finally{l(!1)}})()},[]),r)?s.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Verificando informaci\xf3n del usuario..."})]})}):d?s.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"âŒ Error"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d}),s.jsx("button",{onClick:()=>c.push("/login"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Ir al Login"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"\uD83D\uDD0D Diagn\xf3stico de Usuario"}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Informaci\xf3n de Autenticaci\xf3n"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID de Usuario"}),s.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-sm",children:e.auth.id})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:e.auth.email})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha de Creaci\xf3n"}),s.jsx("p",{className:"text-gray-900 dark:text-white text-sm",children:new Date(e.auth.created_at).toLocaleString()})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Perfil de Usuario"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:e.profile.name})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email del Perfil"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:e.profile.email})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rol"}),s.jsx("p",{className:`px-3 py-1 rounded-full text-sm font-medium ${"modelo"===e.profile.role?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"admin"===e.profile.role?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:e.profile.role})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado"}),s.jsx("p",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.profile.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.profile.is_active?"Activo":"Inactivo"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Redirecci\xf3n Esperada"}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-blue-900 dark:text-blue-100",children:[s.jsx("strong",{children:"URL de Redirecci\xf3n:"})," ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded",children:e.expectedRedirect})]}),(0,s.jsxs)("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:["Basado en el rol ",s.jsx("strong",{children:e.profile.role}),", el usuario deber\xeda ser redirigido a esta URL despu\xe9s del login."]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx("button",{onClick:()=>c.push("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83D\uDD04 Probar Login Nuevamente"}),s.jsx("button",{onClick:()=>c.push(e.expectedRedirect),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"\uD83C\uDFAF Ir a Dashboard Correcto"})]})]})})}},37761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(95344),a=r(3729);let i=({children:e})=>{let[t,r]=(0,a.useState)(!1),[i,n]=(0,a.useState)("light");return(0,a.useEffect)(()=>{let e=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){let e=document.documentElement.classList.contains("dark")?"dark":"light";e!==i&&(n(e),r(!0),setTimeout(()=>{r(!1)},600))}})});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[i]),(0,s.jsxs)("div",{className:`relative transition-all duration-500 ease-in-out ${t?"opacity-90 scale-[0.98] blur-[1px]":"opacity-100 scale-100 blur-0"}`,children:[t&&(0,s.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-indigo-500/10 dark:from-gray-900/20 dark:via-gray-800/20 dark:to-gray-900/20 animate-pulse"}),s.jsx("div",{className:"absolute inset-0 bg-white/5 dark:bg-black/5 backdrop-blur-sm"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-blue-400/20 via-transparent to-transparent animate-ping"})]}),e]})}},72829:(e,t,r)=>{"use strict";r.r(t),r.d(t,{supabase:()=>s});let s=(0,r(36654).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},22254:(e,t,r)=>{e.exports=r(14767)},35089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let s=(0,r(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\debug\user-role\page.tsx`),{__esModule:a,$$typeof:i}=s,n=s.default},41878:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>d});var s=r(25036);r(67272);let a=(0,r(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\components\ThemeTransition.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,d={title:"AIM Sistema de Gesti\xf3n",description:"Sistema de gesti\xf3n de usuarios con roles y grupos - Dise\xf1o Apple.com",icons:{icon:[{url:"/favicon.png",type:"image/png",sizes:"512x512"},{url:"/favicon.png",type:"image/png",sizes:"192x192"},{url:"/favicon.png",type:"image/png",sizes:"64x64"},{url:"/favicon.png",type:"image/png",sizes:"32x32"},{url:"/favicon.ico",type:"image/x-icon",sizes:"any"}],apple:[{url:"/favicon.png",type:"image/png",sizes:"180x180"}]}};function o({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{className:"min-h-screen bg-white text-gray-900 antialiased",children:s.jsx(l,{children:e})})})}},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6611,6654],()=>r(40951));module.exports=s})();