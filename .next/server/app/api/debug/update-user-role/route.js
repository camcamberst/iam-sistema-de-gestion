"use strict";(()=>{var e={};e.id=418,e.ids=[418],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},60605:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>E});var s={};t.r(s),t.d(s,{POST:()=>l,dynamic:()=>c});var o=t(95419),a=t(69108),u=t(99678),i=t(78070),n=t(66569);let c="force-dynamic";async function l(e){try{console.log("\uD83D\uDD0D [DEBUG] Actualizando rol del usuario...");let{email:r,newRole:t}=await e.json();if(!r||!t)return i.Z.json({success:!1,error:"Email y newRole son requeridos"},{status:400});let s=n.R,{data:o,error:a}=await s.from("users").update({role:t}).eq("email",r).select();if(a)return console.error("❌ [DEBUG] Error actualizando usuario:",a),i.Z.json({success:!1,error:a.message},{status:500});return console.log("✅ [DEBUG] Usuario actualizado:",o),i.Z.json({success:!0,message:`Usuario ${r} actualizado a rol ${t}`,data:o})}catch(e){return console.error("❌ [DEBUG] Error general:",e),i.Z.json({success:!1,error:e.message||"Error interno"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/debug/update-user-role/route",pathname:"/api/debug/update-user-role",filename:"route",bundlePath:"app/api/debug/update-user-role/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\debug\\update-user-role\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:h,staticGenerationBailout:E}=p,x="/api/debug/update-user-role/route";function f(){return(0,u.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},66569:(e,r,t)=>{t.d(r,{A:()=>i,R:()=>u});var s=t(72964);let o="https://mhernfrkvwigxdubiozm.supabase.co",a=process.env.SUPABASE_SERVICE_ROLE_KEY||"",u=(0,s.createClient)(o,a,{auth:{autoRefreshToken:!1,persistSession:!1}}),i=(0,s.createClient)(o,a,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,2964],()=>t(60605));module.exports=s})();