"use strict";(()=>{var e={};e.id=424,e.ids=[424],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},1424:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>f,originalPathname:()=>E,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>D,staticGenerationBailout:()=>b});var t={};a.r(t),a.d(t,{GET:()=>d,dynamic:()=>n});var o=a(95419),s=a(69108),u=a(99678),i=a(78070),l=a(72964);let n="force-dynamic",c=(0,l.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function d(e){try{console.log("\uD83D\uDD0D [DEBUG] Starting database verification...");let{data:r,error:a}=await c.from("information_schema.tables").select("table_name").eq("table_schema","public").in("table_name",["calculator_config","calculator_platforms","users","user_groups","groups"]);console.log("\uD83D\uDD0D [DEBUG] Tables found:",r);let{data:t,error:o}=await c.from("calculator_platforms").select("id, name, currency, active").limit(10);console.log("\uD83D\uDD0D [DEBUG] Platforms found:",t);let{data:s,error:u}=await c.from("calculator_config").select("*").limit(10);console.log("\uD83D\uDD0D [DEBUG] Configs found:",s);let{data:l,error:n}=await c.from("users").select("id, email, name, role").limit(10);console.log("\uD83D\uDD0D [DEBUG] Users found:",l);let{searchParams:d}=new URL(e.url),m=d.get("userId"),p=null;if(m){let{data:e,error:r}=await c.from("calculator_config").select("*").eq("model_id",m).eq("active",!0).single();p=e,console.log("\uD83D\uDD0D [DEBUG] Model config for userId",m,":",p)}return i.Z.json({success:!0,debug:{tables:r||[],platforms:t||[],configs:s||[],users:l||[],modelConfig:p,errors:{tablesError:a?.message,platformsError:o?.message,configsError:u?.message,usersError:n?.message}}})}catch(e){return console.error("❌ [DEBUG] Error:",e),i.Z.json({success:!1,error:e.message||"Error interno del servidor"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/debug/database/route",pathname:"/api/debug/database",filename:"route",bundlePath:"app/api/debug/database/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\debug\\database\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:D,serverHooks:g,headerHooks:f,staticGenerationBailout:b}=m,E="/api/debug/database/route";function h(){return(0,u.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:D})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[1638,6206,2964],()=>a(1424));module.exports=t})();