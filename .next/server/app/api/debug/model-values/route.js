"use strict";(()=>{var e={};e.id=6652,e.ids=[6652],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},16774:(e,o,t)=>{t.r(o),t.d(o,{headerHooks:()=>g,originalPathname:()=>U,patchFetch:()=>L,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>p,staticGenerationAsyncStorage:()=>E,staticGenerationBailout:()=>m});var r={};t.r(r),t.d(r,{GET:()=>i,dynamic:()=>n});var a=t(95419),s=t(69108),u=t(99678),l=t(78070);let D=(0,t(72964).createClient)("https://mhernfrkvwigxdubiozm.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),n="force-dynamic";async function i(e){let{searchParams:o}=new URL(e.url),t=o.get("modelId"),r=o.get("periodDate")||new Date().toISOString().split("T")[0];console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Starting debug..."),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] ModelId:",t),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] PeriodDate:",r);try{console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Testing Supabase connection...");let{data:e,error:o}=await D.from("model_values").select("count").limit(1);if(o)return console.log("❌ [DEBUG-MODEL-VALUES] Supabase connection failed:",o),l.Z.json({success:!1,error:"Supabase connection failed",details:o},{status:500});console.log("✅ [DEBUG-MODEL-VALUES] Supabase connection OK"),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Checking if data exists for model...");let{data:a,error:s}=await D.from("model_values").select("*").eq("model_id",t);console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] All data for model:",a?.length||0),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] All data error:",s),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Checking data for specific period...");let{data:u,error:n}=await D.from("model_values").select("*").eq("model_id",t).eq("period_date",r);console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Period data:",u?.length||0),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Period error:",n),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Checking table structure...");let{data:i,error:c}=await D.rpc("get_table_columns",{table_name:"model_values"});return console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Table structure:",i),console.log("\uD83D\uDD0D [DEBUG-MODEL-VALUES] Structure error:",c),l.Z.json({success:!0,debug:{supabaseConnection:!o,allDataCount:a?.length||0,periodDataCount:u?.length||0,allData:a||[],periodData:u||[],structureData:i||null,errors:{test:o,all:s,period:n,structure:c}}})}catch(e){return console.error("❌ [DEBUG-MODEL-VALUES] Error:",e),l.Z.json({success:!1,error:e.message||"Error interno del servidor",stack:e.stack},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/debug/model-values/route",pathname:"/api/debug/model-values",filename:"route",bundlePath:"app/api/debug/model-values/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\debug\\model-values\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:E,serverHooks:p,headerHooks:g,staticGenerationBailout:m}=c,U="/api/debug/model-values/route";function L(){return(0,u.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:E})}}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[1638,6206,2964],()=>t(16774));module.exports=r})();