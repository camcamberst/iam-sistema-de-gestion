"use strict";(()=>{var e={};e.id=7758,e.ids=[7758],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},45086:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>E,originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>_,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>b});var r={};s.r(r),s.d(r,{GET:()=>c,dynamic:()=>m});var a=s(95419),o=s(69108),i=s(99678),n=s(78070),u=s(72964),l=s(70973);let m="force-dynamic";async function c(e){let t={startedAt:new Date().toISOString(),env:{GOOGLE_GEMINI_API_KEY:!!process.env.GOOGLE_GEMINI_API_KEY,NEXT_PUBLIC_SUPABASE_URL:!0,SUPABASE_SERVICE_ROLE_KEY:!!process.env.SUPABASE_SERVICE_ROLE_KEY},supabase:{ok:!1,bot_memory:null,bot_conversation_summaries:null},ai:{ok:!1,model:null,latencyMs:null,preview:null,error:null}};try{let e=function(){let e="https://mhernfrkvwigxdubiozm.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Variables de entorno de Supabase faltantes (NEXT_PUBLIC_SUPABASE_URL o SUPABASE_SERVICE_ROLE_KEY)");return(0,u.createClient)(e,t)}();try{let{data:s,error:r}=await e.from("bot_memory").select("id").limit(1);t.supabase.bot_memory={exists:!r,error:r?{code:r.code,message:r.message}:null,sample:s?.[0]?.id||null}}catch(e){t.supabase.bot_memory={exists:!1,error:{message:e?.message}}}try{let{data:s,error:r}=await e.from("bot_conversation_summaries").select("conversation_id").limit(1);t.supabase.bot_conversation_summaries={exists:!r,error:r?{code:r.code,message:r.message}:null,sample:s?.[0]?.conversation_id||null}}catch(e){t.supabase.bot_conversation_summaries={exists:!1,error:{message:e?.message}}}t.supabase.ok=!!(t.supabase.bot_memory?.exists&&t.supabase.bot_conversation_summaries?.exists)}catch(e){t.supabase={ok:!1,error:{message:e?.message}}}try{let e=function(){let e=process.env.GOOGLE_GEMINI_API_KEY;if(!e)throw Error("GOOGLE_GEMINI_API_KEY no est\xe1 configurada");return new l.$D(e)}(),s=!1,r=null,a=null,o=null,i=null;for(let t of["gemini-3.0-pro","gemini-3-pro-preview","gemini-3.0-flash","gemini-3-flash-preview","gemini-2.5-flash","gemini-2.5-pro","gemini-2.5-flash-lite","gemini-1.5-flash","gemini-1.5-pro","gemini-pro"])try{let i=e.getGenerativeModel({model:t}),n=Date.now(),u=await i.generateContent({contents:[{role:"user",parts:[{text:"ping"}]}]});o=Date.now()-n,a=u.response?.text()?.slice(0,120)||null,r=t,s=!0;break}catch(e){i=e}t.ai.ok=s,t.ai.model=r,t.ai.preview=a,t.ai.latencyMs=o,!s&&i&&(t.ai.error={message:i?.message,code:i?.code})}catch(e){t.ai={ok:!1,error:{message:e?.message}}}return n.Z.json({success:!0,checks:t},{status:200})}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/chat/aim-botty/diagnostics/route",pathname:"/api/chat/aim-botty/diagnostics",filename:"route",bundlePath:"app/api/chat/aim-botty/diagnostics/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\chat\\aim-botty\\diagnostics\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:_,staticGenerationAsyncStorage:d,serverHooks:g,headerHooks:E,staticGenerationBailout:b}=p,h="/api/chat/aim-botty/diagnostics/route";function v(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,6206,2964,973],()=>s(45086));module.exports=r})();