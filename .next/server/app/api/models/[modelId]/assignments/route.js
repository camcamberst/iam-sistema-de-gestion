"use strict";(()=>{var e={};e.id=697,e.ids=[697],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},39293:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>h,originalPathname:()=>v,patchFetch:()=>I,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>x});var o={};s.r(o),s.d(o,{GET:()=>l});var t=s(95419),n=s(69108),a=s(99678),i=s(78070),d=s(72964);let u=process.env.SUPABASE_SERVICE_ROLE_KEY;async function l(e,{params:r}){try{let{modelId:e}=r;if(!e)return i.Z.json({success:!1,error:"ID de modelo requerido"},{status:400});console.log("\uD83D\uDD0D [API] Obteniendo asignaciones para modelo:",e);let s=(0,d.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",u),{data:o,error:t}=await s.from("room_assignments_detailed").select("*").eq("model_id",e).order("assigned_at",{ascending:!1});if(t)return console.error("❌ [API] Error obteniendo asignaciones de modelo:",t),i.Z.json({success:!1,error:`Error obteniendo asignaciones: ${t.message}`},{status:500});return console.log(`✅ [API] Asignaciones encontradas para modelo ${e}:`,o?.length||0),i.Z.json({success:!0,assignments:o||[]})}catch(e){return console.error("❌ [API] Error general en /api/models/[modelId]/assignments:",e),i.Z.json({success:!1,error:"Error interno del servidor"},{status:500})}}let m=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/models/[modelId]/assignments/route",pathname:"/api/models/[modelId]/assignments",filename:"route",bundlePath:"app/api/models/[modelId]/assignments/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\models\\[modelId]\\assignments\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:g,headerHooks:h,staticGenerationBailout:x}=m,v="/api/models/[modelId]/assignments/route";function I(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),o=r.X(0,[1638,6206,2964],()=>s(39293));module.exports=o})();