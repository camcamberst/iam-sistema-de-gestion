"use strict";(()=>{var e={};e.id=1344,e.ids=[1344],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},29869:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>_,originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>$,staticGenerationAsyncStorage:()=>S,staticGenerationBailout:()=>b});var a={};t.r(a),t.d(a,{GET:()=>c,dynamic:()=>l});var o=t(95419),i=t(69108),n=t(99678),s=t(78070),u=t(72964),d=t(13532);let l="force-dynamic",p=(0,u.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function c(e){try{let e,r;let t=(0,d.iR)(),a=(0,d.lm)(),[o,i,n]=t.split("-").map(Number),u=n>=16;if(u){e=`${o}-${String(i).padStart(2,"0")}-16`;let t=new Date(o,i,0).getDate();r=`${o}-${String(i).padStart(2,"0")}-${t}`}else e=`${o}-${String(i).padStart(2,"0")}-01`,r=`${o}-${String(i).padStart(2,"0")}-15`;let{data:l,error:c}=await p.from("model_values").select("id, model_id, platform_id, value, period_date, updated_at").order("period_date",{ascending:!1}).limit(100);if(c)throw c;let m={};l?.forEach(e=>{m[e.period_date]=(m[e.period_date]||0)+1});let g=l?.filter(t=>t.period_date>=e&&t.period_date<=r);return s.Z.json({success:!0,current_date:t,period_start_calculated:a,current_period:{startDate:e,endDate:r,isP2:u},total_values_in_db:l?.length||0,values_in_current_period:g?.length||0,distribution_by_date:m,sample_values:l?.slice(0,20)})}catch(e){return console.error("❌ [DEBUG-VALUES] Error:",e),s.Z.json({success:!1,error:e instanceof Error?e.message:"Error"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/calculator/debug-values/route",pathname:"/api/calculator/debug-values",filename:"route",bundlePath:"app/api/calculator/debug-values/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\calculator\\debug-values\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:S,serverHooks:$,headerHooks:_,staticGenerationBailout:b}=m,v="/api/calculator/debug-values/route";function h(){return(0,n.patchFetch)({serverHooks:$,staticGenerationAsyncStorage:S})}},13532:(e,r,t)=>{t.d(r,{Bs:()=>i,Jz:()=>o,iR:()=>n,lm:()=>a});let a=()=>{let[e,r,t]=n().split("-").map(Number);return`${e}-${String(r).padStart(2,"0")}-${String(t<=15?1:16).padStart(2,"0")}`},o=e=>{try{if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return console.warn("⚠️ [DATE-UTILS] Formato de fecha inv\xe1lido para normalizar:",e),a();let[r,t,o]=e.split("-").map(Number);if(!r||!t||!o)return a();return`${r}-${String(t).padStart(2,"0")}-${String(o<=15?1:16).padStart(2,"0")}`}catch(e){return console.error("❌ [DATE-UTILS] Error normalizando fecha:",e),a()}},i=e=>{try{let[r,t,a]=e.split("-").map(Number),o=a<=15,i=`${r}-${String(t).padStart(2,"0")}-${o?"01":"16"}`,n="";if(o)n=`${r}-${String(t).padStart(2,"0")}-15`;else{let e=new Date(r,t,0).getDate();n=`${r}-${String(t).padStart(2,"0")}-${e}`}let s=`${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t-1]} ${r} - Per\xedodo ${o?"1":"2"}`;return{startDate:i,endDate:n,name:s,isP1:o}}catch(r){return console.error("❌ [DATE-UTILS] Error calculando detalles del per\xedodo:",r),{startDate:e,endDate:e,name:`Per\xedodo ${e}`,isP1:!0}}},n=()=>new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206,2964],()=>t(29869));module.exports=a})();