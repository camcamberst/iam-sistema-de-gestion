"use strict";(()=>{var e={};e.id=5605,e.ids=[5605],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},30369:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>f,originalPathname:()=>F,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>U});var a={};o.r(a),o.d(a,{GET:()=>p,dynamic:()=>u});var r=o(95419),n=o(69108),s=o(99678);function i(e,t){let o=Math.pow(10,t);return Math.round(e*o)/o}function c(e){return Math.round(e)}let u="force-dynamic";async function p(e){try{let{searchParams:t}=new URL(e.url),o=t.get("demo");if("1"===o){let e=function(e,t,o,a){var r,n;let s;let u=new Set(a.enabledPlatformIds),p=new Map(t.map(e=>[e.platformId,e.valueInput])),d=[],l=0,m=0;for(let t of e){if(!u.has(t.id))continue;let e=p.get(t.id)??0,n=function(e,t,o){switch(e.conversionType){case"usd_cop":{let o=t;return void 0!==e.taxFactor&&(o*=e.taxFactor),void 0!==e.discountFactor&&(o*=e.discountFactor),o}case"eur_usd_cop":{let a=t*o.EUR_USD;return void 0!==e.taxFactor&&(a*=e.taxFactor),void 0!==e.discountFactor&&(a*=e.discountFactor),a}case"gbp_usd_cop":{let a=t*o.GBP_USD;return void 0!==e.taxFactor&&(a*=e.taxFactor),void 0!==e.discountFactor&&(a*=e.discountFactor),a}case"tokens":{let o=t*(e.tokenRateUsd??0);return void 0!==e.taxFactor&&(o*=e.taxFactor),void 0!==e.discountFactor&&(o*=e.discountFactor),o}default:return 0}}(t,e,o);n=(r=n)<0?0:r;let s=a.percentageRule.percentageModel;t.specialFlags?.superfoon_100_model&&(s=100);let v=s/100*n,f=v*o.USD_COP;d.push({platformId:t.id,usdBruto:i(n,2),usdModelo:i(v,2),copModelo:c(f)}),l+=n,m+=v}let v=c(m*o.USD_COP);if(void 0!==a.cuotaMinimaUsd&&a.cuotaMinimaUsd>0){let e=l<a.cuotaMinimaUsd,t=e?(n=(a.cuotaMinimaUsd-l)/a.cuotaMinimaUsd*100)<0?0:n:0;s={below:e,percentToReach:i(t,2)}}let f=c(.9*v);return{perPlatform:d,totalUsdBruto:i(l,2),totalUsdModelo:i(m,2),totalCopModelo:v,cuotaMinimaAlert:s,anticipoMaxCop:f}}([{id:"p1",code:"BIG7",name:"Big7",conversionType:"eur_usd_cop",taxFactor:.84},{id:"p2",code:"AW",name:"AW",conversionType:"gbp_usd_cop",discountFactor:.677},{id:"p3",code:"DXLIVE",name:"DX Live",conversionType:"tokens",tokenRateUsd:.6},{id:"p4",code:"CH",name:"Chaturbate",conversionType:"tokens",tokenRateUsd:.05},{id:"p5",code:"SUPERFOON",name:"SUPERFOON",conversionType:"usd_cop",specialFlags:{superfoon_100_model:!0}}],[{platformId:"p1",valueInput:100},{platformId:"p2",valueInput:100},{platformId:"p3",valueInput:100},{platformId:"p4",valueInput:100},{platformId:"p5",valueInput:100}],{USD_COP:3894,EUR_USD:1.01,GBP_USD:1.2},{enabledPlatformIds:["p1","p2","p3","p4","p5"],percentageRule:{percentageModel:80},cuotaMinimaUsd:470});return new Response(JSON.stringify({success:!0,mode:"demo",result:e},null,2),{status:200,headers:{"Content-Type":"application/json"}})}return new Response(JSON.stringify({success:!1,error:"Preview real no implementado a\xfan. Usa ?demo=1 para ejemplo."}),{status:501,headers:{"Content-Type":"application/json"}})}catch(e){return new Response(JSON.stringify({success:!1,error:e?.message??"Error inesperado"}),{status:500,headers:{"Content-Type":"application/json"}})}}let d=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/calculator/preview/route",pathname:"/api/calculator/preview",filename:"route",bundlePath:"app/api/calculator/preview/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\calculator\\preview\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:v,headerHooks:f,staticGenerationBailout:U}=d,F="/api/calculator/preview/route";function g(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}},95419:(e,t,o)=>{e.exports=o(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),a=t.X(0,[1638],()=>o(30369));module.exports=a})();