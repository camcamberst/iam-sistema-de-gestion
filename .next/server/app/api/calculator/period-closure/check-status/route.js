"use strict";(()=>{var e={};e.id=8872,e.ids=[8872],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},27209:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>T,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>D});var o={};r.r(o),r.d(o,{GET:()=>d});var a=r(95419),i=r(69108),s=r(99678),n=r(78070),u=r(72964),p=r(18539);let l=(0,u.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});async function d(e){try{let e=(0,p.iR)(),t=(0,p.im)(),{data:r,error:o}=await l.from("calculator_period_closure_status").select("*").eq("period_date",e).order("created_at",{ascending:!1}).limit(1).single();if(o&&"PGRST116"!==o.code)return console.error("❌ [CHECK-STATUS] Error obteniendo estado:",o),n.Z.json({success:!1,error:"Error obteniendo estado"},{status:500});return n.Z.json({success:!0,period_date:e,period_type:t,status:r||null,is_closing:r?.status&&"completed"!==r.status&&"failed"!==r.status})}catch(e){return console.error("❌ [CHECK-STATUS] Error:",e),n.Z.json({success:!1,error:"Error interno del servidor"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/calculator/period-closure/check-status/route",pathname:"/api/calculator/period-closure/check-status",filename:"route",bundlePath:"app/api/calculator/period-closure/check-status/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\calculator\\period-closure\\check-status\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:y,staticGenerationBailout:D}=c,T="/api/calculator/period-closure/check-status/route";function f(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},18539:(e,t,r)=>{r.d(t,{Bm:()=>a,Ck:()=>c,UX:()=>m,Y:()=>n,a9:()=>s,g5:()=>u,iR:()=>o,im:()=>p,ns:()=>d,o8:()=>i,sF:()=>l});let o=()=>new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"}),a=()=>new Date().toLocaleString("sv-SE",{timeZone:"America/Bogota"}),i=e=>{let t=e||new Date,r=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/Berlin",year:"numeric",month:"2-digit",day:"2-digit"}).format(t),o=new Intl.DateTimeFormat("en-US",{timeZone:"Europe/Berlin",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(t),a={};o.forEach(e=>{"literal"!==e.type&&(a[e.type]=e.value)});let i=new Date(`${a.year}-${a.month}-${a.day}T00:00:00Z`),s=null;for(let e of[1,2]){let t=new Date(i.getTime()-36e5*e);if("00:00:00"===new Intl.DateTimeFormat("en-US",{timeZone:"Europe/Berlin",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(t)){s=t;break}}s||(s=new Date(i.getTime()-54e5));let n=new Intl.DateTimeFormat("en-US",{timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(s),u={};return n.forEach(e=>{"literal"!==e.type&&(u[e.type]=e.value)}),{colombiaTime:`${u.hour}:${u.minute}:${u.second}`||"00:00:00",colombiaDate:`${u.year}-${u.month}-${u.day}`,colombiaDateTime:s,europeDate:r}},s=()=>{let e=new Date,t=a(),r=i(e),[o,s]=t.split(" ")[1]?.split(":")||["00","00"],[n,u]=r.colombiaTime.split(":");return 5>=Math.abs(60*parseInt(o)+parseInt(s)-(60*parseInt(n)+parseInt(u)))},n=()=>{let e=a(),[t,r]=e.split(" ")[1]?.split(":")||["00","00"],o=parseInt(t),i=parseInt(r);return 0===o&&i>=0&&i<=15},u=["superfoon","livecreator","mdh","777","xmodels","big7","mondo","vx","babestation","dirtyfans"],p=()=>{let e=parseInt(o().split("-")[2]);return e>=1&&e<=15?"1-15":"16-31"},l=()=>{let e=o(),[t,r,a]=e.split("-").map(Number);if(1===a){let e=1===r?12:r-1,o=1===r?t-1:t;return new Date(o,e,0).getDate(),{periodDate:`${o}-${String(e).padStart(2,"0")}-16`,periodType:"16-31"}}return 16===a?{periodDate:`${t}-${String(r).padStart(2,"0")}-01`,periodType:"1-15"}:{periodDate:e,periodType:a<=15?"1-15":"16-31"}},d=()=>{let e=o(),[t,r,a]=e.split("-").map(Number);return 1===a?{periodDate:e,periodType:"1-15"}:16===a?{periodDate:e,periodType:"16-31"}:{periodDate:e,periodType:a<=15?"1-15":"16-31"}},c=()=>{let e=parseInt(o().split("-")[2]);return 1===e||16===e},m=()=>{let[e,t,r]=o().split("-").map(Number);return 15===r||r===new Date(e,t,0).getDate()}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[1638,6206,2964],()=>r(27209));module.exports=o})();