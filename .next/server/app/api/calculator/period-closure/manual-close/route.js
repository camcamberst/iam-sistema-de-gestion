"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/calculator/period-closure/manual-close/route";
exports.ids = ["app/api/calculator/period-closure/manual-close/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&page=%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute.ts&appDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&page=%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute.ts&appDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_camca_OneDrive_Documentos_GitHub_iam_sistema_de_gestion_app_api_calculator_period_closure_manual_close_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/calculator/period-closure/manual-close/route.ts */ \"(rsc)/./app/api/calculator/period-closure/manual-close/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/calculator/period-closure/manual-close/route\",\n        pathname: \"/api/calculator/period-closure/manual-close\",\n        filename: \"route\",\n        bundlePath: \"app/api/calculator/period-closure/manual-close/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\camca\\\\OneDrive\\\\Documentos\\\\GitHub\\\\iam-sistema-de-gestion\\\\app\\\\api\\\\calculator\\\\period-closure\\\\manual-close\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_camca_OneDrive_Documentos_GitHub_iam_sistema_de_gestion_app_api_calculator_period_closure_manual_close_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/calculator/period-closure/manual-close/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjYWxjdWxhdG9yJTJGcGVyaW9kLWNsb3N1cmUlMkZtYW51YWwtY2xvc2UlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNhbGN1bGF0b3IlMkZwZXJpb2QtY2xvc3VyZSUyRm1hbnVhbC1jbG9zZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNhbGN1bGF0b3IlMkZwZXJpb2QtY2xvc3VyZSUyRm1hbnVhbC1jbG9zZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjYW1jYSU1Q09uZURyaXZlJTVDRG9jdW1lbnRvcyU1Q0dpdEh1YiU1Q2lhbS1zaXN0ZW1hLWRlLWdlc3Rpb24lNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2NhbWNhJTVDT25lRHJpdmUlNUNEb2N1bWVudG9zJTVDR2l0SHViJTVDaWFtLXNpc3RlbWEtZGUtZ2VzdGlvbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRjtBQUNqSztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3Npc3RlbWEtZ2VzdGlvbi1haW0vPzIyNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcY2FtY2FcXFxcT25lRHJpdmVcXFxcRG9jdW1lbnRvc1xcXFxHaXRIdWJcXFxcaWFtLXNpc3RlbWEtZGUtZ2VzdGlvblxcXFxhcHBcXFxcYXBpXFxcXGNhbGN1bGF0b3JcXFxccGVyaW9kLWNsb3N1cmVcXFxcbWFudWFsLWNsb3NlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYWxjdWxhdG9yL3BlcmlvZC1jbG9zdXJlL21hbnVhbC1jbG9zZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NhbGN1bGF0b3IvcGVyaW9kLWNsb3N1cmUvbWFudWFsLWNsb3NlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jYWxjdWxhdG9yL3BlcmlvZC1jbG9zdXJlL21hbnVhbC1jbG9zZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGNhbWNhXFxcXE9uZURyaXZlXFxcXERvY3VtZW50b3NcXFxcR2l0SHViXFxcXGlhbS1zaXN0ZW1hLWRlLWdlc3Rpb25cXFxcYXBwXFxcXGFwaVxcXFxjYWxjdWxhdG9yXFxcXHBlcmlvZC1jbG9zdXJlXFxcXG1hbnVhbC1jbG9zZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jYWxjdWxhdG9yL3BlcmlvZC1jbG9zdXJlL21hbnVhbC1jbG9zZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&page=%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute.ts&appDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/calculator/period-closure/manual-close/route.ts":
/*!*****************************************************************!*\
  !*** ./app/api/calculator/period-closure/manual-close/route.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _utils_period_closure_dates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/period-closure-dates */ \"(rsc)/./utils/period-closure-dates.ts\");\n/* harmony import */ var _lib_calculator_period_closure_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/calculator/period-closure-helpers */ \"(rsc)/./lib/calculator/period-closure-helpers.ts\");\n/* harmony import */ var _lib_calculator_period_closure_states__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/calculator/period-closure-states */ \"(rsc)/./lib/calculator/period-closure-states.ts\");\n\n\n\n\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_4__.createClient)(\"https://mhernfrkvwigxdubiozm.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n/**\r\n * POST: Cierre manual para casos de recuperación\r\n * Solo para admins/super_admins\r\n */ async function POST(request) {\n    try {\n        // Verificar autorización\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader?.startsWith(\"Bearer \")) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Token de autorizaci\\xf3n requerido\"\n            }, {\n                status: 401\n            });\n        }\n        const token = authHeader.split(\" \")[1];\n        const { data: { user }, error: authError } = await supabase.auth.getUser(token);\n        if (authError || !user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Token inv\\xe1lido\"\n            }, {\n                status: 401\n            });\n        }\n        // Verificar que es admin o super_admin\n        const { data: userData } = await supabase.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n        if (!userData || userData.role !== \"admin\" && userData.role !== \"super_admin\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes permisos para realizar cierre manual\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { periodDate, targetStatus, force } = body;\n        if (!periodDate || !targetStatus) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"periodDate y targetStatus son requeridos\"\n            }, {\n                status: 400\n            });\n        }\n        const currentDate = periodDate || (0,_utils_period_closure_dates__WEBPACK_IMPORTED_MODULE_1__.getColombiaDate)();\n        const periodType = (0,_utils_period_closure_dates__WEBPACK_IMPORTED_MODULE_1__.getCurrentPeriodType)();\n        // Obtener estado actual\n        const { data: currentStatus } = await supabase.from(\"calculator_period_closure_status\").select(\"*\").eq(\"period_date\", currentDate).order(\"created_at\", {\n            ascending: false\n        }).limit(1).single();\n        if (currentStatus && !force) {\n            // Verificar transición válida\n            if (!(0,_lib_calculator_period_closure_states__WEBPACK_IMPORTED_MODULE_3__.isValidTransition)(currentStatus.status, targetStatus)) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: `Transición inválida: ${currentStatus.status} -> ${targetStatus}`,\n                    current_status: currentStatus.status,\n                    valid_next: [\n                        \"pending\",\n                        \"early_freezing\",\n                        \"closing_calculators\",\n                        \"waiting_summary\",\n                        \"closing_summary\",\n                        \"archiving\",\n                        \"completed\",\n                        \"failed\"\n                    ]\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Actualizar estado\n        await (0,_lib_calculator_period_closure_helpers__WEBPACK_IMPORTED_MODULE_2__.updateClosureStatus)(currentDate, periodType, targetStatus, {\n            manual_closure: true,\n            executed_by: user.id,\n            executed_at: new Date().toISOString(),\n            previous_status: currentStatus?.status || null\n        });\n        console.log(`✅ [MANUAL-CLOSE] Estado actualizado manualmente: ${currentStatus?.status || \"none\"} -> ${targetStatus}`);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Estado actualizado manualmente\",\n            period_date: currentDate,\n            period_type: periodType,\n            previous_status: currentStatus?.status || null,\n            new_status: targetStatus,\n            executed_by: user.id\n        });\n    } catch (error) {\n        console.error(\"❌ [MANUAL-CLOSE] Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details: error instanceof Error ? error.message : \"Error desconocido\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NhbGN1bGF0b3IvcGVyaW9kLWNsb3N1cmUvbWFudWFsLWNsb3NlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNIO0FBQ2dDO0FBQ1A7QUFDSDtBQUUzRSxNQUFNTSxXQUFXTCxtRUFBWUEsQ0FDM0JNLDBDQUFvQyxFQUNwQ0EsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckM7SUFDRUMsTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtBQUNGO0FBR0Y7OztDQUdDLEdBQ00sZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLHlCQUF5QjtRQUN6QixNQUFNQyxhQUFhRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztRQUN2QyxJQUFJLENBQUNGLFlBQVlHLFdBQVcsWUFBWTtZQUN0QyxPQUFPbkIsa0ZBQVlBLENBQUNvQixJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUQyxPQUFPO1lBQ1QsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25CO1FBRUEsTUFBTUMsUUFBUVIsV0FBV1MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3RDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxJQUFJLEVBQUUsRUFBRUwsT0FBT00sU0FBUyxFQUFFLEdBQUcsTUFBTXRCLFNBQVNLLElBQUksQ0FBQ2tCLE9BQU8sQ0FBQ0w7UUFFekUsSUFBSUksYUFBYSxDQUFDRCxNQUFNO1lBQ3RCLE9BQU8zQixrRkFBWUEsQ0FBQ29CLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RDLE9BQU87WUFDVCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7UUFFQSx1Q0FBdUM7UUFDdkMsTUFBTSxFQUFFRyxNQUFNSSxRQUFRLEVBQUUsR0FBRyxNQUFNeEIsU0FDOUJ5QixJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLFFBQ1BDLEVBQUUsQ0FBQyxNQUFNTixLQUFLTyxFQUFFLEVBQ2hCQyxNQUFNO1FBRVQsSUFBSSxDQUFDTCxZQUFhQSxTQUFTTSxJQUFJLEtBQUssV0FBV04sU0FBU00sSUFBSSxLQUFLLGVBQWdCO1lBQy9FLE9BQU9wQyxrRkFBWUEsQ0FBQ29CLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RDLE9BQU87WUFDVCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7UUFFQSxNQUFNYyxPQUFPLE1BQU10QixRQUFRSyxJQUFJO1FBQy9CLE1BQU0sRUFBRWtCLFVBQVUsRUFBRUMsWUFBWSxFQUFFQyxLQUFLLEVBQUUsR0FBR0g7UUFFNUMsSUFBSSxDQUFDQyxjQUFjLENBQUNDLGNBQWM7WUFDaEMsT0FBT3ZDLGtGQUFZQSxDQUFDb0IsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVEMsT0FBTztZQUNULEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNuQjtRQUVBLE1BQU1rQixjQUFjSCxjQUFjcEMsNEVBQWVBO1FBQ2pELE1BQU13QyxhQUFhdkMsaUZBQW9CQTtRQUV2Qyx3QkFBd0I7UUFDeEIsTUFBTSxFQUFFdUIsTUFBTWlCLGFBQWEsRUFBRSxHQUFHLE1BQU1yQyxTQUNuQ3lCLElBQUksQ0FBQyxvQ0FDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxlQUFlUSxhQUNsQkcsS0FBSyxDQUFDLGNBQWM7WUFBRUMsV0FBVztRQUFNLEdBQ3ZDQyxLQUFLLENBQUMsR0FDTlgsTUFBTTtRQUVULElBQUlRLGlCQUFpQixDQUFDSCxPQUFPO1lBQzNCLDhCQUE4QjtZQUM5QixJQUFJLENBQUNuQyx3RkFBaUJBLENBQUNzQyxjQUFjcEIsTUFBTSxFQUFFZ0IsZUFBZTtnQkFDMUQsT0FBT3ZDLGtGQUFZQSxDQUFDb0IsSUFBSSxDQUFDO29CQUN2QkMsU0FBUztvQkFDVEMsT0FBTyxDQUFDLHFCQUFxQixFQUFFcUIsY0FBY3BCLE1BQU0sQ0FBQyxJQUFJLEVBQUVnQixhQUFhLENBQUM7b0JBQ3hFUSxnQkFBZ0JKLGNBQWNwQixNQUFNO29CQUNwQ3lCLFlBQVk7d0JBQUM7d0JBQVc7d0JBQWtCO3dCQUF1Qjt3QkFBbUI7d0JBQW1CO3dCQUFhO3dCQUFhO3FCQUFTO2dCQUM1SSxHQUFHO29CQUFFekIsUUFBUTtnQkFBSTtZQUNuQjtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCLE1BQU1uQiwyRkFBbUJBLENBQUNxQyxhQUFhQyxZQUFZSCxjQUFxQjtZQUN0RVUsZ0JBQWdCO1lBQ2hCQyxhQUFhdkIsS0FBS08sRUFBRTtZQUNwQmlCLGFBQWEsSUFBSUMsT0FBT0MsV0FBVztZQUNuQ0MsaUJBQWlCWCxlQUFlcEIsVUFBVTtRQUM1QztRQUVBZ0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsaURBQWlELEVBQUViLGVBQWVwQixVQUFVLE9BQU8sSUFBSSxFQUFFZ0IsYUFBYSxDQUFDO1FBRXBILE9BQU92QyxrRkFBWUEsQ0FBQ29CLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUb0MsU0FBUztZQUNUQyxhQUFhakI7WUFDYmtCLGFBQWFqQjtZQUNiWSxpQkFBaUJYLGVBQWVwQixVQUFVO1lBQzFDcUMsWUFBWXJCO1lBQ1pXLGFBQWF2QixLQUFLTyxFQUFFO1FBQ3RCO0lBRUYsRUFBRSxPQUFPWixPQUFPO1FBQ2RpQyxRQUFRakMsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBT3RCLGtGQUFZQSxDQUFDb0IsSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RDLE9BQU87WUFDUHVDLFNBQVN2QyxpQkFBaUJ3QyxRQUFReEMsTUFBTW1DLE9BQU8sR0FBRztRQUNwRCxHQUFHO1lBQUVsQyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Npc3RlbWEtZ2VzdGlvbi1haW0vLi9hcHAvYXBpL2NhbGN1bGF0b3IvcGVyaW9kLWNsb3N1cmUvbWFudWFsLWNsb3NlL3JvdXRlLnRzPzI1OWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuaW1wb3J0IHsgZ2V0Q29sb21iaWFEYXRlLCBnZXRDdXJyZW50UGVyaW9kVHlwZSB9IGZyb20gJ0AvdXRpbHMvcGVyaW9kLWNsb3N1cmUtZGF0ZXMnO1xyXG5pbXBvcnQgeyB1cGRhdGVDbG9zdXJlU3RhdHVzIH0gZnJvbSAnQC9saWIvY2FsY3VsYXRvci9wZXJpb2QtY2xvc3VyZS1oZWxwZXJzJztcclxuaW1wb3J0IHsgaXNWYWxpZFRyYW5zaXRpb24gfSBmcm9tICdAL2xpYi9jYWxjdWxhdG9yL3BlcmlvZC1jbG9zdXJlLXN0YXRlcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYXMgc3RyaW5nLFxyXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgYXMgc3RyaW5nLFxyXG4gIHtcclxuICAgIGF1dGg6IHtcclxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuKTtcclxuXHJcbi8qKlxyXG4gKiBQT1NUOiBDaWVycmUgbWFudWFsIHBhcmEgY2Fzb3MgZGUgcmVjdXBlcmFjacOzblxyXG4gKiBTb2xvIHBhcmEgYWRtaW5zL3N1cGVyX2FkbWluc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gVmVyaWZpY2FyIGF1dG9yaXphY2nDs25cclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgICBpZiAoIWF1dGhIZWFkZXI/LnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnVG9rZW4gZGUgYXV0b3JpemFjacOzbiByZXF1ZXJpZG8nXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIodG9rZW4pO1xyXG5cclxuICAgIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ1Rva2VuIGludsOhbGlkbydcclxuICAgICAgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZmljYXIgcXVlIGVzIGFkbWluIG8gc3VwZXJfYWRtaW5cclxuICAgIGNvbnN0IHsgZGF0YTogdXNlckRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgIC5zZWxlY3QoJ3JvbGUnKVxyXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghdXNlckRhdGEgfHwgKHVzZXJEYXRhLnJvbGUgIT09ICdhZG1pbicgJiYgdXNlckRhdGEucm9sZSAhPT0gJ3N1cGVyX2FkbWluJykpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ05vIHRpZW5lcyBwZXJtaXNvcyBwYXJhIHJlYWxpemFyIGNpZXJyZSBtYW51YWwnXHJcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDMgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3QgeyBwZXJpb2REYXRlLCB0YXJnZXRTdGF0dXMsIGZvcmNlIH0gPSBib2R5O1xyXG5cclxuICAgIGlmICghcGVyaW9kRGF0ZSB8fCAhdGFyZ2V0U3RhdHVzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdwZXJpb2REYXRlIHkgdGFyZ2V0U3RhdHVzIHNvbiByZXF1ZXJpZG9zJ1xyXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gcGVyaW9kRGF0ZSB8fCBnZXRDb2xvbWJpYURhdGUoKTtcclxuICAgIGNvbnN0IHBlcmlvZFR5cGUgPSBnZXRDdXJyZW50UGVyaW9kVHlwZSgpO1xyXG5cclxuICAgIC8vIE9idGVuZXIgZXN0YWRvIGFjdHVhbFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50U3RhdHVzIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2FsY3VsYXRvcl9wZXJpb2RfY2xvc3VyZV9zdGF0dXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdwZXJpb2RfZGF0ZScsIGN1cnJlbnREYXRlKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDEpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoY3VycmVudFN0YXR1cyAmJiAhZm9yY2UpIHtcclxuICAgICAgLy8gVmVyaWZpY2FyIHRyYW5zaWNpw7NuIHbDoWxpZGFcclxuICAgICAgaWYgKCFpc1ZhbGlkVHJhbnNpdGlvbihjdXJyZW50U3RhdHVzLnN0YXR1cywgdGFyZ2V0U3RhdHVzKSkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiBgVHJhbnNpY2nDs24gaW52w6FsaWRhOiAke2N1cnJlbnRTdGF0dXMuc3RhdHVzfSAtPiAke3RhcmdldFN0YXR1c31gLFxyXG4gICAgICAgICAgY3VycmVudF9zdGF0dXM6IGN1cnJlbnRTdGF0dXMuc3RhdHVzLFxyXG4gICAgICAgICAgdmFsaWRfbmV4dDogWydwZW5kaW5nJywgJ2Vhcmx5X2ZyZWV6aW5nJywgJ2Nsb3NpbmdfY2FsY3VsYXRvcnMnLCAnd2FpdGluZ19zdW1tYXJ5JywgJ2Nsb3Npbmdfc3VtbWFyeScsICdhcmNoaXZpbmcnLCAnY29tcGxldGVkJywgJ2ZhaWxlZCddXHJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGl6YXIgZXN0YWRvXHJcbiAgICBhd2FpdCB1cGRhdGVDbG9zdXJlU3RhdHVzKGN1cnJlbnREYXRlLCBwZXJpb2RUeXBlLCB0YXJnZXRTdGF0dXMgYXMgYW55LCB7XHJcbiAgICAgIG1hbnVhbF9jbG9zdXJlOiB0cnVlLFxyXG4gICAgICBleGVjdXRlZF9ieTogdXNlci5pZCxcclxuICAgICAgZXhlY3V0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgcHJldmlvdXNfc3RhdHVzOiBjdXJyZW50U3RhdHVzPy5zdGF0dXMgfHwgbnVsbFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYOKchSBbTUFOVUFMLUNMT1NFXSBFc3RhZG8gYWN0dWFsaXphZG8gbWFudWFsbWVudGU6ICR7Y3VycmVudFN0YXR1cz8uc3RhdHVzIHx8ICdub25lJ30gLT4gJHt0YXJnZXRTdGF0dXN9YCk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ0VzdGFkbyBhY3R1YWxpemFkbyBtYW51YWxtZW50ZScsXHJcbiAgICAgIHBlcmlvZF9kYXRlOiBjdXJyZW50RGF0ZSxcclxuICAgICAgcGVyaW9kX3R5cGU6IHBlcmlvZFR5cGUsXHJcbiAgICAgIHByZXZpb3VzX3N0YXR1czogY3VycmVudFN0YXR1cz8uc3RhdHVzIHx8IG51bGwsXHJcbiAgICAgIG5ld19zdGF0dXM6IHRhcmdldFN0YXR1cyxcclxuICAgICAgZXhlY3V0ZWRfYnk6IHVzZXIuaWRcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFtNQU5VQUwtQ0xPU0VdIEVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogJ0Vycm9yIGludGVybm8gZGVsIHNlcnZpZG9yJyxcclxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsImdldENvbG9tYmlhRGF0ZSIsImdldEN1cnJlbnRQZXJpb2RUeXBlIiwidXBkYXRlQ2xvc3VyZVN0YXR1cyIsImlzVmFsaWRUcmFuc2l0aW9uIiwic3VwYWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJQT1NUIiwicmVxdWVzdCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJ0b2tlbiIsInNwbGl0IiwiZGF0YSIsInVzZXIiLCJhdXRoRXJyb3IiLCJnZXRVc2VyIiwidXNlckRhdGEiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsInJvbGUiLCJib2R5IiwicGVyaW9kRGF0ZSIsInRhcmdldFN0YXR1cyIsImZvcmNlIiwiY3VycmVudERhdGUiLCJwZXJpb2RUeXBlIiwiY3VycmVudFN0YXR1cyIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJjdXJyZW50X3N0YXR1cyIsInZhbGlkX25leHQiLCJtYW51YWxfY2xvc3VyZSIsImV4ZWN1dGVkX2J5IiwiZXhlY3V0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmV2aW91c19zdGF0dXMiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZSIsInBlcmlvZF9kYXRlIiwicGVyaW9kX3R5cGUiLCJuZXdfc3RhdHVzIiwiZGV0YWlscyIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/calculator/period-closure/manual-close/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/calculator/period-closure-helpers.ts":
/*!**************************************************!*\
  !*** ./lib/calculator/period-closure-helpers.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   archiveModelValues: () => (/* binding */ archiveModelValues),\n/* harmony export */   freezePlatformsForModel: () => (/* binding */ freezePlatformsForModel),\n/* harmony export */   getFrozenPlatformsForModel: () => (/* binding */ getFrozenPlatformsForModel),\n/* harmony export */   isPlatformFrozen: () => (/* binding */ isPlatformFrozen),\n/* harmony export */   resetModelValues: () => (/* binding */ resetModelValues),\n/* harmony export */   updateClosureStatus: () => (/* binding */ updateClosureStatus)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\r\n * 🔧 HELPERS PARA CIERRE DE PERÍODOS\r\n * \r\n * Funciones auxiliares para el proceso de cierre\r\n */ \nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://mhernfrkvwigxdubiozm.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n/**\r\n * Crea o actualiza el estado de cierre de período\r\n */ const updateClosureStatus = async (periodDate, periodType, status, metadata)=>{\n    try {\n        // Verificar si existe registro\n        const { data: existing } = await supabase.from(\"calculator_period_closure_status\").select(\"id\").eq(\"period_date\", periodDate).single();\n        if (existing) {\n            // Actualizar\n            const { error } = await supabase.from(\"calculator_period_closure_status\").update({\n                status,\n                metadata: metadata || {},\n                updated_at: new Date().toISOString()\n            }).eq(\"id\", existing.id);\n            if (error) throw error;\n        } else {\n            // Crear nuevo\n            const { error } = await supabase.from(\"calculator_period_closure_status\").insert({\n                period_date: periodDate,\n                period_type: periodType,\n                status,\n                metadata: metadata || {}\n            });\n            if (error) throw error;\n        }\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error actualizando estado:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Error desconocido\"\n        };\n    }\n};\n/**\r\n * Marca plataformas como congeladas anticipadamente\r\n */ const freezePlatformsForModel = async (periodDate, modelId, platformIds)=>{\n    try {\n        const records = platformIds.map((platformId)=>({\n                period_date: periodDate,\n                model_id: modelId,\n                platform_id: platformId,\n                frozen_at: new Date().toISOString()\n            }));\n        // Usar upsert para evitar duplicados\n        const { error } = await supabase.from(\"calculator_early_frozen_platforms\").upsert(records, {\n            onConflict: \"period_date,model_id,platform_id\",\n            ignoreDuplicates: false\n        });\n        if (error) throw error;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error congelando plataformas:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Error desconocido\"\n        };\n    }\n};\n/**\r\n * Verifica si una plataforma está congelada para un modelo\r\n */ const isPlatformFrozen = async (periodDate, modelId, platformId)=>{\n    try {\n        const { data, error } = await supabase.from(\"calculator_early_frozen_platforms\").select(\"id\").eq(\"period_date\", periodDate).eq(\"model_id\", modelId).eq(\"platform_id\", platformId).single();\n        if (error && error.code !== \"PGRST116\") throw error;\n        return !!data;\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error verificando congelaci\\xf3n:\", error);\n        return false;\n    }\n};\n/**\r\n * Obtiene todas las plataformas congeladas para un modelo\r\n */ const getFrozenPlatformsForModel = async (periodDate, modelId)=>{\n    try {\n        const { data, error } = await supabase.from(\"calculator_early_frozen_platforms\").select(\"platform_id\").eq(\"period_date\", periodDate).eq(\"model_id\", modelId);\n        if (error) throw error;\n        return data?.map((r)=>r.platform_id) || [];\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error obteniendo plataformas congeladas:\", error);\n        return [];\n    }\n};\n/**\r\n * Archiva valores de un modelo para el período\r\n */ const archiveModelValues = async (modelId, periodDate, periodType)=>{\n    try {\n        // Obtener valores actuales\n        const { data: values, error: valuesError } = await supabase.from(\"model_values\").select(\"*\").eq(\"model_id\", modelId).eq(\"period_date\", periodDate);\n        if (valuesError) throw valuesError;\n        if (!values || values.length === 0) {\n            return {\n                success: true,\n                archived: 0\n            };\n        }\n        // Preparar datos históricos\n        const historicalData = values.map((value)=>({\n                model_id: value.model_id,\n                platform_id: value.platform_id,\n                value: value.value,\n                period_date: value.period_date,\n                period_type: periodType,\n                archived_at: new Date().toISOString(),\n                original_updated_at: value.updated_at\n            }));\n        // Insertar en historial\n        const { error: archiveError } = await supabase.from(\"calculator_history\").insert(historicalData);\n        if (archiveError) throw archiveError;\n        return {\n            success: true,\n            archived: values.length\n        };\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error archivando valores:\", error);\n        return {\n            success: false,\n            archived: 0,\n            error: error instanceof Error ? error.message : \"Error desconocido\"\n        };\n    }\n};\n/**\r\n * Resetea valores de un modelo (elimina del período actual)\r\n */ const resetModelValues = async (modelId, periodDate)=>{\n    try {\n        const { data, error } = await supabase.from(\"model_values\").delete().eq(\"model_id\", modelId).eq(\"period_date\", periodDate).select();\n        if (error) throw error;\n        return {\n            success: true,\n            deleted: data?.length || 0\n        };\n    } catch (error) {\n        console.error(\"❌ [CLOSURE-HELPERS] Error reseteando valores:\", error);\n        return {\n            success: false,\n            deleted: 0,\n            error: error instanceof Error ? error.message : \"Error desconocido\"\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FsY3VsYXRvci9wZXJpb2QtY2xvc3VyZS1oZWxwZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRW9EO0FBSXJELE1BQU1DLFdBQVdELG1FQUFZQSxDQUMzQkUsMENBQW9DLEVBQ3BDQSxRQUFRQyxHQUFHLENBQUNFLHlCQUF5QixFQUNyQztJQUNFQyxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO0lBQ2xCO0FBQ0Y7QUFHRjs7Q0FFQyxHQUNNLE1BQU1DLHNCQUFzQixPQUNqQ0MsWUFDQUMsWUFDQUMsUUFDQUM7SUFFQSxJQUFJO1FBQ0YsK0JBQStCO1FBQy9CLE1BQU0sRUFBRUMsTUFBTUMsUUFBUSxFQUFFLEdBQUcsTUFBTWQsU0FDOUJlLElBQUksQ0FBQyxvQ0FDTEMsTUFBTSxDQUFDLE1BQ1BDLEVBQUUsQ0FBQyxlQUFlUixZQUNsQlMsTUFBTTtRQUVULElBQUlKLFVBQVU7WUFDWixhQUFhO1lBQ2IsTUFBTSxFQUFFSyxLQUFLLEVBQUUsR0FBRyxNQUFNbkIsU0FDckJlLElBQUksQ0FBQyxvQ0FDTEssTUFBTSxDQUFDO2dCQUNOVDtnQkFDQUMsVUFBVUEsWUFBWSxDQUFDO2dCQUN2QlMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1lBQ3BDLEdBQ0NOLEVBQUUsQ0FBQyxNQUFNSCxTQUFTVSxFQUFFO1lBRXZCLElBQUlMLE9BQU8sTUFBTUE7UUFDbkIsT0FBTztZQUNMLGNBQWM7WUFDZCxNQUFNLEVBQUVBLEtBQUssRUFBRSxHQUFHLE1BQU1uQixTQUNyQmUsSUFBSSxDQUFDLG9DQUNMVSxNQUFNLENBQUM7Z0JBQ05DLGFBQWFqQjtnQkFDYmtCLGFBQWFqQjtnQkFDYkM7Z0JBQ0FDLFVBQVVBLFlBQVksQ0FBQztZQUN6QjtZQUVGLElBQUlPLE9BQU8sTUFBTUE7UUFDbkI7UUFFQSxPQUFPO1lBQUVTLFNBQVM7UUFBSztJQUN6QixFQUFFLE9BQU9ULE9BQU87UUFDZFUsUUFBUVYsS0FBSyxDQUFD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NUIsV0FBVztnQkFDOUJDLGFBQWFqQjtnQkFDYjZDLGFBQWEsSUFBSWpDLE9BQU9DLFdBQVc7Z0JBQ25DaUMscUJBQXFCRixNQUFNakMsVUFBVTtZQUN2QztRQUVBLHdCQUF3QjtRQUN4QixNQUFNLEVBQUVGLE9BQU9zQyxZQUFZLEVBQUUsR0FBRyxNQUFNekQsU0FDbkNlLElBQUksQ0FBQyxzQkFDTFUsTUFBTSxDQUFDNEI7UUFFVixJQUFJSSxjQUFjLE1BQU1BO1FBRXhCLE9BQU87WUFBRTdCLFNBQVM7WUFBTXdCLFVBQVVILE9BQU9FLE1BQU07UUFBQztJQUNsRCxFQUFFLE9BQU9oQyxPQUFPO1FBQ2RVLFFBQVFWLEtBQUssQ0FBQyxpREFBaURBO1FBQy9ELE9BQU87WUFDTFMsU0FBUztZQUNUd0IsVUFBVTtZQUNWakMsT0FBT0EsaUJBQWlCVyxRQUFRWCxNQUFNWSxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU0yQixtQkFBbUIsT0FDOUJ6QixTQUNBeEI7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFSSxJQUFJLEVBQUVNLEtBQUssRUFBRSxHQUFHLE1BQU1uQixTQUMzQmUsSUFBSSxDQUFDLGdCQUNMNEMsTUFBTSxHQUNOMUMsRUFBRSxDQUFDLFlBQVlnQixTQUNmaEIsRUFBRSxDQUFDLGVBQWVSLFlBQ2xCTyxNQUFNO1FBRVQsSUFBSUcsT0FBTyxNQUFNQTtRQUVqQixPQUFPO1lBQUVTLFNBQVM7WUFBTWdDLFNBQVMvQyxNQUFNc0MsVUFBVTtRQUFFO0lBQ3JELEVBQUUsT0FBT2hDLE9BQU87UUFDZFUsUUFBUVYsS0FBSyxDQUFDLGlEQUFpREE7UUFDL0QsT0FBTztZQUNMUyxTQUFTO1lBQ1RnQyxTQUFTO1lBQ1R6QyxPQUFPQSxpQkFBaUJXLFFBQVFYLE1BQU1ZLE9BQU8sR0FBRztRQUNsRDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Npc3RlbWEtZ2VzdGlvbi1haW0vLi9saWIvY2FsY3VsYXRvci9wZXJpb2QtY2xvc3VyZS1oZWxwZXJzLnRzPzU5ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIPCflKcgSEVMUEVSUyBQQVJBIENJRVJSRSBERSBQRVLDjU9ET1NcclxuICogXHJcbiAqIEZ1bmNpb25lcyBhdXhpbGlhcmVzIHBhcmEgZWwgcHJvY2VzbyBkZSBjaWVycmVcclxuICovXHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5pbXBvcnQgeyBDbG9zdXJlU3RhdHVzIH0gZnJvbSAnLi9wZXJpb2QtY2xvc3VyZS1zdGF0ZXMnO1xyXG5pbXBvcnQgeyBFQVJMWV9GUkVFWkVfUExBVEZPUk1TIH0gZnJvbSAnQC91dGlscy9wZXJpb2QtY2xvc3VyZS1kYXRlcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYXMgc3RyaW5nLFxyXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgYXMgc3RyaW5nLFxyXG4gIHtcclxuICAgIGF1dGg6IHtcclxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuKTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhIG8gYWN0dWFsaXphIGVsIGVzdGFkbyBkZSBjaWVycmUgZGUgcGVyw61vZG9cclxuICovXHJcbmV4cG9ydCBjb25zdCB1cGRhdGVDbG9zdXJlU3RhdHVzID0gYXN5bmMgKFxyXG4gIHBlcmlvZERhdGU6IHN0cmluZyxcclxuICBwZXJpb2RUeXBlOiAnMS0xNScgfCAnMTYtMzEnLFxyXG4gIHN0YXR1czogQ2xvc3VyZVN0YXR1cyxcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxuKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+ID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gVmVyaWZpY2FyIHNpIGV4aXN0ZSByZWdpc3Ryb1xyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NhbGN1bGF0b3JfcGVyaW9kX2Nsb3N1cmVfc3RhdHVzJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuZXEoJ3BlcmlvZF9kYXRlJywgcGVyaW9kRGF0ZSlcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChleGlzdGluZykge1xyXG4gICAgICAvLyBBY3R1YWxpemFyXHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2NhbGN1bGF0b3JfcGVyaW9kX2Nsb3N1cmVfc3RhdHVzJylcclxuICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgIHN0YXR1cyxcclxuICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCB7fSxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVxKCdpZCcsIGV4aXN0aW5nLmlkKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhciBudWV2b1xyXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdjYWxjdWxhdG9yX3BlcmlvZF9jbG9zdXJlX3N0YXR1cycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICBwZXJpb2RfZGF0ZTogcGVyaW9kRGF0ZSxcclxuICAgICAgICAgIHBlcmlvZF90eXBlOiBwZXJpb2RUeXBlLFxyXG4gICAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhIHx8IHt9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFtDTE9TVVJFLUhFTFBFUlNdIEVycm9yIGFjdHVhbGl6YW5kbyBlc3RhZG86JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbydcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1hcmNhIHBsYXRhZm9ybWFzIGNvbW8gY29uZ2VsYWRhcyBhbnRpY2lwYWRhbWVudGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBmcmVlemVQbGF0Zm9ybXNGb3JNb2RlbCA9IGFzeW5jIChcclxuICBwZXJpb2REYXRlOiBzdHJpbmcsXHJcbiAgbW9kZWxJZDogc3RyaW5nLFxyXG4gIHBsYXRmb3JtSWRzOiBzdHJpbmdbXVxyXG4pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4gPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZWNvcmRzID0gcGxhdGZvcm1JZHMubWFwKHBsYXRmb3JtSWQgPT4gKHtcclxuICAgICAgcGVyaW9kX2RhdGU6IHBlcmlvZERhdGUsXHJcbiAgICAgIG1vZGVsX2lkOiBtb2RlbElkLFxyXG4gICAgICBwbGF0Zm9ybV9pZDogcGxhdGZvcm1JZCxcclxuICAgICAgZnJvemVuX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pKTtcclxuXHJcbiAgICAvLyBVc2FyIHVwc2VydCBwYXJhIGV2aXRhciBkdXBsaWNhZG9zXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2FsY3VsYXRvcl9lYXJseV9mcm96ZW5fcGxhdGZvcm1zJylcclxuICAgICAgLnVwc2VydChyZWNvcmRzLCB7XHJcbiAgICAgICAgb25Db25mbGljdDogJ3BlcmlvZF9kYXRlLG1vZGVsX2lkLHBsYXRmb3JtX2lkJyxcclxuICAgICAgICBpZ25vcmVEdXBsaWNhdGVzOiBmYWxzZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIFtDTE9TVVJFLUhFTFBFUlNdIEVycm9yIGNvbmdlbGFuZG8gcGxhdGFmb3JtYXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbydcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZlcmlmaWNhIHNpIHVuYSBwbGF0YWZvcm1hIGVzdMOhIGNvbmdlbGFkYSBwYXJhIHVuIG1vZGVsb1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGlzUGxhdGZvcm1Gcm96ZW4gPSBhc3luYyAoXHJcbiAgcGVyaW9kRGF0ZTogc3RyaW5nLFxyXG4gIG1vZGVsSWQ6IHN0cmluZyxcclxuICBwbGF0Zm9ybUlkOiBzdHJpbmdcclxuKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjYWxjdWxhdG9yX2Vhcmx5X2Zyb3plbl9wbGF0Zm9ybXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgIC5lcSgncGVyaW9kX2RhdGUnLCBwZXJpb2REYXRlKVxyXG4gICAgICAuZXEoJ21vZGVsX2lkJywgbW9kZWxJZClcclxuICAgICAgLmVxKCdwbGF0Zm9ybV9pZCcsIHBsYXRmb3JtSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2JykgdGhyb3cgZXJyb3I7XHJcbiAgICBcclxuICAgIHJldHVybiAhIWRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbQ0xPU1VSRS1IRUxQRVJTXSBFcnJvciB2ZXJpZmljYW5kbyBjb25nZWxhY2nDs246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIHRvZGFzIGxhcyBwbGF0YWZvcm1hcyBjb25nZWxhZGFzIHBhcmEgdW4gbW9kZWxvXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0RnJvemVuUGxhdGZvcm1zRm9yTW9kZWwgPSBhc3luYyAoXHJcbiAgcGVyaW9kRGF0ZTogc3RyaW5nLFxyXG4gIG1vZGVsSWQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjYWxjdWxhdG9yX2Vhcmx5X2Zyb3plbl9wbGF0Zm9ybXMnKVxyXG4gICAgICAuc2VsZWN0KCdwbGF0Zm9ybV9pZCcpXHJcbiAgICAgIC5lcSgncGVyaW9kX2RhdGUnLCBwZXJpb2REYXRlKVxyXG4gICAgICAuZXEoJ21vZGVsX2lkJywgbW9kZWxJZCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuXHJcbiAgICByZXR1cm4gZGF0YT8ubWFwKHIgPT4gci5wbGF0Zm9ybV9pZCkgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbQ0xPU1VSRS1IRUxQRVJTXSBFcnJvciBvYnRlbmllbmRvIHBsYXRhZm9ybWFzIGNvbmdlbGFkYXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBBcmNoaXZhIHZhbG9yZXMgZGUgdW4gbW9kZWxvIHBhcmEgZWwgcGVyw61vZG9cclxuICovXHJcbmV4cG9ydCBjb25zdCBhcmNoaXZlTW9kZWxWYWx1ZXMgPSBhc3luYyAoXHJcbiAgbW9kZWxJZDogc3RyaW5nLFxyXG4gIHBlcmlvZERhdGU6IHN0cmluZyxcclxuICBwZXJpb2RUeXBlOiAnMS0xNScgfCAnMTYtMzEnXHJcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBhcmNoaXZlZDogbnVtYmVyOyBlcnJvcj86IHN0cmluZyB9PiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIE9idGVuZXIgdmFsb3JlcyBhY3R1YWxlc1xyXG4gICAgY29uc3QgeyBkYXRhOiB2YWx1ZXMsIGVycm9yOiB2YWx1ZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21vZGVsX3ZhbHVlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ21vZGVsX2lkJywgbW9kZWxJZClcclxuICAgICAgLmVxKCdwZXJpb2RfZGF0ZScsIHBlcmlvZERhdGUpO1xyXG5cclxuICAgIGlmICh2YWx1ZXNFcnJvcikgdGhyb3cgdmFsdWVzRXJyb3I7XHJcblxyXG4gICAgaWYgKCF2YWx1ZXMgfHwgdmFsdWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBhcmNoaXZlZDogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXBhcmFyIGRhdG9zIGhpc3TDs3JpY29zXHJcbiAgICBjb25zdCBoaXN0b3JpY2FsRGF0YSA9IHZhbHVlcy5tYXAodmFsdWUgPT4gKHtcclxuICAgICAgbW9kZWxfaWQ6IHZhbHVlLm1vZGVsX2lkLFxyXG4gICAgICBwbGF0Zm9ybV9pZDogdmFsdWUucGxhdGZvcm1faWQsXHJcbiAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcclxuICAgICAgcGVyaW9kX2RhdGU6IHZhbHVlLnBlcmlvZF9kYXRlLFxyXG4gICAgICBwZXJpb2RfdHlwZTogcGVyaW9kVHlwZSxcclxuICAgICAgYXJjaGl2ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgb3JpZ2luYWxfdXBkYXRlZF9hdDogdmFsdWUudXBkYXRlZF9hdFxyXG4gICAgfSkpO1xyXG5cclxuICAgIC8vIEluc2VydGFyIGVuIGhpc3RvcmlhbFxyXG4gICAgY29uc3QgeyBlcnJvcjogYXJjaGl2ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2FsY3VsYXRvcl9oaXN0b3J5JylcclxuICAgICAgLmluc2VydChoaXN0b3JpY2FsRGF0YSk7XHJcblxyXG4gICAgaWYgKGFyY2hpdmVFcnJvcikgdGhyb3cgYXJjaGl2ZUVycm9yO1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGFyY2hpdmVkOiB2YWx1ZXMubGVuZ3RoIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbQ0xPU1VSRS1IRUxQRVJTXSBFcnJvciBhcmNoaXZhbmRvIHZhbG9yZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGFyY2hpdmVkOiAwLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3IgZGVzY29ub2NpZG8nXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXNldGVhIHZhbG9yZXMgZGUgdW4gbW9kZWxvIChlbGltaW5hIGRlbCBwZXLDrW9kbyBhY3R1YWwpXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVzZXRNb2RlbFZhbHVlcyA9IGFzeW5jIChcclxuICBtb2RlbElkOiBzdHJpbmcsXHJcbiAgcGVyaW9kRGF0ZTogc3RyaW5nXHJcbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBkZWxldGVkOiBudW1iZXI7IGVycm9yPzogc3RyaW5nIH0+ID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21vZGVsX3ZhbHVlcycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ21vZGVsX2lkJywgbW9kZWxJZClcclxuICAgICAgLmVxKCdwZXJpb2RfZGF0ZScsIHBlcmlvZERhdGUpXHJcbiAgICAgIC5zZWxlY3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRlbGV0ZWQ6IGRhdGE/Lmxlbmd0aCB8fCAwIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbQ0xPU1VSRS1IRUxQRVJTXSBFcnJvciByZXNldGVhbmRvIHZhbG9yZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGRlbGV0ZWQ6IDAsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvciBkZXNjb25vY2lkbydcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwidXBkYXRlQ2xvc3VyZVN0YXR1cyIsInBlcmlvZERhdGUiLCJwZXJpb2RUeXBlIiwic3RhdHVzIiwibWV0YWRhdGEiLCJkYXRhIiwiZXhpc3RpbmciLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJlcnJvciIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpZCIsImluc2VydCIsInBlcmlvZF9kYXRlIiwicGVyaW9kX3R5cGUiLCJzdWNjZXNzIiwiY29uc29sZSIsIkVycm9yIiwibWVzc2FnZSIsImZyZWV6ZVBsYXRmb3Jtc0Zvck1vZGVsIiwibW9kZWxJZCIsInBsYXRmb3JtSWRzIiwicmVjb3JkcyIsIm1hcCIsInBsYXRmb3JtSWQiLCJtb2RlbF9pZCIsInBsYXRmb3JtX2lkIiwiZnJvemVuX2F0IiwidXBzZXJ0Iiwib25Db25mbGljdCIsImlnbm9yZUR1cGxpY2F0ZXMiLCJpc1BsYXRmb3JtRnJvemVuIiwiY29kZSIsImdldEZyb3plblBsYXRmb3Jtc0Zvck1vZGVsIiwiciIsImFyY2hpdmVNb2RlbFZhbHVlcyIsInZhbHVlcyIsInZhbHVlc0Vycm9yIiwibGVuZ3RoIiwiYXJjaGl2ZWQiLCJoaXN0b3JpY2FsRGF0YSIsInZhbHVlIiwiYXJjaGl2ZWRfYXQiLCJvcmlnaW5hbF91cGRhdGVkX2F0IiwiYXJjaGl2ZUVycm9yIiwicmVzZXRNb2RlbFZhbHVlcyIsImRlbGV0ZSIsImRlbGV0ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/calculator/period-closure-helpers.ts\n");

/***/ }),

/***/ "(rsc)/./lib/calculator/period-closure-states.ts":
/*!*************************************************!*\
  !*** ./lib/calculator/period-closure-states.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STATUS_DESCRIPTIONS: () => (/* binding */ STATUS_DESCRIPTIONS),\n/* harmony export */   VALID_TRANSITIONS: () => (/* binding */ VALID_TRANSITIONS),\n/* harmony export */   getNextValidStates: () => (/* binding */ getNextValidStates),\n/* harmony export */   isValidTransition: () => (/* binding */ isValidTransition)\n/* harmony export */ });\n/**\r\n * 🔄 ESTADOS Y TRANSICIONES DEL CIERRE DE PERÍODOS\r\n * \r\n * Define los estados válidos del proceso de cierre y sus transiciones permitidas\r\n */ const VALID_TRANSITIONS = {\n    pending: [\n        \"early_freezing\",\n        \"closing_calculators\",\n        \"failed\"\n    ],\n    early_freezing: [\n        \"closing_calculators\",\n        \"failed\"\n    ],\n    closing_calculators: [\n        \"waiting_summary\",\n        \"failed\"\n    ],\n    waiting_summary: [\n        \"closing_summary\",\n        \"failed\"\n    ],\n    closing_summary: [\n        \"archiving\",\n        \"failed\"\n    ],\n    archiving: [\n        \"completed\",\n        \"failed\"\n    ],\n    completed: [],\n    failed: [\n        \"pending\"\n    ] // Solo para retry manual\n};\n/**\r\n * Verifica si una transición de estado es válida\r\n */ const isValidTransition = (from, to)=>{\n    return VALID_TRANSITIONS[from]?.includes(to) || false;\n};\n/**\r\n * Obtiene la siguiente transición válida desde un estado\r\n */ const getNextValidStates = (currentStatus)=>{\n    return VALID_TRANSITIONS[currentStatus] || [];\n};\n/**\r\n * Descripción de cada estado para UI/logs\r\n */ const STATUS_DESCRIPTIONS = {\n    pending: \"Prepar\\xe1ndose para cerrar\",\n    early_freezing: \"Congelando plataformas especiales\",\n    closing_calculators: \"Cerrando calculadoras\",\n    waiting_summary: \"Esperando \\xfaltima actualizaci\\xf3n del resumen\",\n    closing_summary: \"Cerrando resumen de facturaci\\xf3n\",\n    archiving: \"Archivando per\\xedodo\",\n    completed: \"Cierre completado\",\n    failed: \"Error en el cierre\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FsY3VsYXRvci9wZXJpb2QtY2xvc3VyZS1zdGF0ZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0NBSUMsR0FZTSxNQUFNQSxvQkFBNEQ7SUFDdkVDLFNBQVM7UUFBQztRQUFrQjtRQUF1QjtLQUFTO0lBQzVEQyxnQkFBZ0I7UUFBQztRQUF1QjtLQUFTO0lBQ2pEQyxxQkFBcUI7UUFBQztRQUFtQjtLQUFTO0lBQ2xEQyxpQkFBaUI7UUFBQztRQUFtQjtLQUFTO0lBQzlDQyxpQkFBaUI7UUFBQztRQUFhO0tBQVM7SUFDeENDLFdBQVc7UUFBQztRQUFhO0tBQVM7SUFDbENDLFdBQVcsRUFBRTtJQUNiQyxRQUFRO1FBQUM7S0FBVSxDQUFDLHlCQUF5QjtBQUMvQyxFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNQyxvQkFBb0IsQ0FDL0JDLE1BQ0FDO0lBRUEsT0FBT1gsaUJBQWlCLENBQUNVLEtBQUssRUFBRUUsU0FBU0QsT0FBTztBQUNsRCxFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNRSxxQkFBcUIsQ0FBQ0M7SUFDakMsT0FBT2QsaUJBQWlCLENBQUNjLGNBQWMsSUFBSSxFQUFFO0FBQy9DLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1DLHNCQUFxRDtJQUNoRWQsU0FBUztJQUNUQyxnQkFBZ0I7SUFDaEJDLHFCQUFxQjtJQUNyQkMsaUJBQWlCO0lBQ2pCQyxpQkFBaUI7SUFDakJDLFdBQVc7SUFDWEMsV0FBVztJQUNYQyxRQUFRO0FBQ1YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Npc3RlbWEtZ2VzdGlvbi1haW0vLi9saWIvY2FsY3VsYXRvci9wZXJpb2QtY2xvc3VyZS1zdGF0ZXMudHM/NmUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog8J+UhCBFU1RBRE9TIFkgVFJBTlNJQ0lPTkVTIERFTCBDSUVSUkUgREUgUEVSw41PRE9TXHJcbiAqIFxyXG4gKiBEZWZpbmUgbG9zIGVzdGFkb3MgdsOhbGlkb3MgZGVsIHByb2Nlc28gZGUgY2llcnJlIHkgc3VzIHRyYW5zaWNpb25lcyBwZXJtaXRpZGFzXHJcbiAqL1xyXG5cclxuZXhwb3J0IHR5cGUgQ2xvc3VyZVN0YXR1cyA9IFxyXG4gIHwgJ3BlbmRpbmcnXHJcbiAgfCAnZWFybHlfZnJlZXppbmcnXHJcbiAgfCAnY2xvc2luZ19jYWxjdWxhdG9ycydcclxuICB8ICd3YWl0aW5nX3N1bW1hcnknXHJcbiAgfCAnY2xvc2luZ19zdW1tYXJ5J1xyXG4gIHwgJ2FyY2hpdmluZydcclxuICB8ICdjb21wbGV0ZWQnXHJcbiAgfCAnZmFpbGVkJztcclxuXHJcbmV4cG9ydCBjb25zdCBWQUxJRF9UUkFOU0lUSU9OUzogUmVjb3JkPENsb3N1cmVTdGF0dXMsIENsb3N1cmVTdGF0dXNbXT4gPSB7XHJcbiAgcGVuZGluZzogWydlYXJseV9mcmVlemluZycsICdjbG9zaW5nX2NhbGN1bGF0b3JzJywgJ2ZhaWxlZCddLFxyXG4gIGVhcmx5X2ZyZWV6aW5nOiBbJ2Nsb3NpbmdfY2FsY3VsYXRvcnMnLCAnZmFpbGVkJ10sXHJcbiAgY2xvc2luZ19jYWxjdWxhdG9yczogWyd3YWl0aW5nX3N1bW1hcnknLCAnZmFpbGVkJ10sXHJcbiAgd2FpdGluZ19zdW1tYXJ5OiBbJ2Nsb3Npbmdfc3VtbWFyeScsICdmYWlsZWQnXSxcclxuICBjbG9zaW5nX3N1bW1hcnk6IFsnYXJjaGl2aW5nJywgJ2ZhaWxlZCddLFxyXG4gIGFyY2hpdmluZzogWydjb21wbGV0ZWQnLCAnZmFpbGVkJ10sXHJcbiAgY29tcGxldGVkOiBbXSxcclxuICBmYWlsZWQ6IFsncGVuZGluZyddIC8vIFNvbG8gcGFyYSByZXRyeSBtYW51YWxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZmljYSBzaSB1bmEgdHJhbnNpY2nDs24gZGUgZXN0YWRvIGVzIHbDoWxpZGFcclxuICovXHJcbmV4cG9ydCBjb25zdCBpc1ZhbGlkVHJhbnNpdGlvbiA9IChcclxuICBmcm9tOiBDbG9zdXJlU3RhdHVzLFxyXG4gIHRvOiBDbG9zdXJlU3RhdHVzXHJcbik6IGJvb2xlYW4gPT4ge1xyXG4gIHJldHVybiBWQUxJRF9UUkFOU0lUSU9OU1tmcm9tXT8uaW5jbHVkZXModG8pIHx8IGZhbHNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9idGllbmUgbGEgc2lndWllbnRlIHRyYW5zaWNpw7NuIHbDoWxpZGEgZGVzZGUgdW4gZXN0YWRvXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0TmV4dFZhbGlkU3RhdGVzID0gKGN1cnJlbnRTdGF0dXM6IENsb3N1cmVTdGF0dXMpOiBDbG9zdXJlU3RhdHVzW10gPT4ge1xyXG4gIHJldHVybiBWQUxJRF9UUkFOU0lUSU9OU1tjdXJyZW50U3RhdHVzXSB8fCBbXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXNjcmlwY2nDs24gZGUgY2FkYSBlc3RhZG8gcGFyYSBVSS9sb2dzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgU1RBVFVTX0RFU0NSSVBUSU9OUzogUmVjb3JkPENsb3N1cmVTdGF0dXMsIHN0cmluZz4gPSB7XHJcbiAgcGVuZGluZzogJ1ByZXBhcsOhbmRvc2UgcGFyYSBjZXJyYXInLFxyXG4gIGVhcmx5X2ZyZWV6aW5nOiAnQ29uZ2VsYW5kbyBwbGF0YWZvcm1hcyBlc3BlY2lhbGVzJyxcclxuICBjbG9zaW5nX2NhbGN1bGF0b3JzOiAnQ2VycmFuZG8gY2FsY3VsYWRvcmFzJyxcclxuICB3YWl0aW5nX3N1bW1hcnk6ICdFc3BlcmFuZG8gw7psdGltYSBhY3R1YWxpemFjacOzbiBkZWwgcmVzdW1lbicsXHJcbiAgY2xvc2luZ19zdW1tYXJ5OiAnQ2VycmFuZG8gcmVzdW1lbiBkZSBmYWN0dXJhY2nDs24nLFxyXG4gIGFyY2hpdmluZzogJ0FyY2hpdmFuZG8gcGVyw61vZG8nLFxyXG4gIGNvbXBsZXRlZDogJ0NpZXJyZSBjb21wbGV0YWRvJyxcclxuICBmYWlsZWQ6ICdFcnJvciBlbiBlbCBjaWVycmUnXHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiVkFMSURfVFJBTlNJVElPTlMiLCJwZW5kaW5nIiwiZWFybHlfZnJlZXppbmciLCJjbG9zaW5nX2NhbGN1bGF0b3JzIiwid2FpdGluZ19zdW1tYXJ5IiwiY2xvc2luZ19zdW1tYXJ5IiwiYXJjaGl2aW5nIiwiY29tcGxldGVkIiwiZmFpbGVkIiwiaXNWYWxpZFRyYW5zaXRpb24iLCJmcm9tIiwidG8iLCJpbmNsdWRlcyIsImdldE5leHRWYWxpZFN0YXRlcyIsImN1cnJlbnRTdGF0dXMiLCJTVEFUVVNfREVTQ1JJUFRJT05TIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/calculator/period-closure-states.ts\n");

/***/ }),

/***/ "(rsc)/./utils/period-closure-dates.ts":
/*!***************************************!*\
  !*** ./utils/period-closure-dates.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EARLY_FREEZE_PLATFORMS: () => (/* binding */ EARLY_FREEZE_PLATFORMS),\n/* harmony export */   getColombiaDate: () => (/* binding */ getColombiaDate),\n/* harmony export */   getColombiaDateTime: () => (/* binding */ getColombiaDateTime),\n/* harmony export */   getColombiaMidnight: () => (/* binding */ getColombiaMidnight),\n/* harmony export */   getCurrentPeriodType: () => (/* binding */ getCurrentPeriodType),\n/* harmony export */   getEuropeanCentralMidnightInColombia: () => (/* binding */ getEuropeanCentralMidnightInColombia),\n/* harmony export */   isClosureDay: () => (/* binding */ isClosureDay),\n/* harmony export */   isEarlyFreezePlatform: () => (/* binding */ isEarlyFreezePlatform),\n/* harmony export */   isEarlyFreezeTime: () => (/* binding */ isEarlyFreezeTime),\n/* harmony export */   isFullClosureTime: () => (/* binding */ isFullClosureTime)\n/* harmony export */ });\n/**\r\n * 🕐 UTILIDADES DE FECHAS PARA CIERRE DE PERÍODOS\r\n * \r\n * Calcula medianoche Europa Central en hora Colombia y gestiona\r\n * los momentos de congelación y cierre de períodos.\r\n * \r\n * IMPORTANTE: Todo se calcula en timezone Colombia (America/Bogota)\r\n */ /**\r\n * Obtiene la fecha actual en formato YYYY-MM-DD usando Colombia\r\n */ const getColombiaDate = ()=>{\n    return new Date().toLocaleDateString(\"en-CA\", {\n        timeZone: \"America/Bogota\"\n    });\n};\n/**\r\n * Obtiene la fecha y hora actual en formato ISO usando Colombia\r\n */ const getColombiaDateTime = ()=>{\n    return new Date().toLocaleString(\"sv-SE\", {\n        timeZone: \"America/Bogota\"\n    });\n};\n/**\r\n * Calcula la medianoche de Europa Central (Europe/Berlin) en hora Colombia\r\n * @param date - Fecha de referencia (opcional, usa fecha actual si no se proporciona)\r\n * @returns Objeto con fecha/hora en Colombia y timestamp\r\n */ const getEuropeanCentralMidnightInColombia = (date)=>{\n    const now = date || new Date();\n    // Obtener fecha de hoy en Europa Central\n    const europeDateFormatter = new Intl.DateTimeFormat(\"en-CA\", {\n        timeZone: \"Europe/Berlin\",\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\"\n    });\n    const europeDateStr = europeDateFormatter.format(now); // YYYY-MM-DD\n    // Crear Date object que representa medianoche en Europa Central\n    // Necesitamos crear un string ISO que JavaScript interprete correctamente\n    // Usamos el formato: YYYY-MM-DDTHH:mm:ss+offset\n    // Pero primero necesitamos saber qué hora es medianoche Europa Central en UTC\n    // Método más simple: crear Date con string ISO usando timezone\n    // JavaScript Date no soporta timezone en constructor, así que usamos otro enfoque\n    // Calcular qué hora UTC corresponde a medianoche en Europa Central\n    // Para esto, creamos una fecha \"test\" en medianoche Europa Central\n    const testFormatter = new Intl.DateTimeFormat(\"en-US\", {\n        timeZone: \"Europe/Berlin\",\n        year: \"numeric\",\n        month: \"2-digit\",\n        day: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        hour12: false\n    });\n    // Obtener hora actual en Europa Central\n    const parts = testFormatter.formatToParts(now);\n    const europeParts = {};\n    parts.forEach((part)=>{\n        if (part.type !== \"literal\") {\n            europeParts[part.type] = part.value;\n        }\n    });\n    // Crear fecha ISO string para medianoche Europa Central\n    const europeMidnightISO = `${europeParts.year}-${europeParts.month}-${europeParts.day}T00:00:00`;\n    // Ahora necesitamos convertir esto a hora Colombia\n    // Para esto, usamos el hecho de que JavaScript Date trabaja en UTC\n    // Pero podemos usar una fecha \"falsa\" y luego calcular la diferencia\n    // Método más directo: usar la API de tiempo para obtener offset\n    // Crear un Date para medianoche en Europa Central\n    const europeYear = parseInt(europeParts.year);\n    const europeMonth = parseInt(europeParts.month) - 1; // 0-based\n    const europeDay = parseInt(europeParts.day);\n    // Crear Date en UTC que represente medianoche en Europa Central\n    // Necesitamos saber el offset de Europa Central en ese momento\n    const testDateUTC = new Date(Date.UTC(europeYear, europeMonth, europeDay, 0, 0, 0));\n    // Calcular offset de Europa Central en ese momento\n    const europeOffset = getEuropeCentralOffset(testDateUTC); // Horas desde UTC\n    const europeMidnightUTC = new Date(Date.UTC(europeYear, europeMonth, europeDay, -europeOffset, 0, 0));\n    // Colombia es UTC-5, así que restamos 5 horas\n    const colombiaMidnight = new Date(europeMidnightUTC.getTime() - 5 * 3600000);\n    // Formatear resultado\n    const colombiaDate = colombiaMidnight.toLocaleDateString(\"en-CA\", {\n        timeZone: \"America/Bogota\"\n    });\n    const colombiaTime = colombiaMidnight.toLocaleTimeString(\"en-US\", {\n        timeZone: \"America/Bogota\",\n        hour12: false,\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\"\n    });\n    return {\n        colombiaTime: colombiaTime || \"00:00:00\",\n        colombiaDate,\n        colombiaDateTime: colombiaMidnight,\n        europeDate: europeDateStr\n    };\n};\n/**\r\n * Obtiene el offset de Europa Central en horas (considera DST)\r\n * @param date - Fecha de referencia\r\n * @returns Offset en horas (1 para invierno, 2 para verano)\r\n */ function getEuropeCentralOffset(date) {\n    // Obtener la hora UTC y la hora en Europa Central para la misma fecha\n    const utcHour = date.getUTCHours();\n    // Crear formatter para Europa Central\n    const formatter = new Intl.DateTimeFormat(\"en-US\", {\n        timeZone: \"Europe/Berlin\",\n        hour: \"2-digit\",\n        hour12: false\n    });\n    const europeHour = parseInt(formatter.format(date));\n    // Calcular diferencia (considerando que puede cruzar medianoche)\n    let offset = europeHour - utcHour;\n    if (offset > 12) offset -= 24;\n    if (offset < -12) offset += 24;\n    return offset;\n}\n/**\r\n * Obtiene medianoche Colombia (00:00:00)\r\n * @param date - Fecha de referencia (opcional)\r\n * @returns Fecha/hora de medianoche en Colombia\r\n */ const getColombiaMidnight = (date)=>{\n    const now = date || new Date();\n    const colombiaDate = getColombiaDate();\n    const midnight = new Date(`${colombiaDate}T00:00:00`);\n    return {\n        date: colombiaDate,\n        datetime: midnight,\n        time: \"00:00:00\"\n    };\n};\n/**\r\n * Verifica si es momento de congelar plataformas especiales\r\n * (medianoche Europa Central)\r\n * @returns true si es momento de congelación anticipada\r\n */ const isEarlyFreezeTime = ()=>{\n    const now = new Date();\n    const colombiaTime = getColombiaDateTime();\n    const europeMidnight = getEuropeanCentralMidnightInColombia(now);\n    // Comparar hora actual Colombia con hora de medianoche Europa Central en Colombia\n    const [currentHour, currentMinute] = colombiaTime.split(\" \")[1]?.split(\":\") || [\n        \"00\",\n        \"00\"\n    ];\n    const [targetHour, targetMinute] = europeMidnight.colombiaTime.split(\":\");\n    const currentTime = parseInt(currentHour) * 60 + parseInt(currentMinute);\n    const targetTime = parseInt(targetHour) * 60 + parseInt(targetMinute);\n    // Tolerancia de ±5 minutos\n    const tolerance = 5;\n    return Math.abs(currentTime - targetTime) <= tolerance;\n};\n/**\r\n * Verifica si es momento de cierre completo (00:00 Colombia)\r\n * @returns true si es medianoche en Colombia\r\n */ const isFullClosureTime = ()=>{\n    const now = new Date();\n    const colombiaTime = getColombiaDateTime();\n    const [hour, minute, second] = colombiaTime.split(\" \")[1]?.split(\":\") || [\n        \"00\",\n        \"00\",\n        \"00\"\n    ];\n    // Verificar si es medianoche (00:00:00) con tolerancia de ±1 minuto\n    const isMidnight = parseInt(hour) === 0 && parseInt(minute) <= 1;\n    return isMidnight;\n};\n/**\r\n * Lista de 10 plataformas especiales que se congelan a medianoche Europa Central\r\n */ const EARLY_FREEZE_PLATFORMS = [\n    \"superfoon\",\n    \"livecreator\",\n    \"mdh\",\n    \"777\",\n    \"xmodels\",\n    \"big7\",\n    \"mondo\",\n    \"vx\",\n    \"babestation\",\n    \"dirtyfans\"\n];\n/**\r\n * Verifica si una plataforma es especial (se congela anticipadamente)\r\n * @param platformId - ID de la plataforma\r\n * @returns true si es plataforma especial\r\n */ const isEarlyFreezePlatform = (platformId)=>{\n    return EARLY_FREEZE_PLATFORMS.includes(platformId.toLowerCase());\n};\n/**\r\n * Obtiene el período actual basado en el día\r\n * @returns Período: '1-15' o '16-31'\r\n */ const getCurrentPeriodType = ()=>{\n    const colombiaDate = getColombiaDate();\n    const day = parseInt(colombiaDate.split(\"-\")[2]);\n    return day >= 1 && day <= 15 ? \"1-15\" : \"16-31\";\n};\n/**\r\n * Verifica si es día de cierre (día 1 o 16)\r\n * @returns true si es día de cierre\r\n */ const isClosureDay = ()=>{\n    const colombiaDate = getColombiaDate();\n    const day = parseInt(colombiaDate.split(\"-\")[2]);\n    return day === 1 || day === 16;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aXN0ZW1hLWdlc3Rpb24tYWltLy4vdXRpbHMvcGVyaW9kLWNsb3N1cmUtZGF0ZXMudHM/NjU5NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog8J+VkCBVVElMSURBREVTIERFIEZFQ0hBUyBQQVJBIENJRVJSRSBERSBQRVLDjU9ET1NcclxuICogXHJcbiAqIENhbGN1bGEgbWVkaWFub2NoZSBFdXJvcGEgQ2VudHJhbCBlbiBob3JhIENvbG9tYmlhIHkgZ2VzdGlvbmFcclxuICogbG9zIG1vbWVudG9zIGRlIGNvbmdlbGFjacOzbiB5IGNpZXJyZSBkZSBwZXLDrW9kb3MuXHJcbiAqIFxyXG4gKiBJTVBPUlRBTlRFOiBUb2RvIHNlIGNhbGN1bGEgZW4gdGltZXpvbmUgQ29sb21iaWEgKEFtZXJpY2EvQm9nb3RhKVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGxhIGZlY2hhIGFjdHVhbCBlbiBmb3JtYXRvIFlZWVktTU0tREQgdXNhbmRvIENvbG9tYmlhXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0Q29sb21iaWFEYXRlID0gKCk6IHN0cmluZyA9PiB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1DQScsIHsgXHJcbiAgICB0aW1lWm9uZTogJ0FtZXJpY2EvQm9nb3RhJyBcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWwgZW4gZm9ybWF0byBJU08gdXNhbmRvIENvbG9tYmlhXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0Q29sb21iaWFEYXRlVGltZSA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdzdi1TRScsIHsgXHJcbiAgICB0aW1lWm9uZTogJ0FtZXJpY2EvQm9nb3RhJyBcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhIGxhIG1lZGlhbm9jaGUgZGUgRXVyb3BhIENlbnRyYWwgKEV1cm9wZS9CZXJsaW4pIGVuIGhvcmEgQ29sb21iaWFcclxuICogQHBhcmFtIGRhdGUgLSBGZWNoYSBkZSByZWZlcmVuY2lhIChvcGNpb25hbCwgdXNhIGZlY2hhIGFjdHVhbCBzaSBubyBzZSBwcm9wb3JjaW9uYSlcclxuICogQHJldHVybnMgT2JqZXRvIGNvbiBmZWNoYS9ob3JhIGVuIENvbG9tYmlhIHkgdGltZXN0YW1wXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0RXVyb3BlYW5DZW50cmFsTWlkbmlnaHRJbkNvbG9tYmlhID0gKGRhdGU/OiBEYXRlKToge1xyXG4gIGNvbG9tYmlhVGltZTogc3RyaW5nOyAvLyBISDpNTTpTU1xyXG4gIGNvbG9tYmlhRGF0ZTogc3RyaW5nOyAvLyBZWVlZLU1NLUREXHJcbiAgY29sb21iaWFEYXRlVGltZTogRGF0ZTtcclxuICBldXJvcGVEYXRlOiBzdHJpbmc7IC8vIFlZWVktTU0tREQgZW4gRXVyb3BhIENlbnRyYWxcclxufSA9PiB7XHJcbiAgY29uc3Qgbm93ID0gZGF0ZSB8fCBuZXcgRGF0ZSgpO1xyXG4gIFxyXG4gIC8vIE9idGVuZXIgZmVjaGEgZGUgaG95IGVuIEV1cm9wYSBDZW50cmFsXHJcbiAgY29uc3QgZXVyb3BlRGF0ZUZvcm1hdHRlciA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1DQScsIHtcclxuICAgIHRpbWVab25lOiAnRXVyb3BlL0JlcmxpbicsXHJcbiAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICBtb250aDogJzItZGlnaXQnLFxyXG4gICAgZGF5OiAnMi1kaWdpdCdcclxuICB9KTtcclxuICBcclxuICBjb25zdCBldXJvcGVEYXRlU3RyID0gZXVyb3BlRGF0ZUZvcm1hdHRlci5mb3JtYXQobm93KTsgLy8gWVlZWS1NTS1ERFxyXG4gIFxyXG4gIC8vIENyZWFyIERhdGUgb2JqZWN0IHF1ZSByZXByZXNlbnRhIG1lZGlhbm9jaGUgZW4gRXVyb3BhIENlbnRyYWxcclxuICAvLyBOZWNlc2l0YW1vcyBjcmVhciB1biBzdHJpbmcgSVNPIHF1ZSBKYXZhU2NyaXB0IGludGVycHJldGUgY29ycmVjdGFtZW50ZVxyXG4gIC8vIFVzYW1vcyBlbCBmb3JtYXRvOiBZWVlZLU1NLUREVEhIOm1tOnNzK29mZnNldFxyXG4gIC8vIFBlcm8gcHJpbWVybyBuZWNlc2l0YW1vcyBzYWJlciBxdcOpIGhvcmEgZXMgbWVkaWFub2NoZSBFdXJvcGEgQ2VudHJhbCBlbiBVVENcclxuICBcclxuICAvLyBNw6l0b2RvIG3DoXMgc2ltcGxlOiBjcmVhciBEYXRlIGNvbiBzdHJpbmcgSVNPIHVzYW5kbyB0aW1lem9uZVxyXG4gIC8vIEphdmFTY3JpcHQgRGF0ZSBubyBzb3BvcnRhIHRpbWV6b25lIGVuIGNvbnN0cnVjdG9yLCBhc8OtIHF1ZSB1c2Ftb3Mgb3RybyBlbmZvcXVlXHJcbiAgXHJcbiAgLy8gQ2FsY3VsYXIgcXXDqSBob3JhIFVUQyBjb3JyZXNwb25kZSBhIG1lZGlhbm9jaGUgZW4gRXVyb3BhIENlbnRyYWxcclxuICAvLyBQYXJhIGVzdG8sIGNyZWFtb3MgdW5hIGZlY2hhIFwidGVzdFwiIGVuIG1lZGlhbm9jaGUgRXVyb3BhIENlbnRyYWxcclxuICBjb25zdCB0ZXN0Rm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywge1xyXG4gICAgdGltZVpvbmU6ICdFdXJvcGUvQmVybGluJyxcclxuICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgIG1vbnRoOiAnMi1kaWdpdCcsXHJcbiAgICBkYXk6ICcyLWRpZ2l0JyxcclxuICAgIGhvdXI6ICcyLWRpZ2l0JyxcclxuICAgIG1pbnV0ZTogJzItZGlnaXQnLFxyXG4gICAgc2Vjb25kOiAnMi1kaWdpdCcsXHJcbiAgICBob3VyMTI6IGZhbHNlXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gT2J0ZW5lciBob3JhIGFjdHVhbCBlbiBFdXJvcGEgQ2VudHJhbFxyXG4gIGNvbnN0IHBhcnRzID0gdGVzdEZvcm1hdHRlci5mb3JtYXRUb1BhcnRzKG5vdyk7XHJcbiAgY29uc3QgZXVyb3BlUGFydHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICBwYXJ0cy5mb3JFYWNoKHBhcnQgPT4ge1xyXG4gICAgaWYgKHBhcnQudHlwZSAhPT0gJ2xpdGVyYWwnKSB7XHJcbiAgICAgIGV1cm9wZVBhcnRzW3BhcnQudHlwZV0gPSBwYXJ0LnZhbHVlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIENyZWFyIGZlY2hhIElTTyBzdHJpbmcgcGFyYSBtZWRpYW5vY2hlIEV1cm9wYSBDZW50cmFsXHJcbiAgY29uc3QgZXVyb3BlTWlkbmlnaHRJU08gPSBgJHtldXJvcGVQYXJ0cy55ZWFyfS0ke2V1cm9wZVBhcnRzLm1vbnRofS0ke2V1cm9wZVBhcnRzLmRheX1UMDA6MDA6MDBgO1xyXG4gIFxyXG4gIC8vIEFob3JhIG5lY2VzaXRhbW9zIGNvbnZlcnRpciBlc3RvIGEgaG9yYSBDb2xvbWJpYVxyXG4gIC8vIFBhcmEgZXN0bywgdXNhbW9zIGVsIGhlY2hvIGRlIHF1ZSBKYXZhU2NyaXB0IERhdGUgdHJhYmFqYSBlbiBVVENcclxuICAvLyBQZXJvIHBvZGVtb3MgdXNhciB1bmEgZmVjaGEgXCJmYWxzYVwiIHkgbHVlZ28gY2FsY3VsYXIgbGEgZGlmZXJlbmNpYVxyXG4gIFxyXG4gIC8vIE3DqXRvZG8gbcOhcyBkaXJlY3RvOiB1c2FyIGxhIEFQSSBkZSB0aWVtcG8gcGFyYSBvYnRlbmVyIG9mZnNldFxyXG4gIC8vIENyZWFyIHVuIERhdGUgcGFyYSBtZWRpYW5vY2hlIGVuIEV1cm9wYSBDZW50cmFsXHJcbiAgY29uc3QgZXVyb3BlWWVhciA9IHBhcnNlSW50KGV1cm9wZVBhcnRzLnllYXIpO1xyXG4gIGNvbnN0IGV1cm9wZU1vbnRoID0gcGFyc2VJbnQoZXVyb3BlUGFydHMubW9udGgpIC0gMTsgLy8gMC1iYXNlZFxyXG4gIGNvbnN0IGV1cm9wZURheSA9IHBhcnNlSW50KGV1cm9wZVBhcnRzLmRheSk7XHJcbiAgXHJcbiAgLy8gQ3JlYXIgRGF0ZSBlbiBVVEMgcXVlIHJlcHJlc2VudGUgbWVkaWFub2NoZSBlbiBFdXJvcGEgQ2VudHJhbFxyXG4gIC8vIE5lY2VzaXRhbW9zIHNhYmVyIGVsIG9mZnNldCBkZSBFdXJvcGEgQ2VudHJhbCBlbiBlc2UgbW9tZW50b1xyXG4gIGNvbnN0IHRlc3REYXRlVVRDID0gbmV3IERhdGUoRGF0ZS5VVEMoZXVyb3BlWWVhciwgZXVyb3BlTW9udGgsIGV1cm9wZURheSwgMCwgMCwgMCkpO1xyXG4gIFxyXG4gIC8vIENhbGN1bGFyIG9mZnNldCBkZSBFdXJvcGEgQ2VudHJhbCBlbiBlc2UgbW9tZW50b1xyXG4gIGNvbnN0IGV1cm9wZU9mZnNldCA9IGdldEV1cm9wZUNlbnRyYWxPZmZzZXQodGVzdERhdGVVVEMpOyAvLyBIb3JhcyBkZXNkZSBVVENcclxuICBjb25zdCBldXJvcGVNaWRuaWdodFVUQyA9IG5ldyBEYXRlKERhdGUuVVRDKGV1cm9wZVllYXIsIGV1cm9wZU1vbnRoLCBldXJvcGVEYXksIC1ldXJvcGVPZmZzZXQsIDAsIDApKTtcclxuICBcclxuICAvLyBDb2xvbWJpYSBlcyBVVEMtNSwgYXPDrSBxdWUgcmVzdGFtb3MgNSBob3Jhc1xyXG4gIGNvbnN0IGNvbG9tYmlhTWlkbmlnaHQgPSBuZXcgRGF0ZShldXJvcGVNaWRuaWdodFVUQy5nZXRUaW1lKCkgLSAoNSAqIDM2MDAwMDApKTtcclxuICBcclxuICAvLyBGb3JtYXRlYXIgcmVzdWx0YWRvXHJcbiAgY29uc3QgY29sb21iaWFEYXRlID0gY29sb21iaWFNaWRuaWdodC50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUNBJywge1xyXG4gICAgdGltZVpvbmU6ICdBbWVyaWNhL0JvZ290YSdcclxuICB9KTtcclxuICBjb25zdCBjb2xvbWJpYVRpbWUgPSBjb2xvbWJpYU1pZG5pZ2h0LnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7XHJcbiAgICB0aW1lWm9uZTogJ0FtZXJpY2EvQm9nb3RhJyxcclxuICAgIGhvdXIxMjogZmFsc2UsXHJcbiAgICBob3VyOiAnMi1kaWdpdCcsXHJcbiAgICBtaW51dGU6ICcyLWRpZ2l0JyxcclxuICAgIHNlY29uZDogJzItZGlnaXQnXHJcbiAgfSk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGNvbG9tYmlhVGltZTogY29sb21iaWFUaW1lIHx8ICcwMDowMDowMCcsXHJcbiAgICBjb2xvbWJpYURhdGUsXHJcbiAgICBjb2xvbWJpYURhdGVUaW1lOiBjb2xvbWJpYU1pZG5pZ2h0LFxyXG4gICAgZXVyb3BlRGF0ZTogZXVyb3BlRGF0ZVN0clxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBlbCBvZmZzZXQgZGUgRXVyb3BhIENlbnRyYWwgZW4gaG9yYXMgKGNvbnNpZGVyYSBEU1QpXHJcbiAqIEBwYXJhbSBkYXRlIC0gRmVjaGEgZGUgcmVmZXJlbmNpYVxyXG4gKiBAcmV0dXJucyBPZmZzZXQgZW4gaG9yYXMgKDEgcGFyYSBpbnZpZXJubywgMiBwYXJhIHZlcmFubylcclxuICovXHJcbmZ1bmN0aW9uIGdldEV1cm9wZUNlbnRyYWxPZmZzZXQoZGF0ZTogRGF0ZSk6IG51bWJlciB7XHJcbiAgLy8gT2J0ZW5lciBsYSBob3JhIFVUQyB5IGxhIGhvcmEgZW4gRXVyb3BhIENlbnRyYWwgcGFyYSBsYSBtaXNtYSBmZWNoYVxyXG4gIGNvbnN0IHV0Y0hvdXIgPSBkYXRlLmdldFVUQ0hvdXJzKCk7XHJcbiAgXHJcbiAgLy8gQ3JlYXIgZm9ybWF0dGVyIHBhcmEgRXVyb3BhIENlbnRyYWxcclxuICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCB7XHJcbiAgICB0aW1lWm9uZTogJ0V1cm9wZS9CZXJsaW4nLFxyXG4gICAgaG91cjogJzItZGlnaXQnLFxyXG4gICAgaG91cjEyOiBmYWxzZVxyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IGV1cm9wZUhvdXIgPSBwYXJzZUludChmb3JtYXR0ZXIuZm9ybWF0KGRhdGUpKTtcclxuICBcclxuICAvLyBDYWxjdWxhciBkaWZlcmVuY2lhIChjb25zaWRlcmFuZG8gcXVlIHB1ZWRlIGNydXphciBtZWRpYW5vY2hlKVxyXG4gIGxldCBvZmZzZXQgPSBldXJvcGVIb3VyIC0gdXRjSG91cjtcclxuICBpZiAob2Zmc2V0ID4gMTIpIG9mZnNldCAtPSAyNDtcclxuICBpZiAob2Zmc2V0IDwgLTEyKSBvZmZzZXQgKz0gMjQ7XHJcbiAgXHJcbiAgcmV0dXJuIG9mZnNldDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9idGllbmUgbWVkaWFub2NoZSBDb2xvbWJpYSAoMDA6MDA6MDApXHJcbiAqIEBwYXJhbSBkYXRlIC0gRmVjaGEgZGUgcmVmZXJlbmNpYSAob3BjaW9uYWwpXHJcbiAqIEByZXR1cm5zIEZlY2hhL2hvcmEgZGUgbWVkaWFub2NoZSBlbiBDb2xvbWJpYVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGdldENvbG9tYmlhTWlkbmlnaHQgPSAoZGF0ZT86IERhdGUpOiB7XHJcbiAgZGF0ZTogc3RyaW5nOyAvLyBZWVlZLU1NLUREXHJcbiAgZGF0ZXRpbWU6IERhdGU7XHJcbiAgdGltZTogc3RyaW5nOyAvLyBISDpNTTpTU1xyXG59ID0+IHtcclxuICBjb25zdCBub3cgPSBkYXRlIHx8IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY29sb21iaWFEYXRlID0gZ2V0Q29sb21iaWFEYXRlKCk7XHJcbiAgY29uc3QgbWlkbmlnaHQgPSBuZXcgRGF0ZShgJHtjb2xvbWJpYURhdGV9VDAwOjAwOjAwYCk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGRhdGU6IGNvbG9tYmlhRGF0ZSxcclxuICAgIGRhdGV0aW1lOiBtaWRuaWdodCxcclxuICAgIHRpbWU6ICcwMDowMDowMCdcclxuICB9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZlcmlmaWNhIHNpIGVzIG1vbWVudG8gZGUgY29uZ2VsYXIgcGxhdGFmb3JtYXMgZXNwZWNpYWxlc1xyXG4gKiAobWVkaWFub2NoZSBFdXJvcGEgQ2VudHJhbClcclxuICogQHJldHVybnMgdHJ1ZSBzaSBlcyBtb21lbnRvIGRlIGNvbmdlbGFjacOzbiBhbnRpY2lwYWRhXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaXNFYXJseUZyZWV6ZVRpbWUgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBjb2xvbWJpYVRpbWUgPSBnZXRDb2xvbWJpYURhdGVUaW1lKCk7XHJcbiAgY29uc3QgZXVyb3BlTWlkbmlnaHQgPSBnZXRFdXJvcGVhbkNlbnRyYWxNaWRuaWdodEluQ29sb21iaWEobm93KTtcclxuICBcclxuICAvLyBDb21wYXJhciBob3JhIGFjdHVhbCBDb2xvbWJpYSBjb24gaG9yYSBkZSBtZWRpYW5vY2hlIEV1cm9wYSBDZW50cmFsIGVuIENvbG9tYmlhXHJcbiAgY29uc3QgW2N1cnJlbnRIb3VyLCBjdXJyZW50TWludXRlXSA9IGNvbG9tYmlhVGltZS5zcGxpdCgnICcpWzFdPy5zcGxpdCgnOicpIHx8IFsnMDAnLCAnMDAnXTtcclxuICBjb25zdCBbdGFyZ2V0SG91ciwgdGFyZ2V0TWludXRlXSA9IGV1cm9wZU1pZG5pZ2h0LmNvbG9tYmlhVGltZS5zcGxpdCgnOicpO1xyXG4gIFxyXG4gIGNvbnN0IGN1cnJlbnRUaW1lID0gcGFyc2VJbnQoY3VycmVudEhvdXIpICogNjAgKyBwYXJzZUludChjdXJyZW50TWludXRlKTtcclxuICBjb25zdCB0YXJnZXRUaW1lID0gcGFyc2VJbnQodGFyZ2V0SG91cikgKiA2MCArIHBhcnNlSW50KHRhcmdldE1pbnV0ZSk7XHJcbiAgXHJcbiAgLy8gVG9sZXJhbmNpYSBkZSDCsTUgbWludXRvc1xyXG4gIGNvbnN0IHRvbGVyYW5jZSA9IDU7XHJcbiAgcmV0dXJuIE1hdGguYWJzKGN1cnJlbnRUaW1lIC0gdGFyZ2V0VGltZSkgPD0gdG9sZXJhbmNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZlcmlmaWNhIHNpIGVzIG1vbWVudG8gZGUgY2llcnJlIGNvbXBsZXRvICgwMDowMCBDb2xvbWJpYSlcclxuICogQHJldHVybnMgdHJ1ZSBzaSBlcyBtZWRpYW5vY2hlIGVuIENvbG9tYmlhXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaXNGdWxsQ2xvc3VyZVRpbWUgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBjb2xvbWJpYVRpbWUgPSBnZXRDb2xvbWJpYURhdGVUaW1lKCk7XHJcbiAgY29uc3QgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IGNvbG9tYmlhVGltZS5zcGxpdCgnICcpWzFdPy5zcGxpdCgnOicpIHx8IFsnMDAnLCAnMDAnLCAnMDAnXTtcclxuICBcclxuICAvLyBWZXJpZmljYXIgc2kgZXMgbWVkaWFub2NoZSAoMDA6MDA6MDApIGNvbiB0b2xlcmFuY2lhIGRlIMKxMSBtaW51dG9cclxuICBjb25zdCBpc01pZG5pZ2h0ID0gcGFyc2VJbnQoaG91cikgPT09IDAgJiYgcGFyc2VJbnQobWludXRlKSA8PSAxO1xyXG4gIFxyXG4gIHJldHVybiBpc01pZG5pZ2h0O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIExpc3RhIGRlIDEwIHBsYXRhZm9ybWFzIGVzcGVjaWFsZXMgcXVlIHNlIGNvbmdlbGFuIGEgbWVkaWFub2NoZSBFdXJvcGEgQ2VudHJhbFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEVBUkxZX0ZSRUVaRV9QTEFURk9STVMgPSBbXHJcbiAgJ3N1cGVyZm9vbicsXHJcbiAgJ2xpdmVjcmVhdG9yJyxcclxuICAnbWRoJyxcclxuICAnNzc3JyxcclxuICAneG1vZGVscycsXHJcbiAgJ2JpZzcnLFxyXG4gICdtb25kbycsXHJcbiAgJ3Z4JyxcclxuICAnYmFiZXN0YXRpb24nLFxyXG4gICdkaXJ0eWZhbnMnXHJcbl0gYXMgY29uc3Q7XHJcblxyXG4vKipcclxuICogVmVyaWZpY2Egc2kgdW5hIHBsYXRhZm9ybWEgZXMgZXNwZWNpYWwgKHNlIGNvbmdlbGEgYW50aWNpcGFkYW1lbnRlKVxyXG4gKiBAcGFyYW0gcGxhdGZvcm1JZCAtIElEIGRlIGxhIHBsYXRhZm9ybWFcclxuICogQHJldHVybnMgdHJ1ZSBzaSBlcyBwbGF0YWZvcm1hIGVzcGVjaWFsXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaXNFYXJseUZyZWV6ZVBsYXRmb3JtID0gKHBsYXRmb3JtSWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xyXG4gIHJldHVybiBFQVJMWV9GUkVFWkVfUExBVEZPUk1TLmluY2x1ZGVzKHBsYXRmb3JtSWQudG9Mb3dlckNhc2UoKSBhcyBhbnkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9idGllbmUgZWwgcGVyw61vZG8gYWN0dWFsIGJhc2FkbyBlbiBlbCBkw61hXHJcbiAqIEByZXR1cm5zIFBlcsOtb2RvOiAnMS0xNScgbyAnMTYtMzEnXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudFBlcmlvZFR5cGUgPSAoKTogJzEtMTUnIHwgJzE2LTMxJyA9PiB7XHJcbiAgY29uc3QgY29sb21iaWFEYXRlID0gZ2V0Q29sb21iaWFEYXRlKCk7XHJcbiAgY29uc3QgZGF5ID0gcGFyc2VJbnQoY29sb21iaWFEYXRlLnNwbGl0KCctJylbMl0pO1xyXG4gIFxyXG4gIHJldHVybiBkYXkgPj0gMSAmJiBkYXkgPD0gMTUgPyAnMS0xNScgOiAnMTYtMzEnO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFZlcmlmaWNhIHNpIGVzIGTDrWEgZGUgY2llcnJlIChkw61hIDEgbyAxNilcclxuICogQHJldHVybnMgdHJ1ZSBzaSBlcyBkw61hIGRlIGNpZXJyZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGlzQ2xvc3VyZURheSA9ICgpOiBib29sZWFuID0+IHtcclxuICBjb25zdCBjb2xvbWJpYURhdGUgPSBnZXRDb2xvbWJpYURhdGUoKTtcclxuICBjb25zdCBkYXkgPSBwYXJzZUludChjb2xvbWJpYURhdGUuc3BsaXQoJy0nKVsyXSk7XHJcbiAgXHJcbiAgcmV0dXJuIGRheSA9PT0gMSB8fCBkYXkgPT09IDE2O1xyXG59O1xyXG5cclxuIl0sIm5hbWVzIjpbImdldENvbG9tYmlhRGF0ZSIsIkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ0aW1lWm9uZSIsImdldENvbG9tYmlhRGF0ZVRpbWUiLCJ0b0xvY2FsZVN0cmluZyIsImdldEV1cm9wZWFuQ2VudHJhbE1pZG5pZ2h0SW5Db2xvbWJpYSIsImRhdGUiLCJub3ciLCJldXJvcGVEYXRlRm9ybWF0dGVyIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiZXVyb3BlRGF0ZVN0ciIsImZvcm1hdCIsInRlc3RGb3JtYXR0ZXIiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwiaG91cjEyIiwicGFydHMiLCJmb3JtYXRUb1BhcnRzIiwiZXVyb3BlUGFydHMiLCJmb3JFYWNoIiwicGFydCIsInR5cGUiLCJ2YWx1ZSIsImV1cm9wZU1pZG5pZ2h0SVNPIiwiZXVyb3BlWWVhciIsInBhcnNlSW50IiwiZXVyb3BlTW9udGgiLCJldXJvcGVEYXkiLCJ0ZXN0RGF0ZVVUQyIsIlVUQyIsImV1cm9wZU9mZnNldCIsImdldEV1cm9wZUNlbnRyYWxPZmZzZXQiLCJldXJvcGVNaWRuaWdodFVUQyIsImNvbG9tYmlhTWlkbmlnaHQiLCJnZXRUaW1lIiwiY29sb21iaWFEYXRlIiwiY29sb21iaWFUaW1lIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiY29sb21iaWFEYXRlVGltZSIsImV1cm9wZURhdGUiLCJ1dGNIb3VyIiwiZ2V0VVRDSG91cnMiLCJmb3JtYXR0ZXIiLCJldXJvcGVIb3VyIiwib2Zmc2V0IiwiZ2V0Q29sb21iaWFNaWRuaWdodCIsIm1pZG5pZ2h0IiwiZGF0ZXRpbWUiLCJ0aW1lIiwiaXNFYXJseUZyZWV6ZVRpbWUiLCJldXJvcGVNaWRuaWdodCIsImN1cnJlbnRIb3VyIiwiY3VycmVudE1pbnV0ZSIsInNwbGl0IiwidGFyZ2V0SG91ciIsInRhcmdldE1pbnV0ZSIsImN1cnJlbnRUaW1lIiwidGFyZ2V0VGltZSIsInRvbGVyYW5jZSIsIk1hdGgiLCJhYnMiLCJpc0Z1bGxDbG9zdXJlVGltZSIsImlzTWlkbmlnaHQiLCJFQVJMWV9GUkVFWkVfUExBVEZPUk1TIiwiaXNFYXJseUZyZWV6ZVBsYXRmb3JtIiwicGxhdGZvcm1JZCIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJnZXRDdXJyZW50UGVyaW9kVHlwZSIsImlzQ2xvc3VyZURheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./utils/period-closure-dates.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&page=%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcalculator%2Fperiod-closure%2Fmanual-close%2Froute.ts&appDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccamca%5COneDrive%5CDocumentos%5CGitHub%5Ciam-sistema-de-gestion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();