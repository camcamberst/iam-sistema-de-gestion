"use strict";(()=>{var e={};e.id=6260,e.ids=[6260],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},84110:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>R,originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>E,staticGenerationBailout:()=>h});var o={};t.r(o),t.d(o,{POST:()=>d,dynamic:()=>u});var s=t(95419),a=t(69108),c=t(99678),n=t(78070),i=t(72964);let u="force-dynamic",l=(0,i.createClient)("https://mhernfrkvwigxdubiozm.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function d(e){try{console.log("\uD83D\uDD25 [FORCE-RESET] Iniciando reset forzado de model_values...");let r=e.headers.get("x-cron-secret"),t=process.env.CRON_SECRET_KEY||"cron-secret";if(r!==t)return n.Z.json({success:!1,error:"No autorizado"},{status:401});let{count:o}=await l.from("model_values").select("*",{count:"exact",head:!0});console.log(`ðŸ” [FORCE-RESET] Valores antes del reset: ${o}`);let{error:s}=await l.from("model_values").delete().gte("period_date","2000-01-01");if(s)throw console.error("âŒ [FORCE-RESET] Error eliminando:",s),s;let{count:a}=await l.from("model_values").select("*",{count:"exact",head:!0});return console.log(`âœ… [FORCE-RESET] Reset completado. Valores eliminados: ${o}, Restantes: ${a}`),n.Z.json({success:!0,message:"Reset forzado completado",deleted:o||0,remaining:a||0})}catch(e){return console.error("âŒ [FORCE-RESET] Error:",e),n.Z.json({success:!1,error:e instanceof Error?e.message:"Error interno"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/calculator/force-reset/route",pathname:"/api/calculator/force-reset",filename:"route",bundlePath:"app/api/calculator/force-reset/route"},resolvedPagePath:"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\api\\calculator\\force-reset\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:E,serverHooks:f,headerHooks:R,staticGenerationBailout:h}=p,g="/api/calculator/force-reset/route";function v(){return(0,c.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:E})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206,2964],()=>t(84110));module.exports=o})();