(()=>{var e={};e.id=7143,e.ids=[7143],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},48532:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=t(50482),s=t(69108),o=t(62563),l=t.n(o),n=t(68300),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(r,i);let d=["",{children:["admin",{children:["calculator",{children:["config",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93932)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\calculator\\config\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\calculator\\config\\page.tsx"],m="/admin/calculator/config/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/calculator/config/page",pathname:"/admin/calculator/config",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54173:(e,r,t)=>{Promise.resolve().then(t.bind(t,19676))},19676:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(95344),s=t(3729),o=t(22254),l=t(71145);let n=e=>{let r=e?.trim()||"";return r.toLowerCase().includes("sat\xe9lite")||r.toLowerCase().includes("satelite")?80:"otros"===r.toLowerCase()?70:60},i=e=>{let r=e?.trim()||"";return r.toLowerCase().includes("sat\xe9lite")||r.toLowerCase().includes("satelite")?800:"otros"===r.toLowerCase()?1e3:500},d=e=>{switch(e){case"entregada":return"bg-green-100 text-green-800 border-green-200";case"pendiente":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"solicitada":return"bg-blue-100 text-blue-800 border-blue-200";case"inviable":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function c(){(0,o.useRouter)();let[e,r]=(0,s.useState)([]),[t,c]=(0,s.useState)([]),[m,u]=(0,s.useState)([]),[x,g]=(0,s.useState)(null),[p,h]=(0,s.useState)(!0),[b,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)("all"),[D,C]=(0,s.useState)(null),[L,S]=(0,s.useState)([]),[M,E]=(0,s.useState)(""),[_,O]=(0,s.useState)(""),[$,P]=(0,s.useState)(""),[A,G]=(0,s.useState)(""),[q,z]=(0,s.useState)({}),[I,U]=(0,s.useState)({platforms:!0,reparto:!1}),[W,B]=(0,s.useState)(!1),[F,V]=(0,s.useState)({});(0,s.useEffect)(()=>{H()},[]),(0,s.useEffect)(()=>{let e=()=>{B(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{x&&W&&U(e=>({...e,platforms:!0}))},[x,W]);let H=async()=>{try{var e;console.log("\uD83D\uDD0D [LOAD] Iniciando loadData..."),h(!0),v(null),console.log("\uD83D\uDD0D [LOAD] Cargando datos del usuario...");console.log("\uD83D\uDD0D [LOAD] User data:",null),C(null),console.log("\uD83D\uDD0D [LOAD] Cargando modelos...");let t=await fetch("/api/calculator/models?adminId=current-user");console.log("\uD83D\uDD0D [LOAD] Models response status:",t.status);let a=await t.json();if(console.log("\uD83D\uDD0D [LOAD] Models data:",a),!a.success)throw Error(a.error||"Error al cargar modelos");c(a.models),r(a.models);let s=new Map;a.models.forEach(e=>{e.groups.forEach(e=>{e&&e.id&&e.name&&s.set(e.id,e)})});let o=Array.from(s.values()),l=o;k(l),console.log("\uD83D\uDD0D [LOAD] Available groups:",l),console.log("\uD83D\uDD0D [LOAD] Models set successfully"),console.log("\uD83D\uDD0D [LOAD] Cargando plataformas...");let n=await fetch("/api/calculator/platforms");console.log("\uD83D\uDD0D [LOAD] Platforms response status:",n.status);let i=await n.json();if(console.log("\uD83D\uDD0D [LOAD] Platforms data:",i),!i.success)throw Error(i.error||"Error al cargar plataformas");let d=i.config?.platforms||[];u(d),console.log("\uD83D\uDD0D [LOAD] platforms set with:",d.length,"plataformas"),console.log("\uD83D\uDD0D [LOAD] loadData completado exitosamente")}catch(e){console.error("âŒ [LOAD] Error en loadData:",e),v(e.message||"Error al cargar datos")}finally{console.log("\uD83D\uDD0D [LOAD] Setting loading to false"),h(!1)}},T=async r=>{let t=e.find(e=>e.id===r);if(t){if(g(t),t.hasConfig&&t.currentConfig){let e=t.currentConfig;S(e.enabled_platforms||[]),E(e.percentage_override?.toString()||""),O(e.min_quota_override?.toString()||"");let r=t.groups[0]?.name;if(e.group_percentage&&e.group_percentage>0)P(e.group_percentage.toString());else if(r){let e=n(r);P(e.toString()),console.log(`ðŸ” [EXISTING CONFIG] Usando porcentaje est\xe1ndar para ${r}: ${e}%`)}else P("");if(e.group_min_quota&&e.group_min_quota>0)G(e.group_min_quota.toString());else if(r){let e=i(r);G(e.toString()),console.log(`ðŸ” [EXISTING CONFIG] Usando objetivo est\xe1ndar para ${r}: ${e} USD`)}else G("")}else{S([]),E(""),O("");let e=t.groups[0]?.name;if(e){let r=n(e),t=i(e);P(r.toString()),G(t.toString()),console.log(`ðŸ” [DEFAULT VALUES] Cargando valores est\xe1ndar para ${e}: ${r}% y ${t} USD`)}else P(""),G("")}try{let e=await fetch(`/api/modelo-plataformas?model_id=${t.id}`),r=await e.json(),a={};r.forEach(e=>{a[e.platform_id]=e}),z(a)}catch(e){console.error("Error cargando datos del Portafolio:",e),z({})}}},Z=async e=>{if(L.includes(e)){S(r=>r.filter(r=>r!==e));return}if(!x){console.error("No hay modelo seleccionado");return}if(!x.hasConfig){console.log("\uD83D\uDD0D [INITIAL CONFIG] Permitir plataforma para configuraci\xf3n inicial:",e),S(r=>[...r,e]);return}try{let r=await fetch(`/api/modelo-plataformas?model_id=${x.id}&platform_id=${e}`),t=await r.json();if(t&&t.length>0){let r=t[0].status;"entregada"===r||"confirmada"===r||t[0].is_initial_config?S(r=>[...r,e]):alert(`No se puede activar esta plataforma. Estado actual en Portafolio: ${r}. Debe estar en estado "Entregada" o "Confirmada" para poder activarla.`)}else alert("Esta plataforma no est\xe1 disponible. Debe ser solicitada a trav\xe9s del Portafolio Modelos primero.")}catch(e){console.error("Error validando estado del Portafolio:",e),alert("Error al validar el estado de la plataforma. Intenta nuevamente.")}},R=async()=>{if(x)try{f(!0),v(null);let e=await fetch("/api/calculator/config-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelId:x.id,adminId:"current-user",groupId:x.groups[0]?.id||"default-group",enabledPlatforms:L,percentageOverride:M?parseFloat(M):null,minQuotaOverride:_?parseFloat(_):null,groupPercentage:$?parseFloat($):null,groupMinQuota:A?parseFloat(A):null})}),r=await e.json();if(!r.success)throw Error(r.error||"Error al guardar configuraci\xf3n");alert("Configuraci\xf3n guardada correctamente"),await H(),g(null)}catch(e){v(e.message||"Error al guardar")}finally{f(!1)}};return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando configuraci\xf3n..."})]})}):y?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 dark:border-gray-600/20 p-8 max-w-md dark:shadow-lg dark:shadow-red-900/15 dark:ring-0.5 dark:ring-red-400/20",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Error"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:y}),a.jsx("button",{onClick:H,className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-300 text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"Reintentar"})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[a.jsx("div",{className:"mb-8 sm:mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:a.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"text-base sm:text-lg md:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent leading-tight whitespace-nowrap overflow-hidden text-ellipsis",children:"Gesti\xf3n de Calculadora"}),a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:"Configura las tasas y par\xe1metros de c\xe1lculo para cada modelo"})]})]})})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6",children:[a.jsx("div",{className:"md:col-span-1",children:(0,a.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-3 sm:p-6 space-y-4 sm:space-y-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 z-[99999]",children:[j.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[a.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),a.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100",children:"Filtrar por Grupo"})]}),a.jsx(l.Z,{options:j.map(e=>({value:e.id,label:e.name})),value:w,onChange:e=>{N(e),g(null),"all"===e?r(t):r(t.filter(r=>r.groups.some(r=>r.id===e)))},placeholder:"Selecciona un grupo",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[a.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar Modelo"})]}),a.jsx(l.Z,{options:[{value:"",label:"Seleccionar modelo"},...e.map(e=>({value:e.id,label:e.email?e.email.split("@")[0]:e.name,badge:e.hasConfig?"Configurado":void 0,badgeColor:e.hasConfig?"green":void 0}))],value:x?.id||"",onChange:e=>e?T(e):g(null),placeholder:"Seleccionar modelo",className:"text-sm"}),x&&x.groups.length>0&&(0,a.jsxs)("div",{className:"hidden sm:block mt-3 sm:mt-4 p-2 sm:p-3 bg-gray-50/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-lg border border-gray-200/50 dark:border-gray-500/50",children:[a.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 dark:text-gray-300 mb-1.5 sm:mb-2 font-medium",children:"Grupos:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:x.groups.map(e=>a.jsx("span",{className:"inline-block px-1.5 sm:px-2 py-0.5 sm:py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 text-[10px] sm:text-xs rounded-full border border-blue-200/50 dark:border-blue-700/50",children:e.name},e.id))})]})]})]})}),x&&(0,a.jsxs)("div",{className:"md:col-span-2 relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-3 sm:p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>W&&U(e=>({...e,platforms:!e.platforms})),className:`w-full flex items-center justify-between ${W?"cursor-pointer mb-3 sm:mb-6":"mb-3 sm:mb-6 cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-purple-500 to-violet-600 rounded-md flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),a.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 truncate",children:x.name||x.email})]}),W&&a.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${I.platforms?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,a.jsxs)("div",{className:`space-y-3 sm:space-y-6 ${W&&!I.platforms?"hidden":""} transition-all duration-200`,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:a.jsx("svg",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar P\xe1ginas"})]}),a.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 bg-gray-100/80 dark:bg-gray-600/80 px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full border border-gray-200/50 dark:border-gray-500/50",children:m.length})]}),a.jsx("div",{className:"border border-gray-200/50 dark:border-gray-500/50 rounded-lg p-2 sm:p-4 max-h-[280px] sm:max-h-80 overflow-y-auto bg-gray-50/30 dark:bg-gray-600/30 backdrop-blur-sm",children:a.jsx("div",{className:"space-y-2 sm:space-y-3",children:0===m.length?(0,a.jsxs)("div",{className:"text-center py-6 sm:py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:a.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("p",{className:"text-xs sm:text-sm font-medium",children:"No hay plataformas disponibles"}),a.jsx("p",{className:"text-[10px] sm:text-xs",children:"Cargando datos..."})]}):m.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 sm:p-3 bg-white/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-lg border border-gray-200/50 dark:border-gray-500/50",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1.5 sm:space-x-2 mb-0.5 sm:mb-1",children:[a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),q[e.id]&&x?.hasConfig&&a.jsx("span",{className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full border flex-shrink-0 ${d(q[e.id].status)}`,children:q[e.id].status}),!x?.hasConfig&&a.jsx("span",{className:"text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full border bg-green-100 text-green-800 border-green-200 flex-shrink-0",children:"Disponible"})]}),W?a.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),V(r=>({...r,[e.id]:!r[e.id]}))},className:"text-[10px] text-gray-500 dark:text-gray-400 text-left w-full mt-0.5",children:a.jsx("span",{className:F[e.id]?"":"line-clamp-1",children:e.description})}):a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>Z(e.id),className:`relative inline-flex h-4 w-7 sm:h-5 sm:w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex-shrink-0 ml-2 ${L.includes(e.id)?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gray-200 dark:bg-gray-500"}`,children:[a.jsx("span",{className:"sr-only",children:"Enable platform"}),a.jsx("span",{className:`inline-block h-2.5 w-2.5 sm:h-3 sm:w-3 transform rounded-full bg-white transition-transform shadow-sm ${L.includes(e.id)?"translate-x-3.5 sm:translate-x-5":"translate-x-0.5 sm:translate-x-1"}`})]})]},e.id))})})]}),(0,a.jsxs)("div",{className:"relative bg-white/50 dark:bg-gray-600/50 backdrop-blur-sm rounded-xl shadow-sm border border-white/30 dark:border-gray-500/30 p-3 sm:p-6",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>W&&U(e=>({...e,reparto:!e.reparto})),className:`w-full flex items-center justify-between ${W?"cursor-pointer mb-3 sm:mb-6":"mb-3 sm:mb-6 cursor-default"}`,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-orange-500 to-amber-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),a.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100",children:"Configuraci\xf3n de Reparto"})]}),W&&a.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${I.reparto?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,a.jsxs)("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-6 ${W&&!I.reparto?"hidden":""} transition-all duration-200`,children:[(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 dark:border-gray-500/50 p-3 sm:p-6 h-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:a.jsx("svg",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Configuraci\xf3n Grupo"})]}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"groupPercentage",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200 mb-1.5 sm:mb-2",children:"Porcentaje Grupo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("input",{type:"number",id:"groupPercentage",className:"apple-input flex-1 h-10 sm:h-auto",value:$,onChange:e=>P(e.target.value),placeholder:x?.groups?.[0]?n(x.groups[0].name).toString():"60"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]}),x?.groups?.[0]&&(0,a.jsxs)("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-1.5 sm:mt-2",children:["Valor por defecto: ",n(x.groups[0].name),"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"groupMinQuota",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200 mb-1.5 sm:mb-2",children:"Objetivo Grupo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("input",{type:"number",id:"groupMinQuota",className:"apple-input flex-1 h-10 sm:h-auto",value:A,onChange:e=>G(e.target.value),placeholder:x?.groups?.[0]?i(x.groups[0].name).toString():"500"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium",children:"USD"})]}),x?.groups?.[0]&&(0,a.jsxs)("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-1.5 sm:mt-2",children:["Valor sugerido: ",i(x.groups[0].name)," USD"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-600 rounded-xl shadow-sm border border-gray-200 dark:border-gray-500 p-3 sm:p-6 h-full",children:[a.jsx("h4",{className:"text-xs sm:text-base font-medium text-gray-900 dark:text-gray-100 mb-4 sm:mb-6",children:"Configuraci\xf3n Modelo"}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"percentageOverride",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200 mb-1.5 sm:mb-2",children:"Porcentaje Modelo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("input",{type:"number",id:"percentageOverride",className:"apple-input flex-1 h-10 sm:h-auto",value:M,onChange:e=>E(e.target.value),placeholder:"70"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]}),a.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-1.5 sm:mt-2",children:"Dejar vac\xedo para usar el porcentaje del grupo"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"minQuotaOverride",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200 mb-1.5 sm:mb-2",children:"Objetivo Modelo"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsx("input",{type:"number",id:"minQuotaOverride",className:"apple-input flex-1 h-10 sm:h-auto",value:_,onChange:e=>O(e.target.value),placeholder:"300000"}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium",children:"USD"})]}),a.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-1.5 sm:mt-2",children:"Dejar vac\xedo para usar el objetivo del grupo"})]})]})]})]})]}),a.jsx("div",{className:"hidden sm:flex justify-center",children:a.jsx("button",{type:"button",onClick:R,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:b?"Guardando...":"Guardar Configuraci\xf3n"})})]})]}),x&&W&&a.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 sm:hidden pb-safe",children:a.jsx("button",{type:"button",onClick:R,disabled:b,className:"w-full px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-lg active:scale-95 touch-manipulation disabled:opacity-50",children:b?"Guardando...":"Guardar Configuraci\xf3n"})}),x&&W&&a.jsx("div",{className:"h-20 sm:h-0"})]})]})})}},71145:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l});var a=t(95344),s=t(3729);let o={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function l({options:e,value:r,onChange:t,placeholder:l="Selecciona una opci\xf3n",className:n="",disabled:i=!1,maxHeight:d="max-h-60",autoOpen:c=!1}){let[m,u]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{c&&e.length>1?u(!0):c||u(!1)},[c,e.length]),(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{m&&x.current&&setTimeout(()=>{x.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[m]);let g=e.find(e=>e.value===r),p=e=>{t(e),u(!1)};return(0,a.jsxs)("div",{className:`relative ${n}`,ref:x,children:[a.jsx("button",{type:"button",className:`w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ${i?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!i&&u(!m),disabled:i,"aria-haspopup":"listbox","aria-expanded":m,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{className:g?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:g?g.label:l}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[g?.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o[g.badgeColor||"gray"]}`,children:g.badge}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),m&&a.jsx("div",{className:`absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ${d} overflow-auto apple-scroll`,children:0===e.length?a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):e.map((e,t)=>(0,a.jsxs)("div",{children:[t>0&&a.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:`px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"} ${e.value===r?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""}`,onClick:()=>!e.disabled&&p(e.value),children:[a.jsx("span",{children:e.label}),e.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o[e.badgeColor||"gray"]}`,children:e.badge})]})]},e.value))})]})}},97075:(e,r,t)=>{"use strict";t.d(r,{Z:()=>m});var a=t(3729);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),l=e=>{let r=o(e);return r.charAt(0).toUpperCase()+r.slice(1)},n=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim(),i=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...m},u)=>(0,a.createElement)("svg",{ref:u,...d,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:n("lucide",o),...!l&&!i(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(l)?l:[l]])),m=(e,r)=>{let t=(0,a.forwardRef)(({className:t,...o},i)=>(0,a.createElement)(c,{ref:i,iconNode:r,className:n(`lucide-${s(l(e))}`,`lucide-${e}`,t),...o}));return t.displayName=l(e),t}},25545:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(97075).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},93932:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>l});let a=(0,t(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\calculator\config\page.tsx`),{__esModule:s,$$typeof:o}=a,l=a.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6611,6654,1586,1582,1110],()=>t(48532));module.exports=a})();