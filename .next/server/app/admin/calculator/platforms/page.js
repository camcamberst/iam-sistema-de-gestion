(()=>{var e={};e.id=3345,e.ids=[3345],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},59199:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=r(50482),s=r(69108),i=r(62563),n=r.n(i),d=r(68300),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let o=["",{children:["admin",{children:["calculator",{children:["platforms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24777)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\calculator\\platforms\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\calculator\\platforms\\page.tsx"],m="/admin/calculator/platforms/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/calculator/platforms/page",pathname:"/admin/calculator/platforms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},53899:(e,t,r)=>{Promise.resolve().then(r.bind(r,92283))},92283:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(95344),s=r(3729),i=r(20783),n=r.n(i),d=r(22254);let l=(0,r(36654).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c");function o(){let e=(0,d.useRouter)(),[t,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let{data:{user:t}}=await l.auth.getUser();if(!t){e.push("/");return}let{data:r,error:a}=await l.from("users").select("id, role").eq("id",t.id).single();if(a||!r||"super_admin"!==r.role){e.push("/admin/dashboard");return}u(r),await f()}catch(t){console.error("Error de autenticaci\xf3n:",t),e.push("/admin/dashboard")}},f=async()=>{try{o(!0);let e=await fetch("/api/calculator/platforms"),t=await e.json();if(!t.success)throw Error(t.error||"Error al cargar plataformas");r(t.config.platforms||[])}catch(e){m(e.message)}finally{o(!1)}},b=async(e,t)=>{if(confirm(`\xbfEst\xe1s seguro de que deseas eliminar la plataforma "${t}"? Esta acci\xf3n no se puede deshacer.`))try{h(e);let t=await fetch(`/api/calculator/platforms?id=${e}&deleted_by=${x.id}`,{method:"DELETE"}),r=await t.json();if(!r.success)throw Error(r.error);await f(),sessionStorage.setItem("platforms_updated",Date.now().toString())}catch(e){alert("Error al eliminar: "+e.message)}finally{h(null)}};return i&&!t.length?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando plataformas..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[a.jsx("div",{className:"mb-8 sm:mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"text-base sm:text-lg md:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent leading-tight whitespace-nowrap overflow-hidden text-ellipsis",children:"Gesti\xf3n de Plataformas"}),a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:"Administra las plataformas disponibles en la calculadora"})]})]}),(0,a.jsxs)(n(),{href:"/admin/calculator/create-platform",className:"w-full md:w-auto px-4 py-2.5 sm:px-5 sm:py-3 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg transform hover:scale-[1.02] md:hover:scale-105 font-medium text-sm sm:text-base",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),a.jsx("span",{children:"Nueva Plataforma"})]})]})})]})}),c&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-200 rounded-lg",children:c}),a.jsx("div",{className:"relative bg-white/70 dark:bg-gray-800/80 backdrop-blur-sm border border-white/20 dark:border-gray-600/40 rounded-xl shadow-md transition-all duration-300 apple-scroll overflow-y-auto max-h-[70vh] p-0 z-10 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,a.jsxs)("div",{className:"pt-4 sm:pt-6 px-3 sm:px-6 pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,a.jsxs)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:["Plataformas (",t.length,")"]})]}),0!==t.length||i?a.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:a.jsx("div",{className:"inline-block min-w-full align-middle",children:a.jsx("div",{className:"overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:table-fixed",children:[a.jsx("thead",{className:"border-b border-white/20 dark:border-gray-600/40 bg-gradient-to-r from-gray-50/80 to-blue-50/60 dark:from-gray-700/90 dark:to-gray-600/70 backdrop-blur-sm",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-2 sm:px-4 py-3 sm:py-4 min-w-[140px] sm:w-[25%] text-gray-700 dark:text-white font-medium text-xs sm:text-sm uppercase tracking-wide text-left",children:"Plataforma"}),a.jsx("th",{className:"px-2 sm:px-4 py-3 sm:py-4 min-w-[100px] sm:w-[18%] text-gray-700 dark:text-white font-medium text-xs sm:text-sm uppercase tracking-wide text-center",children:"Tipo / Moneda"}),a.jsx("th",{className:"px-2 sm:px-4 py-3 sm:py-4 min-w-[120px] sm:w-[25%] text-gray-700 dark:text-white font-medium text-xs sm:text-sm uppercase tracking-wide text-center",children:"Configuraci\xf3n"}),a.jsx("th",{className:"px-2 sm:px-4 py-3 sm:py-4 min-w-[100px] sm:w-[15%] text-gray-700 dark:text-white font-medium text-xs sm:text-sm uppercase tracking-wide text-center",children:"Frecuencia"}),a.jsx("th",{className:"px-2 sm:px-4 py-3 sm:py-4 min-w-[100px] sm:w-[17%] text-gray-700 dark:text-white font-medium text-xs sm:text-sm uppercase tracking-wide text-center sm:text-right",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white/30 dark:bg-gray-800/50 backdrop-blur-sm divide-y divide-white/20 dark:divide-gray-700/50",children:t.map(e=>{let t="Est\xe1ndar";return e.token_rate?t="Tokens":e.direct_payout&&(t="Pago Directo"),(0,a.jsxs)("tr",{className:"border-b border-white/10 dark:border-gray-700/50 hover:bg-white/60 dark:hover:bg-gray-700/70 hover:shadow-sm transition-all duration-200 h-auto sm:h-12 group",children:[a.jsx("td",{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-6 w-6 sm:h-8 sm:w-8 flex-shrink-0 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-300 font-bold text-sm sm:text-lg border border-blue-200 dark:border-blue-700/50",children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-xs sm:text-sm truncate",children:e.name}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-300 font-mono text-[10px] sm:text-xs truncate",children:e.id})]})]})}),a.jsx("td",{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:e.currency}),a.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-300",children:t})]})}),a.jsx("td",{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"text-[10px] sm:text-xs text-gray-600 dark:text-gray-200 space-y-0.5 sm:space-y-1 text-center",children:[e.token_rate&&(0,a.jsxs)("div",{children:["Token: ",a.jsx("span",{className:"font-mono",children:e.token_rate})]}),e.discount_factor&&(0,a.jsxs)("div",{children:["Desc: ",(0,a.jsxs)("span",{className:"font-mono",children:[(100*e.discount_factor).toFixed(1),"%"]})]}),e.tax_rate&&(0,a.jsxs)("div",{children:["Imp: ",(0,a.jsxs)("span",{className:"font-mono",children:[(100*e.tax_rate).toFixed(1),"%"]})]})]})}),a.jsx("td",{className:"px-2 sm:px-4 py-2",children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("span",{className:`inline-flex items-center justify-center min-w-[70px] sm:min-w-[80px] px-2 sm:px-3 py-1 rounded-full text-[10px] sm:text-xs font-medium border ${"quincenal"===e.payment_frequency?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300 border-green-200 dark:border-green-700/50":"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"}`,children:e.payment_frequency})})}),a.jsx("td",{className:"px-2 sm:px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-center sm:justify-end gap-2 sm:gap-3",children:[a.jsx(n(),{href:`/admin/calculator/platforms/${e.id}/edit`,className:"text-blue-600 hover:text-blue-900 dark:text-blue-300 dark:hover:text-blue-200 font-medium text-xs sm:text-sm transition-colors touch-manipulation",children:"Editar"}),a.jsx("button",{onClick:()=>b(e.id,e.name),disabled:p===e.id,className:"text-red-600 hover:text-red-900 dark:text-red-300 dark:hover:text-red-200 font-medium text-xs sm:text-sm disabled:opacity-50 transition-colors touch-manipulation",children:p===e.id?"...":"Eliminar"})]})})]},e.id)})})]})})})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay plataformas activas."})]})]})})]})})}},97075:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r(3729);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:c,...m},x)=>(0,a.createElement)("svg",{ref:x,...o,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:d("lucide",i),...!n&&!l(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(n)?n:[n]])),m=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},l)=>(0,a.createElement)(c,{ref:l,iconNode:t,className:d(`lucide-${s(n(e))}`,`lucide-${e}`,r),...i}));return r.displayName=n(e),r}},25545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(97075).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},24777:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>n});let a=(0,r(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\calculator\platforms\page.tsx`),{__esModule:s,$$typeof:i}=a,n=a.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,6611,6654,1586,1582,1110],()=>r(59199));module.exports=a})();