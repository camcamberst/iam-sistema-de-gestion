(()=>{var e={};e.id=6192,e.ids=[6192],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},16833:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>i});var a=s(50482),o=s(69108),t=s(62563),l=s.n(t),n=s(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(r,d);let i=["",{children:["admin",{children:["sedes",{children:["gestionar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,37939)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\sedes\\gestionar\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\sedes\\gestionar\\page.tsx"],m="/admin/sedes/gestionar/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/sedes/gestionar/page",pathname:"/admin/sedes/gestionar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},34263:(e,r,s)=>{Promise.resolve().then(s.bind(s,52431))},52431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var a=s(95344),o=s(3729),t=s(22254),l=s(71145),n=s(33265);function d(){let[e,r]=(0,o.useState)([]),[s,d]=(0,o.useState)([]),[i,c]=(0,o.useState)(!0),[m,x]=(0,o.useState)(""),[g,u]=(0,o.useState)(""),[h,b]=(0,o.useState)(""),[p,f]=(0,o.useState)(!1),[y,j]=(0,o.useState)(!1),[v,k]=(0,o.useState)(""),[N,w]=(0,o.useState)(""),[D,E]=(0,o.useState)(!1),[C,S]=(0,o.useState)(""),[R,L]=(0,o.useState)([]),[O,T]=(0,o.useState)(""),[_,M]=(0,o.useState)(""),[A,B]=(0,o.useState)([]),[F,H]=(0,o.useState)(null),[z,P]=(0,o.useState)(null),[$,G]=(0,o.useState)(!1),[W,q]=(0,o.useState)(null),[I,U]=(0,o.useState)([]),[V,J]=(0,o.useState)(""),[Z,Q]=(0,o.useState)(""),[X,K]=(0,o.useState)(!1),[Y,ee]=(0,o.useState)(""),[er,es]=(0,o.useState)([]),[ea,eo]=(0,o.useState)(!1),[et,el]=(0,o.useState)(null),[en,ed]=(0,o.useState)(null),[ei,ec]=(0,o.useState)(!1),[em,ex]=(0,o.useState)(null),[eg,eu]=(0,o.useState)(!1),[eh,eb]=(0,o.useState)(null),ep=(0,t.useRouter)(),ef=(e,r)=>{ep.push(`/admin/sedes/portafolio?model=${e}&email=${encodeURIComponent(r)}`)};(0,o.useEffect)(()=>{window.scrollTo(0,0),ey()},[]),(0,o.useEffect)(()=>{C&&""!==C&&(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Ejecutando useEffect con:",{userRole:C,userGroups:R}),eN(),ej())},[C,R]);let ey=()=>{try{let e=localStorage.getItem("user");if(e){let r=JSON.parse(e);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Datos del usuario desde localStorage:",{id:r.id,role:r.role,groups:r.groups}),S(r.role||"admin");let s=r.groups?.map(e=>e.id)||[];console.log("\uD83D\uDD0D [GESTIONAR-SEDES] IDs de grupos extra\xeddos:",s),L(s),T(r.id||"")}}catch(e){console.warn("Error parsing user data from localStorage:",e)}},ej=async()=>{try{if(!C||""===C){console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Saltando carga de sedes - userRole vac\xedo");return}console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Cargando sedes disponibles con:",{userRole:C,userGroups:R});let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:C,userGroups:R})}),r=await e.json();if(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Respuesta de API:",r),!r.success)return;let s=r.groups.filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Sedes operativas filtradas:",s),B(s),M(""),b("")}catch(e){console.error("Error cargando sedes disponibles:",e)}},ev=async()=>{try{console.log("\uD83D\uDD04 [FRONTEND] Recargando solo rooms...");let e=await fetch("/api/groups/rooms");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.json();r.success?(d(r.rooms||[]),console.log("‚úÖ [FRONTEND] Rooms actualizados:",r.rooms?.length||0)):console.error("‚ùå [FRONTEND] Error cargando rooms:",r.error)}catch(e){console.error("‚ùå [FRONTEND] Error recargando rooms:",e)}},ek=async e=>{try{let r=A.find(r=>r.id===e);if(!r)return;let s=await fetch("/api/groups/rooms"),a=await s.json();if(a.success){let s=a.rooms.filter(r=>r.group_id===e);H({...r,rooms:s})}let o=await fetch("/api/users"),t=await o.json();if(t.success){console.log("\uD83D\uDD0D [DEBUG] Buscando admin para sede:",e),console.log("\uD83D\uDD0D [DEBUG] Todos los usuarios:",t.users.length);let r=t.users.filter(e=>"admin"===e.role);console.log("\uD83D\uDD0D [DEBUG] Solo admins:",r.length);let s=r.filter(r=>{let s=r.user_groups?.some(r=>r.id===e);return console.log(`üîç [DEBUG] Admin ${r.name}:`,{user_groups:r.user_groups,tieneEstaSede:s,sedeId:e,sedesAsignadas:r.user_groups?.length||0}),s});console.log("\uD83D\uDD0D [DEBUG] Admins asignados a esta sede:",s.length);let a=null;s.length>0&&(1===s.length?(a=s[0],console.log("\uD83D\uDD0D [DEBUG] Solo un admin asignado:",a.name)):(a=s.reduce((e,r)=>{let s=e.user_groups?.length||0,a=r.user_groups?.length||0;return console.log(`üîç [DEBUG] Comparando: ${e.name} (${s} sedes) vs ${r.name} (${a} sedes)`),a<s?r:e}),console.log("\uD83D\uDD0D [DEBUG] Admin seleccionado (menos sedes):",a.name,`(${a.user_groups?.length||0} sedes)`))),console.log("\uD83D\uDD0D [DEBUG] Admin final seleccionado:",a),P(a)}}catch(e){console.error("Error cargando informaci\xf3n de la sede:",e)}},eN=async()=>{try{c(!0),x("");let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:C,userGroups:R})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let s=await e.json();if(s.success){let e=(s.groups||[]).filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);r(e),e.length>0&&b(e[0].id)}else x("Error cargando sedes: "+(s.error||"Error desconocido"));let a=await fetch("/api/groups/rooms");if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let o=await a.json();o.success?d(o.rooms||[]):x("Error cargando rooms: "+(o.error||"Error desconocido"))}catch(e){console.error("Error cargando datos:",e),x("Error de conexi\xf3n: "+(e instanceof Error?e.message:"Error desconocido"))}finally{c(!1)}},ew=async e=>{if(e.preventDefault(),v.trim()){E(!0);try{let e=localStorage.getItem("supabase.auth.token"),r={"Content-Type":"application/json"};e&&(r.Authorization=`Bearer ${e}`);let s=await fetch("/api/groups",{method:"POST",headers:r,body:JSON.stringify({name:v.trim()})}),a=await s.json();a.success?(u("Sede creada exitosamente"),k(""),f(!1),eN()):x("Error creando sede: "+a.error)}catch(e){console.error("Error:",e),x("Error de conexi\xf3n")}finally{E(!1)}}},eD=async e=>{if(e.preventDefault(),N.trim()&&h){E(!0);try{let e=await fetch("/api/groups/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_name:N.trim(),group_id:h})}),r=await e.json();r.success?(u("Room creado exitosamente"),w(""),j(!1),await Promise.all([ev(),_?ek(_):Promise.resolve()])):r.error&&r.error.includes("ya existe")?x("Este Room ya existe"):x("Error creando room: "+r.error)}catch(e){console.error("Error:",e),x("Error de conexi\xf3n")}finally{E(!1)}}},eE=async e=>{try{console.log("\uD83D\uDD0D [FRONTEND] Haciendo clic en room:",e.room_name),q(e),G(!0),J(""),Q(""),console.log("\uD83D\uDD0D [FRONTEND] Cargando asignaciones para room ID:",e.id);let r=await fetch(`/api/room-assignments?roomId=${e.id}`),s=await r.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",s),s.success?(U(s.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones cargadas:",s.assignments?.length||0)):(console.error("‚ùå [FRONTEND] Error cargando asignaciones:",s.error),U([]))}catch(e){console.error("‚ùå [FRONTEND] Error en handleRoomClick:",e),U([])}},eC=async e=>{if(W){console.log("\uD83D\uDD0D [FRONTEND] Clic en jornada:",e),ee(e);try{let e=await fetch(`/api/groups/${W.group_id}/models`),r=await e.json();r.success?(es(r.models||[]),K(!0)):x("Error cargando modelos: "+r.error)}catch(e){console.error("‚ùå [FRONTEND] Error cargando modelos:",e),x("Error de conexi\xf3n")}}},eS=async e=>{el(e);try{let r=await fetch(`/api/models/${e.id}/assignments`),s=await r.json();s.success&&s.assignments.length>0?(ed({model:e,existingAssignments:s.assignments,newAssignment:{room_id:W?.id,room_name:W?.room_name,jornada:Y}}),eo(!0),K(!1)):await eL(e,"assign")}catch(e){console.error("‚ùå [FRONTEND] Error verificando asignaciones:",e),x("Error verificando asignaciones")}},eR=async(e,r=0)=>{try{r>0&&(console.log(`‚è≥ [FRONTEND] Esperando ${r}ms para sincronizaci\xf3n...`),await new Promise(e=>setTimeout(e,r))),console.log("\uD83D\uDD0D [FRONTEND] Recargando asignaciones para room ID:",e.id);let s=await fetch(`/api/room-assignments?roomId=${e.id}`),a=await s.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",a),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones raw:",a.assignments),a.success?(U(a.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones recibidas:",a.assignments?.length||0),console.log("\uD83D\uDD0D [FRONTEND] Estado actualizado con:",a.assignments)):(console.error("‚ùå [FRONTEND] Error recargando asignaciones:",a.error),U([]))}catch(e){console.error("‚ùå [FRONTEND] Error en reloadRoomAssignments:",e),U([])}},eL=async(e,r)=>{try{console.log("\uD83D\uDD0D [FRONTEND] Asignando modelo:",{model_id:e.id,model_name:e.name,room_id:W?.id,room_name:W?.room_name,jornada:Y,action:r});let s={action:r,model_id:e.id,room_id:W?.id,jornada:Y};if("move"===r&&en?.existingAssignments?.length>0){let e=en.existingAssignments[0];s.from_room_id=e.room_id,s.from_jornada=e.jornada}let a=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await a.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de asignaci\xf3n:",o),o.success?(console.log("‚úÖ [FRONTEND] Asignaci\xf3n exitosa, recargando asignaciones..."),Q(`Modelo ${"move"===r?"movida":"asignada"} exitosamente`),J(""),W&&(console.log("\uD83D\uDD0D [FRONTEND] Llamando a reloadRoomAssignments..."),await eR(W),console.log("‚úÖ [FRONTEND] reloadRoomAssignments completado")),K(!1),eo(!1),el(null),ed(null)):(console.error("‚ùå [FRONTEND] Error en asignaci\xf3n:",o.error),J("Error asignando modelo: "+o.error),Q(""))}catch(e){console.error("‚ùå [FRONTEND] Error asignando modelo:",e),J("Error de conexi\xf3n"),Q("")}},eO=e=>{eb(e),eu(!0)},eT=async()=>{if(eh&&W){if(eh.isDeleting){console.log("‚ö†Ô∏è [FRONTEND] Eliminaci\xf3n ya en progreso, ignorando...");return}eb({...eh,isDeleting:!0});try{console.log("\uD83D\uDD0D [FRONTEND] Eliminando asignaci\xf3n:",{model_id:eh.model_id,model_name:eh.model_name,room_id:W.id,room_name:W.room_name,jornada:eh.jornada});let e=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"remove",model_id:eh.model_id,room_id:W.id,jornada:eh.jornada})}),r=await e.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de eliminaci\xf3n:",r),r.success?(console.log("‚úÖ [FRONTEND] Eliminaci\xf3n exitosa, recargando asignaciones..."),Q(`Modelo eliminada exitosamente de ${eh.jornada}`),J(""),console.log("\uD83D\uDD04 [FRONTEND] Recargando asignaciones para sincronizar UI..."),await eR(W),console.log("‚úÖ [FRONTEND] Sincronizaci\xf3n completada")):(console.error("‚ùå [FRONTEND] Error en eliminaci\xf3n:",r.error),J("Error eliminando modelo: "+r.error),Q(""))}catch(e){console.error("‚ùå [FRONTEND] Error eliminando modelo:",e),J("Error de conexi\xf3n"),Q("")}finally{eu(!1),eb(null)}}},e_=async()=>{if(console.log("\uD83D\uDD0D [DELETE-ROOM] handleDeleteRoom ejecut\xe1ndose con:",em),!em){console.log("‚ùå [DELETE-ROOM] No hay room para eliminar");return}try{E(!0),x(""),u(""),console.log("\uD83D\uDD0D [FRONTEND] Eliminando room:",{room_id:em.id,room_name:em.room_name,group_id:em.group_id});let e=await fetch(`/api/groups/rooms?id=${em.id}`,{method:"DELETE"});console.log("\uD83D\uDD0D [DELETE-ROOM] Respuesta de API:",e.status);let r=await e.json();console.log("\uD83D\uDD0D [DELETE-ROOM] Resultado:",r),r.success?(u(r.message),x(""),await eN(),ec(!1),ex(null)):(x(r.error||"Error eliminando room"),u(""))}catch(e){console.error("‚ùå [DELETE-ROOM] Error eliminando room:",e),x("Error de conexi\xf3n eliminando room"),u("")}finally{E(!1)}};return i?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando datos..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[a.jsx("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Sedes"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Administra las sedes, rooms y configuraciones del sistema"})]})]})})]})}),"admin"===C&&0===A.length&&a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 backdrop-blur-sm rounded-xl p-6 border border-yellow-200/30",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Sin Sedes Asignadas"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No tienes sedes asignadas para gestionar. Contacta al Super Admin para que te asigne sedes."})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[a.jsx("div",{className:"flex flex-col h-full",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),(0,a.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar Sede"})]}),a.jsx(l.Z,{options:A.map(e=>({value:e.id,label:e.name})),value:_,onChange:e=>{M(e),b(e),e?ek(e):(H(null),P(null))},placeholder:"Selecciona una sede para gestionar",className:"text-sm"}),0===A.length&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"No hay sedes disponibles para gestionar"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col space-y-6 h-full",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),a.jsx("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Nueva Sede"})]}),a.jsx("button",{onClick:()=>f(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Sede"})]})})]}),_&&(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),a.jsx("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Room"})]}),a.jsx("button",{onClick:()=>j(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Room"})]})})]})]})]}),F&&(0,a.jsxs)("div",{className:"relative mb-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-xl blur-sm"}),(0,a.jsxs)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg shadow-md border border-white/20 dark:border-gray-600/20 p-4 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:F.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[F.rooms?.length||0," rooms configurados"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1.5 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Activa"})]})]}),z?(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm rounded-lg p-4 mb-4 border border-blue-200/30 dark:border-blue-700/30",children:[a.jsx("div",{className:"mb-3",children:a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Admin Asignado"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:z.name?.charAt(0)||"A"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:z.name}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:z.email}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:[z.user_groups?.length||0," sede",1!==(z.user_groups?.length||0)?"s":""," asignada",1!==(z.user_groups?.length||0)?"s":""]})]})]})]}):a.jsx("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 dark:from-yellow-900/20 dark:to-orange-900/20 backdrop-blur-sm rounded-xl p-5 mb-6 border border-yellow-200/30 dark:border-yellow-700/30",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No hay admin asignado a esta sede"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Rooms Disponibles"})]}),F.rooms&&F.rooms.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:F.rooms.map(e=>(0,a.jsxs)("div",{className:"inline-flex items-center group",children:[(0,a.jsxs)("button",{onClick:()=>eE(e),className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium bg-gradient-to-r from-gray-100 to-slate-100 dark:from-gray-600 dark:to-slate-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-slate-200 dark:hover:from-gray-500 dark:hover:to-slate-500 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 border border-gray-200/50 dark:border-gray-500/50",children:[a.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.room_name]}),a.jsx("button",{onClick:r=>{r.stopPropagation(),console.log("\uD83D\uDD0D [DELETE-ROOM] Bot\xf3n de eliminar clickeado:",e),ex(e),ec(!0)},className:"ml-1 p-1 rounded-full text-red-500 hover:bg-red-100 dark:hover:bg-red-900/20 opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Eliminar room",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))}):(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50/80 to-slate-50/80 dark:from-gray-600/80 dark:to-slate-600/80 backdrop-blur-sm rounded-xl p-6 text-center border border-gray-200/30 dark:border-gray-500/30",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"No hay rooms configurados en esta sede"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Usa el bot\xf3n "Crear Room" para agregar rooms'})]})]})]})]}),p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-500/10 to-slate-500/10 rounded-3xl blur-xl"}),(0,a.jsxs)("div",{className:"relative bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-3xl shadow-2xl p-8 w-full max-w-md dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-slate-700 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Crear Nueva Sede"})]}),(0,a.jsxs)("form",{onSubmit:ew,className:"space-y-6",children:[m&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-sm text-red-700 font-medium",children:m})]})}),g&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-sm text-green-700 font-medium",children:g})]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre de la Sede"}),a.jsx("input",{type:"text",value:v,onChange:e=>k(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: Sede Norte",required:!0})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),k("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-3 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:D,className:"flex-1 bg-gradient-to-r from-gray-700 to-slate-800 text-white py-3 px-4 rounded-xl hover:from-gray-800 hover:to-slate-900 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:D?"Creando...":"Crear Sede"})]})]})]})]})}),y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 rounded-3xl blur-xl"}),(0,a.jsxs)("div",{className:"relative bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-3xl shadow-2xl p-8 w-full max-w-md dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Crear Room"})]}),(0,a.jsxs)("form",{onSubmit:eD,className:"space-y-6",children:[m&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-sm text-red-700 font-medium",children:m})]})}),g&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-sm text-green-700 font-medium",children:g})]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Sede Seleccionada"}),a.jsx("div",{className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-gray-900 dark:text-gray-100 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:e.find(e=>e.id===h)?.name||"Ninguna sede seleccionada"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre del Room"}),a.jsx("input",{type:"text",value:N,onChange:e=>w(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-3 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: ROOM01",required:!0})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>{j(!1),w(""),b("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-3 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:D||!h,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:D?"Creando...":"Crear Room"})]})]})]})]})}),$&&W&&a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Configuraci\xf3n de ",W.room_name]}),a.jsx("button",{onClick:()=>{G(!1),q(null),U([]),J(""),Q("")},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),V&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:V})})]})}),Z&&a.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-green-800",children:Z})})]})}),a.jsx("div",{className:"space-y-4",children:["MA\xd1ANA","TARDE","NOCHE"].map(e=>{let r=I.filter(r=>r.jornada===e);return(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700/50",children:[(0,a.jsxs)("h3",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),e]}),r.length>0?a.jsx("div",{className:"space-y-2",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg p-2 -m-2 transition-colors group",onClick:()=>ef(e.model_id,e.model_email),title:"Ver portafolio de la modelo",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:(0,n.W)(e.model_email)||e.model_name||"Modelo no especificada"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.model_email||"Email no disponible"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:"Asignada"}),a.jsx("button",{onClick:()=>eO(e),className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors group bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/50 cursor-pointer",title:"Eliminar modelo de esta jornada",children:a.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 group-hover:text-red-700 dark:group-hover:text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))}):(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",onClick:()=>eC(e),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"No hay modelos asignadas"}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Haz clic para asignar"})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-500 text-gray-600 dark:text-gray-300",children:"Disponible"})})]})]},e)})}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:a.jsx("button",{onClick:()=>{G(!1),q(null),U([])},className:"w-full bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cerrar"})})]})}),X&&a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl p-6 w-full max-w-md max-h-[80vh] overflow-y-auto dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Seleccionar Modelo para ",Y]}),a.jsx("button",{onClick:()=>{K(!1),es([]),ee("")},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"space-y-2",children:er.map(e=>a.jsx("button",{onClick:()=>eS(e),className:"w-full text-left p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name||"Nombre no disponible"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.email||"Email no disponible"})]})]})},e.id))}),0===er.length&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No hay modelos disponibles"})})]})}),ea&&en&&a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl p-6 w-full max-w-md dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Conflicto de Asignaci\xf3n"}),a.jsx("button",{onClick:()=>{eo(!1),ed(null),el(null)},className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:[a.jsx("strong",{children:en.model.name})," ya est\xe1 asignada en:"]}),a.jsx("div",{className:"space-y-2",children:en.existingAssignments.map((e,r)=>a.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.room_name," - ",e.jornada]})]})},r))}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-3",children:"\xbfQu\xe9 deseas hacer?"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>eL(en.model,"move"),className:"flex-1 bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Mover"}),a.jsx("button",{onClick:()=>eL(en.model,"assign"),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Doblar"})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Mover:"})," Desasigna de ubicaci\xf3n actual y asigna aqu\xed"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Doblar:"})," Mantiene ubicaci\xf3n actual y asigna tambi\xe9n aqu\xed"]})]})]})}),eg&&eh&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/10 to-orange-500/10 rounded-3xl blur-xl"}),(0,a.jsxs)("div",{className:"relative bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-3xl shadow-2xl p-8 w-full max-w-md dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Confirmar Eliminaci\xf3n"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar a ",a.jsx("strong",{children:eh.model_name})," de la jornada ",a.jsx("strong",{children:eh.jornada}),"?"]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:eh.model_name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:eh.model_email})]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{eu(!1),eb(null)},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-3 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50",children:"Cancelar"}),a.jsx("button",{onClick:eT,disabled:eh?.isDeleting,className:`flex-1 py-3 px-4 rounded-xl transition-all duration-200 font-medium shadow-lg ${eh?.isDeleting?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700 hover:shadow-xl transform hover:-translate-y-0.5"}`,children:eh?.isDeleting?"Eliminando...":"Eliminar"})]})]})]})}),ei&&em&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/10 to-orange-500/10 rounded-3xl blur-xl"}),(0,a.jsxs)("div",{className:"relative bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-3xl shadow-2xl p-8 w-full max-w-md dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Confirmar Eliminaci\xf3n de Room"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar el room ",a.jsx("strong",{children:em.room_name}),"?"]}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Advertencia"}),a.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Esta acci\xf3n no se puede deshacer. Si el room tiene asignaciones activas, no se podr\xe1 eliminar."})]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Cancelando eliminaci\xf3n"),ec(!1),ex(null)},className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Confirmando eliminaci\xf3n de:",em),e_()},disabled:D,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:D?"Eliminando...":"Eliminar Room"})]})]})]})})]})})}},71145:(e,r,s)=>{"use strict";s.d(r,{Z:()=>l});var a=s(95344),o=s(3729);let t={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function l({options:e,value:r,onChange:s,placeholder:l="Selecciona una opci\xf3n",className:n="",disabled:d=!1,maxHeight:i="max-h-60",autoOpen:c=!1}){let[m,x]=(0,o.useState)(!1),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{c&&e.length>1?x(!0):c||x(!1)},[c,e.length]),(0,o.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(()=>{m&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[m]);let u=e.find(e=>e.value===r),h=e=>{s(e),x(!1)};return(0,a.jsxs)("div",{className:`relative ${n}`,ref:g,children:[a.jsx("button",{type:"button",className:`w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ${d?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!d&&x(!m),disabled:d,"aria-haspopup":"listbox","aria-expanded":m,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{className:u?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:u?u.label:l}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[u?.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t[u.badgeColor||"gray"]}`,children:u.badge}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),m&&a.jsx("div",{className:`absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ${i} overflow-auto apple-scroll`,children:0===e.length?a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):e.map((e,s)=>(0,a.jsxs)("div",{children:[s>0&&a.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:`px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"} ${e.value===r?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""}`,onClick:()=>!e.disabled&&h(e.value),children:[a.jsx("span",{children:e.label}),e.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t[e.badgeColor||"gray"]}`,children:e.badge})]})]},e.value))})]})}},33265:(e,r,s)=>{"use strict";s.d(r,{W:()=>a});let a=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""},37939:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>t,__esModule:()=>o,default:()=>l});let a=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\sedes\gestionar\page.tsx`),{__esModule:o,$$typeof:t}=a,l=a.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[1638,6611,6654,551,9609,1110],()=>s(16833));module.exports=a})();