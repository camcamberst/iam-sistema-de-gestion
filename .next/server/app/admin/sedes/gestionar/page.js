(()=>{var e={};e.id=6192,e.ids=[6192],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},16833:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>d});var a=s(50482),o=s(69108),t=s(62563),n=s.n(t),l=s(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(r,i);let d=["",{children:["admin",{children:["sedes",{children:["gestionar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,37939)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\sedes\\gestionar\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\sedes\\gestionar\\page.tsx"],m="/admin/sedes/gestionar/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/sedes/gestionar/page",pathname:"/admin/sedes/gestionar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34263:(e,r,s)=>{Promise.resolve().then(s.bind(s,52431))},52431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var a=s(95344),o=s(3729),t=s(22254),n=s(71145),l=s(43995),i=s(33265);function d(){let[e,r]=(0,o.useState)([]),[s,d]=(0,o.useState)([]),[c,m]=(0,o.useState)(!0),[x,g]=(0,o.useState)(""),[u,h]=(0,o.useState)(""),[b,p]=(0,o.useState)(""),[f,y]=(0,o.useState)(!1),[j,v]=(0,o.useState)(!1),[N,k]=(0,o.useState)(""),[w,D]=(0,o.useState)(""),[E,C]=(0,o.useState)(!1),[S,R]=(0,o.useState)(""),[O,L]=(0,o.useState)([]),[T,_]=(0,o.useState)(""),[M,A]=(0,o.useState)(""),[B,F]=(0,o.useState)([]),[H,$]=(0,o.useState)(null),[W,P]=(0,o.useState)(null),[G,z]=(0,o.useState)(!1),[q,I]=(0,o.useState)(null),[U,V]=(0,o.useState)([]),[Z,J]=(0,o.useState)(""),[Y,Q]=(0,o.useState)(""),[X,K]=(0,o.useState)(!1),[ee,er]=(0,o.useState)(""),[es,ea]=(0,o.useState)([]),[eo,et]=(0,o.useState)(!1),[en,el]=(0,o.useState)(null),[ei,ed]=(0,o.useState)(null),[ec,em]=(0,o.useState)(!1),[ex,eg]=(0,o.useState)(null),[eu,eh]=(0,o.useState)(!1),[eb,ep]=(0,o.useState)(null),ef=(0,t.useRouter)(),ey=(e,r)=>{ef.push(`/admin/sedes/portafolio?model=${e}&email=${encodeURIComponent(r)}`)};(0,o.useEffect)(()=>{window.scrollTo(0,0),ej()},[]),(0,o.useEffect)(()=>{S&&""!==S&&(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Ejecutando useEffect con:",{userRole:S,userGroups:O}),ew(),ev())},[S,O]);let ej=()=>{try{let e=localStorage.getItem("user");if(e){let r=JSON.parse(e);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Datos del usuario desde localStorage:",{id:r.id,role:r.role,groups:r.groups}),R(r.role||"admin");let s=r.groups?.map(e=>e.id)||[];console.log("\uD83D\uDD0D [GESTIONAR-SEDES] IDs de grupos extra\xeddos:",s),L(s),_(r.id||"")}}catch(e){console.warn("Error parsing user data from localStorage:",e)}},ev=async()=>{try{if(!S||""===S){console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Saltando carga de sedes - userRole vac\xedo");return}console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Cargando sedes disponibles con:",{userRole:S,userGroups:O});let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:S,userGroups:O})}),r=await e.json();if(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Respuesta de API:",r),!r.success)return;let s=r.groups.filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Sedes operativas filtradas:",s),F(s),A(""),p("")}catch(e){console.error("Error cargando sedes disponibles:",e)}},eN=async()=>{try{console.log("\uD83D\uDD04 [FRONTEND] Recargando solo rooms...");let e=await fetch("/api/groups/rooms");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.json();r.success?(d(r.rooms||[]),console.log("âœ… [FRONTEND] Rooms actualizados:",r.rooms?.length||0)):console.error("âŒ [FRONTEND] Error cargando rooms:",r.error)}catch(e){console.error("âŒ [FRONTEND] Error recargando rooms:",e)}},ek=async e=>{try{let r=B.find(r=>r.id===e);if(!r)return;let s=await fetch("/api/groups/rooms"),a=await s.json();if(a.success){let s=a.rooms.filter(r=>r.group_id===e);$({...r,rooms:s})}let o=await fetch("/api/users"),t=await o.json();if(t.success){console.log("\uD83D\uDD0D [DEBUG] Buscando admin para sede:",e),console.log("\uD83D\uDD0D [DEBUG] Todos los usuarios:",t.users.length);let r=t.users.filter(e=>"admin"===e.role);console.log("\uD83D\uDD0D [DEBUG] Solo admins:",r.length);let s=r.filter(r=>{let s=r.user_groups?.some(r=>r.id===e);return console.log(`ğŸ” [DEBUG] Admin ${r.name}:`,{user_groups:r.user_groups,tieneEstaSede:s,sedeId:e,sedesAsignadas:r.user_groups?.length||0}),s});console.log("\uD83D\uDD0D [DEBUG] Admins asignados a esta sede:",s.length);let a=null;s.length>0&&(1===s.length?(a=s[0],console.log("\uD83D\uDD0D [DEBUG] Solo un admin asignado:",a.name)):(a=s.reduce((e,r)=>{let s=e.user_groups?.length||0,a=r.user_groups?.length||0;return console.log(`ğŸ” [DEBUG] Comparando: ${e.name} (${s} sedes) vs ${r.name} (${a} sedes)`),a<s?r:e}),console.log("\uD83D\uDD0D [DEBUG] Admin seleccionado (menos sedes):",a.name,`(${a.user_groups?.length||0} sedes)`))),console.log("\uD83D\uDD0D [DEBUG] Admin final seleccionado:",a),P(a)}}catch(e){console.error("Error cargando informaci\xf3n de la sede:",e)}},ew=async()=>{try{m(!0),g("");let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:S,userGroups:O})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let s=await e.json();if(s.success){let e=(s.groups||[]).filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);r(e),e.length>0&&p(e[0].id)}else g("Error cargando sedes: "+(s.error||"Error desconocido"));let a=await fetch("/api/groups/rooms");if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let o=await a.json();o.success?d(o.rooms||[]):g("Error cargando rooms: "+(o.error||"Error desconocido"))}catch(e){console.error("Error cargando datos:",e),g("Error de conexi\xf3n: "+(e instanceof Error?e.message:"Error desconocido"))}finally{m(!1)}},eD=async e=>{if(e.preventDefault(),N.trim()){C(!0);try{let e=localStorage.getItem("supabase.auth.token"),r={"Content-Type":"application/json"};e&&(r.Authorization=`Bearer ${e}`);let s=await fetch("/api/groups",{method:"POST",headers:r,body:JSON.stringify({name:N.trim()})}),a=await s.json();a.success?(h("Sede creada exitosamente"),k(""),y(!1),ew()):g("Error creando sede: "+a.error)}catch(e){console.error("Error:",e),g("Error de conexi\xf3n")}finally{C(!1)}}},eE=async e=>{if(e.preventDefault(),w.trim()&&b){C(!0);try{let e=await fetch("/api/groups/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_name:w.trim(),group_id:b})}),r=await e.json();r.success?(h("Room creado exitosamente"),D(""),v(!1),await Promise.all([eN(),M?ek(M):Promise.resolve()])):r.error&&r.error.includes("ya existe")?g("Este Room ya existe"):g("Error creando room: "+r.error)}catch(e){console.error("Error:",e),g("Error de conexi\xf3n")}finally{C(!1)}}},eC=async e=>{try{console.log("\uD83D\uDD0D [FRONTEND] Haciendo clic en room:",e.room_name),I(e),z(!0),J(""),Q(""),console.log("\uD83D\uDD0D [FRONTEND] Cargando asignaciones para room ID:",e.id);let r=await fetch(`/api/room-assignments?roomId=${e.id}`),s=await r.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",s),s.success?(V(s.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones cargadas:",s.assignments?.length||0)):(console.error("âŒ [FRONTEND] Error cargando asignaciones:",s.error),V([]))}catch(e){console.error("âŒ [FRONTEND] Error en handleRoomClick:",e),V([])}},eS=async e=>{if(q){console.log("\uD83D\uDD0D [FRONTEND] Clic en jornada:",e),er(e);try{let e=await fetch(`/api/groups/${q.group_id}/models`),r=await e.json();r.success?(ea(r.models||[]),K(!0)):g("Error cargando modelos: "+r.error)}catch(e){console.error("âŒ [FRONTEND] Error cargando modelos:",e),g("Error de conexi\xf3n")}}},eR=async e=>{el(e);try{let r=await fetch(`/api/models/${e.id}/assignments`),s=await r.json();s.success&&s.assignments.length>0?(ed({model:e,existingAssignments:s.assignments,newAssignment:{room_id:q?.id,room_name:q?.room_name,jornada:ee}}),et(!0),K(!1)):await eL(e,"assign")}catch(e){console.error("âŒ [FRONTEND] Error verificando asignaciones:",e),g("Error verificando asignaciones")}},eO=async(e,r=0)=>{try{r>0&&(console.log(`â³ [FRONTEND] Esperando ${r}ms para sincronizaci\xf3n...`),await new Promise(e=>setTimeout(e,r))),console.log("\uD83D\uDD0D [FRONTEND] Recargando asignaciones para room ID:",e.id);let s=await fetch(`/api/room-assignments?roomId=${e.id}`),a=await s.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",a),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones raw:",a.assignments),a.success?(V(a.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones recibidas:",a.assignments?.length||0),console.log("\uD83D\uDD0D [FRONTEND] Estado actualizado con:",a.assignments)):(console.error("âŒ [FRONTEND] Error recargando asignaciones:",a.error),V([]))}catch(e){console.error("âŒ [FRONTEND] Error en reloadRoomAssignments:",e),V([])}},eL=async(e,r)=>{try{console.log("\uD83D\uDD0D [FRONTEND] Asignando modelo:",{model_id:e.id,model_name:e.name,room_id:q?.id,room_name:q?.room_name,jornada:ee,action:r});let s={action:r,model_id:e.id,room_id:q?.id,jornada:ee};if("move"===r&&ei?.existingAssignments?.length>0){let e=ei.existingAssignments[0];s.from_room_id=e.room_id,s.from_jornada=e.jornada}let a=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await a.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de asignaci\xf3n:",o),o.success?(console.log("âœ… [FRONTEND] Asignaci\xf3n exitosa, recargando asignaciones..."),Q(`Modelo ${"move"===r?"movida":"asignada"} exitosamente`),J(""),q&&(console.log("\uD83D\uDD0D [FRONTEND] Llamando a reloadRoomAssignments..."),await eO(q),console.log("âœ… [FRONTEND] reloadRoomAssignments completado")),K(!1),et(!1),el(null),ed(null)):(console.error("âŒ [FRONTEND] Error en asignaci\xf3n:",o.error),J("Error asignando modelo: "+o.error),Q(""))}catch(e){console.error("âŒ [FRONTEND] Error asignando modelo:",e),J("Error de conexi\xf3n"),Q("")}},eT=e=>{ep(e),eh(!0)},e_=async()=>{if(eb&&q){if(eb.isDeleting){console.log("âš ï¸ [FRONTEND] Eliminaci\xf3n ya en progreso, ignorando...");return}ep({...eb,isDeleting:!0});try{console.log("\uD83D\uDD0D [FRONTEND] Eliminando asignaci\xf3n:",{model_id:eb.model_id,model_name:eb.model_name,room_id:q.id,room_name:q.room_name,jornada:eb.jornada});let e=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"remove",model_id:eb.model_id,room_id:q.id,jornada:eb.jornada})}),r=await e.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de eliminaci\xf3n:",r),r.success?(console.log("âœ… [FRONTEND] Eliminaci\xf3n exitosa, recargando asignaciones..."),Q(`Modelo eliminada exitosamente de ${eb.jornada}`),J(""),console.log("\uD83D\uDD04 [FRONTEND] Recargando asignaciones para sincronizar UI..."),await eO(q),console.log("âœ… [FRONTEND] Sincronizaci\xf3n completada")):(console.error("âŒ [FRONTEND] Error en eliminaci\xf3n:",r.error),J("Error eliminando modelo: "+r.error),Q(""))}catch(e){console.error("âŒ [FRONTEND] Error eliminando modelo:",e),J("Error de conexi\xf3n"),Q("")}finally{eh(!1),ep(null)}}},eM=async()=>{if(console.log("\uD83D\uDD0D [DELETE-ROOM] handleDeleteRoom ejecut\xe1ndose con:",ex),!ex){console.log("âŒ [DELETE-ROOM] No hay room para eliminar");return}try{C(!0),g(""),h(""),console.log("\uD83D\uDD0D [FRONTEND] Eliminando room:",{room_id:ex.id,room_name:ex.room_name,group_id:ex.group_id});let e=await fetch(`/api/groups/rooms?id=${ex.id}`,{method:"DELETE"});console.log("\uD83D\uDD0D [DELETE-ROOM] Respuesta de API:",e.status);let r=await e.json();console.log("\uD83D\uDD0D [DELETE-ROOM] Resultado:",r),r.success?(h(r.message),g(""),M&&await ek(M),em(!1),eg(null)):(g(r.error||"Error eliminando room"),h(""))}catch(e){console.error("âŒ [DELETE-ROOM] Error eliminando room:",e),g("Error de conexi\xf3n eliminando room"),h("")}finally{C(!1)}};return c?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando datos..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[a.jsx("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Sedes"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Administra las sedes, rooms y configuraciones del sistema"})]})]})})]})}),"admin"===S&&0===B.length&&a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 backdrop-blur-sm rounded-xl p-6 border border-yellow-200/30",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Sin Sedes Asignadas"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No tienes sedes asignadas para gestionar. Contacta al Super Admin para que te asigne sedes."})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[a.jsx("div",{className:"flex flex-col h-full",children:(0,a.jsxs)("div",{className:"relative flex-1 z-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),(0,a.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar Sede"})]}),a.jsx(n.Z,{options:B.map(e=>({value:e.id,label:e.name})),value:M,onChange:e=>{A(e),p(e),e?ek(e):($(null),P(null))},placeholder:"Selecciona una sede para gestionar",className:"text-sm"}),0===B.length&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"No hay sedes disponibles para gestionar"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col space-y-6 h-full",children:["super_admin"===S&&(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),a.jsx("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Nueva Sede"})]}),a.jsx("button",{onClick:()=>y(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Sede"})]})})]}),M&&(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),a.jsx("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Room"})]}),a.jsx("button",{onClick:()=>v(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Room"})]})})]})]})]}),H&&(0,a.jsxs)("div",{className:"relative mb-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-xl blur-sm"}),(0,a.jsxs)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg shadow-md border border-white/20 dark:border-gray-600/20 p-4 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:H.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[H.rooms?.length||0," rooms configurados"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1.5 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Activa"})]})]}),W?(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm rounded-lg p-4 mb-4 border border-blue-200/30 dark:border-blue-700/30",children:[a.jsx("div",{className:"mb-3",children:a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Admin Asignado"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:W.name?.charAt(0)||"A"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:W.name}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:W.email}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:[W.user_groups?.length||0," sede",1!==(W.user_groups?.length||0)?"s":""," asignada",1!==(W.user_groups?.length||0)?"s":""]})]})]})]}):a.jsx("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 dark:from-yellow-900/20 dark:to-orange-900/20 backdrop-blur-sm rounded-xl p-5 mb-6 border border-yellow-200/30 dark:border-yellow-700/30",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No hay admin asignado a esta sede"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Rooms Disponibles"})]}),H.rooms&&H.rooms.length>0?a.jsx("div",{className:"flex flex-wrap gap-1.5",children:H.rooms.map(e=>a.jsx("div",{className:"inline-flex items-center",children:(0,a.jsxs)("button",{onClick:()=>eC(e),className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-gradient-to-r from-gray-100 to-slate-100 dark:from-gray-600 dark:to-slate-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-slate-200 dark:hover:from-gray-500 dark:hover:to-slate-500 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 border border-gray-200/50 dark:border-gray-500/50",children:[a.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.room_name]})},e.id))}):(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50/80 to-slate-50/80 dark:from-gray-600/80 dark:to-slate-600/80 backdrop-blur-sm rounded-xl p-6 text-center border border-gray-200/30 dark:border-gray-500/30",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"No hay rooms configurados en esta sede"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Usa el bot\xf3n "Crear Room" para agregar rooms'})]})]})]})]}),f&&"super_admin"===S&&(0,a.jsxs)(l.Z,{isOpen:f,onClose:()=>y(!1),title:"Crear Nueva Sede",maxWidthClass:"max-w-lg",paddingClass:"p-7",headerMarginClass:"mb-5",formSpaceYClass:"space-y-5",children:[a.jsx("div",{className:"flex items-center space-x-3 mb-5",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-slate-700 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})}),(0,a.jsxs)("form",{onSubmit:eD,className:"space-y-5",children:[x&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-sm text-red-700 font-medium",children:x})]})}),u&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-sm text-green-700 font-medium",children:u})]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre de la Sede"}),a.jsx("input",{type:"text",value:N,onChange:e=>k(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: Sede Norte",required:!0})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2 flex-nowrap",children:[a.jsx("button",{type:"button",onClick:()=>{y(!1),k("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-2 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50 text-sm whitespace-nowrap",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:E,className:"flex-1 bg-gradient-to-r from-gray-700 to-slate-800 text-white py-2 px-4 rounded-xl hover:from-gray-800 hover:to-slate-900 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm whitespace-nowrap",children:E?"Creando...":"Crear Sede"})]})]})]}),j&&(0,a.jsxs)(l.Z,{isOpen:j,onClose:()=>v(!1),title:"Crear Room",maxWidthClass:"max-w-lg",paddingClass:"p-7",headerMarginClass:"mb-5",formSpaceYClass:"space-y-5",children:[a.jsx("div",{className:"flex items-center space-x-3 mb-5",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})}),(0,a.jsxs)("form",{onSubmit:eE,className:"space-y-5",children:[x&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-sm text-red-700 font-medium",children:x})]})}),u&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-sm text-green-700 font-medium",children:u})]})}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Sede Seleccionada"}),a.jsx("div",{className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:e.find(e=>e.id===b)?.name||"Ninguna sede seleccionada"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre del Room"}),a.jsx("input",{type:"text",value:w,onChange:e=>D(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: ROOM01",required:!0})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-2 flex-nowrap",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),D(""),p("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-2 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50 text-sm whitespace-nowrap",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:E||!b,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm whitespace-nowrap",children:E?"Creando...":"Crear Room"})]})]})]}),G&&q&&(0,a.jsxs)(l.Z,{isOpen:G,onClose:()=>{z(!1),I(null),V([])},title:`Configuraci\xf3n de ${q.room_name}`,maxWidthClass:"max-w-2xl",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:()=>{eg(q),em(!0)},className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors border border-red-200/60 dark:border-red-700/40",title:"Eliminar room",children:(0,a.jsxs)("span",{className:"inline-flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})})})}),Z&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800",children:Z})})]})}),Y&&a.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-green-800",children:Y})})]})}),a.jsx("div",{className:"space-y-4",children:["MA\xd1ANA","TARDE","NOCHE"].map(e=>{let r=U.filter(r=>r.jornada===e);return(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700/50",children:[(0,a.jsxs)("h3",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),e]}),r.length>0?a.jsx("div",{className:"space-y-2",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg p-2 -m-2 transition-colors group",onClick:()=>ey(e.model_id,e.model_email),title:"Ver portafolio de la modelo",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:(0,i.W)(e.model_email)||e.model_name||"Modelo no especificada"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.model_email||"Email no disponible"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:"Asignada"}),a.jsx("button",{onClick:()=>eT(e),className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors group bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/50 cursor-pointer",title:"Eliminar modelo de esta jornada",children:a.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 group-hover:text-red-700 dark:group-hover:text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))}):(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",onClick:()=>eS(e),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"No hay modelos asignadas"}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Haz clic para asignar"})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-500 text-gray-600 dark:text-gray-300",children:"Disponible"})})]})]},e)})}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:a.jsx("button",{onClick:()=>{z(!1),I(null),V([])},className:"w-full bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cerrar"})})]}),X&&(0,a.jsxs)(l.Z,{isOpen:X,onClose:()=>{K(!1),ea([]),er("")},title:`Seleccionar Modelo para ${ee}`,maxWidthClass:"max-w-md",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[a.jsx("div",{className:"space-y-2",children:es.map(e=>a.jsx("button",{onClick:()=>eR(e),className:"w-full text-left p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name||"Nombre no disponible"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.email||"Email no disponible"})]})]})},e.id))}),0===es.length&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No hay modelos disponibles"})})]}),eo&&ei&&(0,a.jsxs)(l.Z,{isOpen:eo,onClose:()=>{et(!1),ed(null),el(null)},title:"Conflicto de Asignaci\xf3n",maxWidthClass:"max-w-md",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:[a.jsx("strong",{children:ei.model.name})," ya est\xe1 asignada en:"]}),a.jsx("div",{className:"space-y-2",children:ei.existingAssignments.map((e,r)=>a.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.room_name," - ",e.jornada]})]})},r))}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-3",children:"\xbfQu\xe9 deseas hacer?"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>eL(ei.model,"move"),className:"flex-1 bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Mover"}),a.jsx("button",{onClick:()=>eL(ei.model,"assign"),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Doblar"})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Mover:"})," Desasigna de ubicaci\xf3n actual y asigna aqu\xed"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"Doblar:"})," Mantiene ubicaci\xf3n actual y asigna tambi\xe9n aqu\xed"]})]})]}),eu&&eb&&(0,a.jsxs)(l.Z,{isOpen:eu,onClose:()=>{eh(!1),ep(null)},title:"Confirmar Eliminaci\xf3n",maxWidthClass:"max-w-md",paddingClass:"p-8",headerMarginClass:"mb-6",formSpaceYClass:"space-y-6",children:[a.jsx("div",{className:"flex items-center space-x-3 mb-6",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar a ",a.jsx("strong",{children:eb.model_name})," de la jornada ",a.jsx("strong",{children:eb.jornada}),"?"]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:eb.model_name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:eb.model_email})]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{eh(!1),ep(null)},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-3 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50",children:"Cancelar"}),a.jsx("button",{onClick:e_,disabled:eb?.isDeleting,className:`flex-1 py-3 px-4 rounded-xl transition-all duration-200 font-medium shadow-lg ${eb?.isDeleting?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700 hover:shadow-xl transform hover:-translate-y-0.5"}`,children:eb?.isDeleting?"Eliminando...":"Eliminar"})]})]}),ec&&ex&&(0,a.jsxs)(l.Z,{isOpen:ec,onClose:()=>{em(!1),eg(null)},title:"Confirmar Eliminaci\xf3n de Room",maxWidthClass:"max-w-md",paddingClass:"p-8",headerMarginClass:"mb-6",formSpaceYClass:"space-y-6",children:[a.jsx("div",{className:"flex items-center space-x-3 mb-6",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar el room ",a.jsx("strong",{children:ex.room_name}),"?"]}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Advertencia"}),a.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Esta acci\xf3n no se puede deshacer. Si el room tiene asignaciones activas, no se podr\xe1 eliminar."})]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Cancelando eliminaci\xf3n"),em(!1),eg(null)},className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Confirmando eliminaci\xf3n de:",ex),eM()},disabled:E,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Eliminando...":"Eliminar Room"})]})]})]})})}},71145:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var a=s(95344),o=s(3729);let t={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function n({options:e,value:r,onChange:s,placeholder:n="Selecciona una opci\xf3n",className:l="",disabled:i=!1,maxHeight:d="max-h-60",autoOpen:c=!1}){let[m,x]=(0,o.useState)(!1),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{c&&e.length>1?x(!0):c||x(!1)},[c,e.length]),(0,o.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(()=>{m&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[m]);let u=e.find(e=>e.value===r),h=e=>{s(e),x(!1)};return(0,a.jsxs)("div",{className:`relative ${l}`,ref:g,children:[a.jsx("button",{type:"button",className:`w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ${i?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!i&&x(!m),disabled:i,"aria-haspopup":"listbox","aria-expanded":m,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{className:u?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:u?u.label:n}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[u?.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t[u.badgeColor||"gray"]}`,children:u.badge}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),m&&a.jsx("div",{className:`absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ${d} overflow-auto apple-scroll`,children:0===e.length?a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):e.map((e,s)=>(0,a.jsxs)("div",{children:[s>0&&a.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:`px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"} ${e.value===r?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""}`,onClick:()=>!e.disabled&&h(e.value),children:[a.jsx("span",{children:e.label}),e.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t[e.badgeColor||"gray"]}`,children:e.badge})]})]},e.value))})]})}},33265:(e,r,s)=>{"use strict";s.d(r,{W:()=>a});let a=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""},37939:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>t,__esModule:()=>o,default:()=>n});let a=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\sedes\gestionar\page.tsx`),{__esModule:o,$$typeof:t}=a,n=a.default}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[1638,6611,6654,551,7954,1110],()=>s(16833));module.exports=a})();