(()=>{var e={};e.id=7619,e.ids=[7619],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},83251:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=r(50482),a=r(69108),i=r(62563),n=r.n(i),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let c=["",{children:["admin",{children:["cleanup-portfolios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,66949)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\cleanup-portfolios\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\cleanup-portfolios\\page.tsx"],m="/admin/cleanup-portfolios/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/cleanup-portfolios/page",pathname:"/admin/cleanup-portfolios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38411:(e,s,r)=>{Promise.resolve().then(r.bind(r,68795))},68795:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(95344),a=r(3729);function i(){let[e,s]=(0,a.useState)(!1),[r,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),l=async()=>{try{s(!0),o(null),i(null);let e=await fetch("/api/cleanup-incorrect-portfolios",{method:"POST",headers:{"Content-Type":"application/json"}}),r=await e.json();r.success?i(r):o(r.error||"Error desconocido")}catch(e){o(e.message||"Error de conexi\xf3n")}finally{s(!1)}};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50 to-orange-50 pt-24",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDF9 Limpiar Portafolios Incorrectos"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Esta herramienta elimina los portafolios que se crearon incorrectamente durante la sincronizaci\xf3n autom\xe1tica, que hered\xf3 el mismo portafolio a todas las modelos."}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"⚠️ \xbfQu\xe9 hace esta limpieza?"}),(0,t.jsxs)("ul",{className:"text-red-800 space-y-1 text-sm",children:[t.jsx("li",{children:'• Busca portafolios creados con "Sincronizaci\xf3n autom\xe1tica de configuraci\xf3n existente"'}),t.jsx("li",{children:"• Los elimina completamente de la base de datos"}),t.jsx("li",{children:"• Permite que cada modelo configure su calculadora individualmente"}),t.jsx("li",{children:"• Restaura el estado original antes de la sincronizaci\xf3n incorrecta"})]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"⚠️ Importante"}),t.jsx("p",{className:"text-yellow-800 text-sm",children:"Esta acci\xf3n es irreversible. Los portafolios eliminados tendr\xe1n que ser configurados nuevamente cuando cada modelo configure su calculadora por primera vez."})]}),t.jsx("button",{onClick:l,disabled:e,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:e?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{children:"Limpiando..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{children:"\uD83E\uDDF9"}),t.jsx("span",{children:"Ejecutar Limpieza"})]})}),n&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"❌ Error"}),t.jsx("p",{className:"text-red-800 text-sm",children:n})]}),r&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"✅ Limpieza Completada"}),t.jsx("p",{className:"text-green-800 text-sm mb-4",children:r.message}),r.results&&r.results.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-medium text-green-900",children:"Portafolios eliminados por modelo:"}),t.jsx("div",{className:"space-y-1",children:r.results.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx("span",{className:"text-green-600",children:"✅"}),(0,t.jsxs)("span",{className:"text-green-800",children:[e.email,": ",e.platforms_deleted," portafolios eliminados"]})]},s))})]})]})]})]})})})})}},66949:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let t=(0,r(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\cleanup-portfolios\page.tsx`),{__esModule:a,$$typeof:i}=t,n=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[1638,6611,5558,5094,9609,1110],()=>r(83251));module.exports=t})();