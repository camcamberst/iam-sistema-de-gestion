(()=>{var e={};e.id=7619,e.ids=[7619],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},83251:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=s(50482),a=s(69108),i=s(62563),o=s.n(i),n=s(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(r,l);let c=["",{children:["admin",{children:["cleanup-portfolios",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,66949)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\cleanup-portfolios\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\cleanup-portfolios\\page.tsx"],m="/admin/cleanup-portfolios/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/cleanup-portfolios/page",pathname:"/admin/cleanup-portfolios",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38411:(e,r,s)=>{Promise.resolve().then(s.bind(s,68795))},68795:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(95344),a=s(3729);function i(){let[e,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),[o,n]=(0,a.useState)(null),l=async()=>{try{r(!0),n(null),i(null);let e=await fetch("/api/cleanup-incorrect-portfolios",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();s.success?i(s):n(s.error||"Error desconocido")}catch(e){n(e.message||"Error de conexi\xf3n")}finally{r(!1)}};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50 to-orange-50 pt-24",children:t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDF9 Limpiar Portafolios Incorrectos"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Esta herramienta elimina los portafolios que se crearon incorrectamente durante la sincronizaci\xf3n autom\xe1tica, que hered\xf3 el mismo portafolio a todas las modelos."}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"⚠️ \xbfQu\xe9 hace esta limpieza?"}),(0,t.jsxs)("ul",{className:"text-red-800 space-y-1 text-sm",children:[t.jsx("li",{children:'• Busca portafolios creados con "Sincronizaci\xf3n autom\xe1tica de configuraci\xf3n existente"'}),t.jsx("li",{children:"• Los elimina completamente de la base de datos"}),t.jsx("li",{children:"• Permite que cada modelo configure su calculadora individualmente"}),t.jsx("li",{children:"• Restaura el estado original antes de la sincronizaci\xf3n incorrecta"})]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"⚠️ Importante"}),t.jsx("p",{className:"text-yellow-800 text-sm",children:"Esta acci\xf3n es irreversible. Los portafolios eliminados tendr\xe1n que ser configurados nuevamente cuando cada modelo configure su calculadora por primera vez."})]}),t.jsx("button",{onClick:l,disabled:e,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:e?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{children:"Limpiando..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{children:"\uD83E\uDDF9"}),t.jsx("span",{children:"Ejecutar Limpieza"})]})}),o&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"❌ Error"}),t.jsx("p",{className:"text-red-800 text-sm",children:o})]}),s&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"✅ Limpieza Completada"}),t.jsx("p",{className:"text-green-800 text-sm mb-4",children:s.message}),s.results&&s.results.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-medium text-green-900",children:"Portafolios eliminados por modelo:"}),t.jsx("div",{className:"space-y-1",children:s.results.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx("span",{className:"text-green-600",children:"✅"}),(0,t.jsxs)("span",{className:"text-green-800",children:[e.email,": ",e.platforms_deleted," portafolios eliminados"]})]},r))})]})]})]})]})})})})}},97075:(e,r,s)=>{"use strict";s.d(r,{Z:()=>m});var t=s(3729);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase()),o=e=>{let r=i(e);return r.charAt(0).toUpperCase()+r.slice(1)},n=(...e)=>e.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim(),l=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:o,iconNode:d,...m},u)=>(0,t.createElement)("svg",{ref:u,...c,width:r,height:r,stroke:e,strokeWidth:a?24*Number(s)/Number(r):s,className:n("lucide",i),...!o&&!l(m)&&{"aria-hidden":"true"},...m},[...d.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),m=(e,r)=>{let s=(0,t.forwardRef)(({className:s,...i},l)=>(0,t.createElement)(d,{ref:l,iconNode:r,className:n(`lucide-${a(o(e))}`,`lucide-${e}`,s),...i}));return s.displayName=o(e),s}},25545:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});let t=(0,s(97075).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},66949:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>i,__esModule:()=>a,default:()=>o});let t=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\cleanup-portfolios\page.tsx`),{__esModule:a,$$typeof:i}=t,o=t.default}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[1638,6611,6654,1586,1582,1110],()=>s(83251));module.exports=t})();