(()=>{var e={};e.id=6502,e.ids=[6502],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},49176:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>b,tree:()=>d});var t=r(50482),o=r(69108),s=r(62563),l=r.n(s),i=r(68300),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(a,n);let d=["",{children:["admin",{children:["anticipos",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16334)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\anticipos\\history\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\anticipos\\history\\page.tsx"],u="/admin/anticipos/history/page",m={require:r,loadChunk:()=>Promise.resolve()},b=new t.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/anticipos/history/page",pathname:"/admin/anticipos/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},84840:(e,a,r)=>{Promise.resolve().then(r.bind(r,21179))},21179:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var t=r(95344),o=r(47983),s=r.n(o),l=r(3729),i=r(22254),n=r(52399),d=r(46985);function c(){console.log("\uD83D\uDD0D [COMPONENT] HistorialAnticiposPage se est\xe1 ejecutando");let[e,a]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0),[u,m]=(0,l.useState)([]),[b,g]=(0,l.useState)([]),[x,p]=(0,l.useState)(null),[D,h]=(0,l.useState)({modelo:"",mes:"",periodo:"",grupo:""}),[f,j]=(0,l.useState)([]),[k,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)({}),[S,R]=(0,l.useState)({totalSolicitudes:0,realizados:0,pendientes:0,totalPagado:0}),[C,N]=(0,l.useState)("all"),[A,_]=(0,l.useState)(!0),O=(0,i.useRouter)(),I=r(72829).supabase;(0,l.useEffect)(()=>{console.log("\uD83D\uDD0D [USE EFFECT] Ejecutando useEffect inicial"),T()},[]),(0,l.useEffect)(()=>{console.log("\uD83D\uDD0D [USE EFFECT] Aplicando filtros autom\xe1ticamente:",{anticipos:u.length,filters:D,selectedCardType:C,showResults:A}),E()},[u,D,C,A]);let T=async()=>{try{console.log("\uD83D\uDD0D [LOAD USER] Iniciando carga de usuario..."),c(!0);let{data:e}=await I.auth.getUser();if(console.log("\uD83D\uDD0D [LOAD USER] Auth data:",e),!e?.user){console.log("\uD83D\uDD0D [LOAD USER] No hay usuario autenticado, redirigiendo a login"),O.push("/login");return}let{data:r}=await I.from("users").select("id, name, email, role").eq("id",e.user.id).single();if(console.log("\uD83D\uDD0D [LOAD USER] User data:",r),!r||"admin"!==r.role&&"super_admin"!==r.role&&"superadmin_aff"!==r.role){console.log("\uD83D\uDD0D [LOAD USER] Usuario no autorizado, redirigiendo a login"),O.push("/login");return}a(r),console.log("\uD83D\uDD0D [LOAD USER] Usuario establecido, cargando anticipos..."),await z(r.id),"super_admin"===r.role&&(console.log("\uD83D\uDD0D [LOAD USER] Es super admin, cargando grupos..."),await F())}catch(e){console.error("\uD83D\uDD0D [LOAD USER] Error loading user:",e),p("Error al cargar datos del usuario")}finally{console.log("\uD83D\uDD0D [LOAD USER] Finalizando carga de usuario"),c(!1)}},z=async e=>{try{console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Cargando anticipos para admin:",e);let a=`/api/anticipos?adminId=${e}`;console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] URL:",a);let r=await fetch(a);console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Response status:",r.status),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Response ok:",r.ok);let t=await r.json();if(console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Respuesta API completa:",t),t.success){let e=t.anticipos||t.data||[];console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Anticipos cargados:",e.length),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Detalles anticipos:",e),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Tipo de anticipos:",typeof e),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Es array:",Array.isArray(e)),e&&e.length>0&&(console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Primer anticipo:",e[0]),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Estados de anticipos:",e.map(e=>e.estado))),m(e),L(e)}else console.error("\uD83D\uDD0D [CARGAR ANTICIPOS] Error en API:",t.error),p(t.error||"Error al cargar historial")}catch(e){console.error("\uD83D\uDD0D [CARGAR ANTICIPOS] Error en fetch:",e),p("Error al cargar historial")}},L=e=>{console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Calculando estad\xedsticas para:",e.length,"anticipos");let a=new Date().getDate(),r=a>=1&&a<=15;console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Per\xedodo quincenal actual:",{day:a,isFirstQuincena:r,period:r?"1-15":"16-fin de mes"});let t=e.filter(e=>{let a=new Date(e.created_at).getDate(),t=r?a>=1&&a<=15:a>=16;return console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Anticipo per\xedodo:",{id:e.id,created_at:e.created_at,anticipoDay:a,isInCurrentPeriod:t}),t});console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Anticipos del per\xedodo actual:",t.length),console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Estados disponibles en el per\xedodo:",t.map(e=>({id:e.id,estado:e.estado,model:e.model.name}))),console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Conteo por estado en el per\xedodo:",{pendiente:t.filter(e=>"pendiente"===e.estado).length,aprobado:t.filter(e=>"aprobado"===e.estado).length,realizado:t.filter(e=>"realizado"===e.estado).length,confirmado:t.filter(e=>"confirmado"===e.estado).length,rechazado:t.filter(e=>"rechazado"===e.estado).length,cancelado:t.filter(e=>"cancelado"===e.estado).length});let o=t.length,s=t.filter(e=>"realizado"===e.estado||"confirmado"===e.estado).length,l=t.filter(e=>"pendiente"===e.estado||"aprobado"===e.estado).length,i=t.filter(e=>"realizado"===e.estado||"confirmado"===e.estado).reduce((e,a)=>e+a.monto_solicitado,0);console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Resultados del per\xedodo:",{totalSolicitudes:o,realizados:s,pendientes:l,totalPagado:i}),R({totalSolicitudes:o,realizados:s,pendientes:l,totalPagado:i})},P=e=>{console.log("\uD83D\uDD0D [CARD CLICK] Card clicked:",e),console.log("\uD83D\uDD0D [CARD CLICK] Current selectedCardType:",C),console.log("\uD83D\uDD0D [CARD CLICK] Current showResults:",A),console.log("\uD83D\uDD0D [CARD CLICK] Anticipos disponibles:",u.length),console.log("\uD83D\uDD0D [CARD CLICK] Estados de anticipos:",u.map(e=>({id:e.id,estado:e.estado,model:e.model.name}))),C===e?(console.log("\uD83D\uDD0D [CARD CLICK] Segundo clic en el mismo card, ocultando resultados"),_(!1),N("all")):(console.log("\uD83D\uDD0D [CARD CLICK] Seleccionando nuevo card type:",e),N(e),_(!0))},F=async()=>{try{console.log("\uD83D\uDD0D [CARGAR GRUPOS] Iniciando carga de grupos...");let{data:e}=await I.from("groups").select("id, name").order("name");if(console.log("\uD83D\uDD0D [CARGAR GRUPOS] Grupos obtenidos:",e),e){j(e);let a={};for(let r of e){console.log("\uD83D\uDD0D [CARGAR GRUPOS] Cargando modelos para grupo:",r.name);let{data:e}=await I.from("user_groups").select("user_id").eq("group_id",r.id);console.log("\uD83D\uDD0D [CARGAR GRUPOS] Modelos del grupo",r.name,":",e),e&&(a[r.id]=e.map(e=>e.user_id))}console.log("\uD83D\uDD0D [CARGAR GRUPOS] Modelos por grupo final:",a),w(a)}}catch(e){console.error("Error loading grupos:",e)}},E=()=>{let a=[...u];if(console.log("\uD83D\uDD0D [FILTROS] Aplicando filtros:",{totalAnticipos:u.length,filtros:D,userRole:e?.role,modelosPorGrupo:v}),0===u.length){console.log("\uD83D\uDD0D [FILTROS] No hay anticipos para filtrar"),g([]);return}if("all"!==C){console.log("\uD83D\uDD0D [FILTROS] Filtrando por card type PRIMERO:",C),console.log("\uD83D\uDD0D [FILTROS] Estados disponibles antes del filtro:",a.map(e=>({id:e.id,estado:e.estado})));let e=new Date().getDate(),r=e>=1&&e<=15;if(console.log("\uD83D\uDD0D [FILTROS] Filtro por per\xedodo quincenal:",{day:e,isFirstQuincena:r,period:r?"1-15":"16-fin de mes"}),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de filtro de per\xedodo:",(a=a.filter(e=>{let a=new Date(e.created_at).getDate(),t=r?a>=1&&a<=15:a>=16;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo:",{id:e.id,created_at:e.created_at,anticipoDay:a,isInCurrentPeriod:t}),t})).length),"realizados"===C){let e=a.length;console.log('\uD83D\uDD0D [FILTROS] Buscando anticipos con estado "realizado" o "confirmado"');let r=a.filter(e=>{let a="realizado"===e.estado||"confirmado"===e.estado;return console.log("\uD83D\uDD0D [FILTROS] Anticipo realizado:",{id:e.id,estado:e.estado,matches:a,model:e.model.name}),a});console.log("\uD83D\uDD0D [FILTROS] Realizados encontrados:",r.length),console.log("\uD83D\uDD0D [FILTROS] Realizados - Antes:",e,"Despu\xe9s:",r.length),a=r}else"pendientes"===C?a=a.filter(e=>"pendiente"===e.estado||"aprobado"===e.estado):"pagados"===C&&(a=a.filter(e=>"realizado"===e.estado||"confirmado"===e.estado));console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de card type PRIMERO:",a.length)}if(e?.role==="super_admin"&&D.grupo&&(console.log("\uD83D\uDD0D [FILTROS] Filtrando por grupo:",D.grupo),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de grupo:",(a=a.filter(e=>{let a=e.model.user_groups?.[0]?.group_id,r=a===D.grupo;return console.log("\uD83D\uDD0D [FILTROS] Anticipo:",{id:e.id,modelGroupId:a,filterGrupo:D.grupo,matches:r,userGroups:e.model.user_groups}),r})).length)),D.modelo&&console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de modelo:",(a=a.filter(e=>e.model.name.toLowerCase().includes(D.modelo.toLowerCase())||e.model.email.toLowerCase().includes(D.modelo.toLowerCase()))).length),D.mes){let e={enero:0,febrero:1,marzo:2,abril:3,mayo:4,junio:5,julio:6,agosto:7,septiembre:8,octubre:9,noviembre:10,diciembre:11}[D.mes];console.log("\uD83D\uDD0D [FILTROS] Filtrando por mes:",{mes:D.mes,targetMonth:e}),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de mes:",(a=a.filter(a=>{let r=new Date(a.created_at).getMonth(),t=r===e;return console.log("\uD83D\uDD0D [FILTROS] Anticipo mes:",{id:a.id,created_at:a.created_at,anticipoMonth:r,targetMonth:e,matches:t}),t})).length)}if(D.periodo&&(console.log("\uD83D\uDD0D [FILTROS] Filtrando por per\xedodo:",D.periodo),"periodo-1"===D.periodo?a=a.filter(e=>{let a=new Date(e.created_at).getDate(),r=a>=1&&a<=15;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo 1:",{id:e.id,created_at:e.created_at,day:a,matches:r}),r}):"periodo-2"===D.periodo&&(a=a.filter(e=>{let a=new Date(e.created_at).getDate(),r=a>=16;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo 2:",{id:e.id,created_at:e.created_at,day:a,matches:r}),r})),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de per\xedodo:",a.length)),!A){console.log("\uD83D\uDD0D [FILTROS] showResults es false, ocultando todos los resultados"),g([]);return}console.log("\uD83D\uDD0D [FILTROS] Resultado final:",a.length),g(a)},G=e=>{switch(e){case"pendiente":return"bg-yellow-100 text-yellow-800";case"aprobado":return"bg-blue-100 text-blue-800";case"rechazado":return"bg-red-100 text-red-800";case"realizado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},U=e=>{switch(e){case"pendiente":return"Pendiente";case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"realizado":return"Realizado";case"cancelado":return"Cancelado";default:return e}};return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando..."})]})}):e?(u.length,u.filter(e=>"realizado"===e.estado).length,u.filter(e=>"pendiente"===e.estado).length,u.filter(e=>"rechazado"===e.estado).length,u.filter(e=>"cancelado"===e.estado).length,u.reduce((e,a)=>e+a.monto_solicitado,0),u.filter(e=>"realizado"===e.estado).reduce((e,a)=>e+a.monto_solicitado,0),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[t.jsx(s(),{id:"1399b66ebe8a95c2",children:".bank-select.jsx-1399b66ebe8a95c2{scrollbar-width:thin;scrollbar-color:#cbd5e1#f1f5f9;background:white;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;max-height:120px!important;overflow-y:auto}.bank-select.jsx-1399b66ebe8a95c2:focus{border-color:#3b82f6;-webkit-box-shadow:0 0 0 3px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 3px rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.1);outline:none}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar{width:6px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-track{background:#f1f5f9;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-thumb{background:#cbd5e1;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-thumb:hover{background:#94a3b8}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2{padding:8px 12px;background:white;color:#374151;font-size:14px;line-height:1.4;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin:1px 2px}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2:hover{background:#f3f4f6}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2:checked{background:#3b82f6;color:white}"}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[t.jsx("div",{className:"jsx-1399b66ebe8a95c2 mb-8 sm:mb-12",children:(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative",children:[t.jsx("div",{className:"jsx-1399b66ebe8a95c2 absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),t.jsx("div",{className:"jsx-1399b66ebe8a95c2 relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:t.jsx("div",{className:"jsx-1399b66ebe8a95c2 flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-3",children:(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center space-x-3 min-w-0 flex-1",children:[t.jsx("div",{className:"jsx-1399b66ebe8a95c2 w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:t.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1399b66ebe8a95c2 w-5 h-5 sm:w-6 sm:h-6 text-white",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-1399b66ebe8a95c2"})})}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 min-w-0 flex-1",children:[t.jsx("h1",{className:"jsx-1399b66ebe8a95c2 text-base sm:text-lg md:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent leading-tight whitespace-nowrap overflow-hidden text-ellipsis",children:"Historial de Anticipos"}),t.jsx("p",{className:"jsx-1399b66ebe8a95c2 mt-1 text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:"Gestiona el historial completo de anticipos de tu grupo"})]})]})})})]})}),x&&(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center",children:[t.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-1399b66ebe8a95c2 w-5 h-5 text-red-600 dark:text-red-400 mr-2",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd",className:"jsx-1399b66ebe8a95c2"})}),t.jsx("span",{className:"jsx-1399b66ebe8a95c2 text-red-800 dark:text-red-300 font-medium",children:"Error"})]}),t.jsx("p",{className:"jsx-1399b66ebe8a95c2 text-red-700 dark:text-red-300 text-sm mt-1",children:x})]}),t.jsx(n.F,{cards:[{value:S.totalSolicitudes,label:"all"===C?"Total Solicitudes (Activo)":"Total Solicitudes",color:"blue",onClick:()=>P("all"),clickable:!0,size:"sm"},{value:S.realizados,label:"realizados"===C?"Realizados (Activo)":"Realizados",color:"green",onClick:()=>P("realizados"),clickable:!0,size:"sm"},{value:S.pendientes,label:"pendientes"===C?"Ver Pendientes (Activo)":"Ver Pendientes",color:"yellow",onClick:()=>P("pendientes"),clickable:!0,size:"sm"},{value:`$${S.totalPagado.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})}`,label:"pagados"===C?"Total Pagado (Activo)":"Total Pagado (COP)",color:"purple",onClick:()=>P("pagados"),clickable:!0,size:"sm"}],columns:4,className:"mb-6 sm:mb-8"}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative z-[99998] bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 mb-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[t.jsx("h2",{className:"jsx-1399b66ebe8a95c2 text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Filtros"}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e?.role==="super_admin"&&(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Grupo"}),t.jsx(d.Z,{options:f.map(e=>({value:e.id,label:e.name})),value:D.grupo,onChange:e=>h(a=>({...a,grupo:e})),placeholder:"Seleccionar grupo",className:"text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Mes"}),t.jsx(d.Z,{options:[{value:"enero",label:"Enero"},{value:"febrero",label:"Febrero"},{value:"marzo",label:"Marzo"},{value:"abril",label:"Abril"},{value:"mayo",label:"Mayo"},{value:"junio",label:"Junio"},{value:"julio",label:"Julio"},{value:"agosto",label:"Agosto"},{value:"septiembre",label:"Septiembre"},{value:"octubre",label:"Octubre"},{value:"noviembre",label:"Noviembre"},{value:"diciembre",label:"Diciembre"}],value:D.mes,onChange:e=>h(a=>({...a,mes:e})),placeholder:"Seleccionar mes",className:"text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Periodo"}),t.jsx(d.Z,{options:[{value:"periodo-1",label:"Periodo 1"},{value:"periodo-2",label:"Periodo 2"}],value:D.periodo,onChange:e=>h(a=>({...a,periodo:e})),placeholder:"Seleccionar periodo",className:"text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Modelo"}),t.jsx("input",{type:"text",value:D.modelo,onChange:e=>h(a=>({...a,modelo:e.target.value})),placeholder:"Buscar por nombre o email",list:"modelos-suggestions",className:"jsx-1399b66ebe8a95c2 w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2.5 bg-white dark:bg-gray-800 text-sm text-gray-900 dark:text-gray-100"}),t.jsx("datalist",{id:"modelos-suggestions",className:"jsx-1399b66ebe8a95c2",children:u.filter(e=>e.model.name.toLowerCase().includes(D.modelo.toLowerCase())||e.model.email.toLowerCase().includes(D.modelo.toLowerCase())).slice(0,10).map((e,a)=>t.jsx("option",{value:e.model.name,className:"jsx-1399b66ebe8a95c2"},a))})]})]})]}),A?0===b.length?(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative z-0 bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-8 border border-white/20 dark:border-gray-600/20 text-center dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[t.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1399b66ebe8a95c2 w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-1399b66ebe8a95c2"})}),t.jsx("h3",{className:"jsx-1399b66ebe8a95c2 text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No hay anticipos"}),t.jsx("p",{className:"jsx-1399b66ebe8a95c2 text-gray-500 dark:text-gray-400",children:0===u.length?"A\xfan no hay anticipos en el sistema":"No se encontraron anticipos con los filtros aplicados"})]}):t.jsx("div",{className:"jsx-1399b66ebe8a95c2 space-y-4",children:b.map(e=>t.jsx("div",{className:"jsx-1399b66ebe8a95c2 bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl border border-white/20 dark:border-gray-600/20 p-3 sm:p-4 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 space-y-2 sm:space-y-3",children:[(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex-1 min-w-0",children:[t.jsx("h3",{className:"jsx-1399b66ebe8a95c2 text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 truncate mb-1 sm:mb-0",children:e.model.name}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Email:"})," ",t.jsx("span",{className:"jsx-1399b66ebe8a95c2 truncate block sm:inline",children:e.model.email}),e.model.group?.name&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 hidden sm:inline",children:" | "}),(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2 block sm:inline",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium ml-1 sm:ml-0",children:"Grupo:"})," ",e.model.group.name]})]}),!e.model.group?.name&&(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2 hidden sm:inline",children:[" | ",t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium ml-1",children:"Grupo:"})," Sin grupo"]})]})]}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center justify-between sm:justify-end gap-2 sm:gap-2",children:[t.jsx("div",{className:"jsx-1399b66ebe8a95c2 text-left sm:text-right",children:(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 text-sm sm:text-base font-bold text-gray-900 dark:text-gray-100",children:["$",e.monto_solicitado.toLocaleString("es-CO")," COP"]})}),t.jsx("span",{className:`jsx-1399b66ebe8a95c2 px-2 py-1 rounded-full text-[10px] sm:text-xs font-medium flex-shrink-0 ${G(e.estado)}`,children:U(e.estado)})]})]}),(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-0",children:[(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex flex-col sm:flex-row sm:items-center sm:space-x-3 gap-1 sm:gap-0 text-[11px] sm:text-xs text-gray-600 dark:text-gray-300",children:[e.nombre_beneficiario&&(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2 truncate",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Beneficiario:"})," ",e.nombre_beneficiario]}),(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Medio:"})," ",e.medio_pago.toUpperCase()]}),"nequi"===e.medio_pago||"daviplata"===e.medio_pago?e.numero_telefono&&(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Tel:"})," ",e.numero_telefono]}):e.banco&&e.numero_cuenta&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2 truncate",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Banco:"})," ",e.banco]}),(0,t.jsxs)("span",{className:"jsx-1399b66ebe8a95c2 truncate",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Cuenta:"})," ",e.numero_cuenta]})]})]}),t.jsx("div",{className:"jsx-1399b66ebe8a95c2 text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString("es-CO")})]}),e.comentarios_admin&&(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mt-1 p-1.5 sm:p-1 bg-blue-50 dark:bg-blue-900/20 rounded text-[10px] sm:text-xs text-blue-800 dark:text-blue-300",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Admin:"})," ",e.comentarios_admin]}),e.comentarios_rechazo&&(0,t.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mt-1 p-1.5 sm:p-1 bg-red-50 dark:bg-red-900/20 rounded text-[10px] sm:text-xs text-red-800 dark:text-red-300",children:[t.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Rechazo:"})," ",e.comentarios_rechazo]})]})},e.id))}):null,t.jsx("div",{className:"jsx-1399b66ebe8a95c2 mt-8 flex justify-center",children:t.jsx("button",{onClick:()=>O.push("/admin/anticipos/pending"),className:"jsx-1399b66ebe8a95c2 px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:"Solicitudes Pendientes"})})]})]})):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:t.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 dark:border-gray-600/20 p-8 max-w-md dark:shadow-lg dark:shadow-red-900/15 dark:ring-0.5 dark:ring-red-400/20",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),t.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Acceso Denegado"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No tienes permisos para acceder a esta p\xe1gina."})]})})})}},52399:(e,a,r)=>{"use strict";r.d(a,{F:()=>l,Z:()=>s});var t=r(95344);r(3729);let o={blue:{gradient:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-50/90 dark:to-blue-100/95",border:"border-blue-200 dark:border-blue-300/60",text:"text-blue-700 dark:text-blue-600",badge:"text-blue-600 bg-blue-200 dark:text-blue-700 dark:bg-blue-200/80",shadow:"hover:shadow-blue-200 dark:hover:shadow-blue-300/40"},green:{gradient:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-50/90 dark:to-green-100/95",border:"border-green-200 dark:border-green-300/60",text:"text-green-700 dark:text-green-600",badge:"text-green-600 bg-green-200 dark:text-green-700 dark:bg-green-200/80",shadow:"hover:shadow-green-200 dark:hover:shadow-green-300/40"},purple:{gradient:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-50/90 dark:to-purple-100/95",border:"border-purple-200 dark:border-purple-300/60",text:"text-purple-700 dark:text-purple-600",badge:"text-purple-600 bg-purple-200 dark:text-purple-700 dark:bg-purple-200/80",shadow:"hover:shadow-purple-200 dark:hover:shadow-purple-300/40"},orange:{gradient:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-50/90 dark:to-orange-100/95",border:"border-orange-200 dark:border-orange-300/60",text:"text-orange-700 dark:text-orange-600",badge:"text-orange-600 bg-orange-200 dark:text-orange-700 dark:bg-orange-200/80",shadow:"hover:shadow-orange-200 dark:hover:shadow-orange-300/40"},red:{gradient:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-50/90 dark:to-red-100/95",border:"border-red-200 dark:border-red-300/60",text:"text-red-700 dark:text-red-600",badge:"text-red-600 bg-red-200 dark:text-red-700 dark:bg-red-200/80",shadow:"hover:shadow-red-200 dark:hover:shadow-red-300/40"},yellow:{gradient:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-50/90 dark:to-yellow-100/95",border:"border-yellow-200 dark:border-yellow-300/60",text:"text-yellow-700 dark:text-yellow-600",badge:"text-yellow-600 bg-yellow-200 dark:text-yellow-700 dark:bg-yellow-200/80",shadow:"hover:shadow-yellow-200 dark:hover:shadow-yellow-300/40"}};function s({value:e,label:a,color:r="blue",onClick:s,clickable:l=!1,className:i="",size:n="md"}){let d=o[r];return(0,t.jsxs)("div",{className:`
        text-center ${"sm"===n?"p-2 sm:p-4":"lg"===n?"p-6":"p-5"} ${d.gradient} rounded-xl border ${d.border} 
        hover:shadow-lg ${d.shadow} dark:shadow-lg dark:ring-0.5 dark:ring-opacity-20 transition-all duration-200 transform hover:scale-105
        ${l||s?"cursor-pointer":""}
        ${i}
      `,onClick:s,title:l?"Hacer clic para interactuar":void 0,children:[t.jsx("div",{className:`${"lg"===n?"text-2xl":"sm"===n?"text-base sm:text-lg":"text-xl"} font-bold ${d.text} mb-1`,children:"number"==typeof e?e.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}):String(e)}),t.jsx("div",{className:`${"sm"===n?"text-[10px] sm:text-[11px]":"text-xs"} font-medium ${d.badge} px-2 py-1 rounded-full inline-block`,children:a})]})}function l({cards:e,columns:a=3,className:r=""}){return t.jsx("div",{className:`grid ${{1:"grid-cols-1",2:"grid-cols-2 md:grid-cols-2",3:"grid-cols-2 md:grid-cols-3",4:"grid-cols-2 md:grid-cols-2 lg:grid-cols-4"}[a]} gap-2 sm:gap-4 ${r}`,children:e.map((e,a)=>t.jsx(s,{value:e.value,label:e.label,color:e.color,onClick:e.onClick,clickable:e.clickable,size:e.size},a))})}},29408:()=>{},18630:(e,a,r)=>{r(29408);var t=r(3729),o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(t);function s(e,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var l="undefined"!=typeof process&&process.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},n=function(){function e(e){var a=void 0===e?{}:e,r=a.name,t=void 0===r?"stylesheet":r,o=a.optimizeForSpeed,s=void 0===o?l:o;d(i(t),"`name` must be a string"),this._name=t,this._deletedRulePlaceholder="#"+t+"-deleted-rule____{}",d("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var a,r=e.prototype;return r.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;d(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(a,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:a}:e._serverSheet.cssRules.push({cssText:a}),r},deleteRule:function(a){e._serverSheet.cssRules[a]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].ownerNode===e)return document.styleSheets[a]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,a){return d(i(e),"`insertRule` accepts only strings"),"number"!=typeof a&&(a=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,a),this._rulesCount++},r.replaceRule=function(e,a){this._optimizeForSpeed;var r=this._serverSheet;if(a.trim()||(a=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(a,e)}catch(t){l||console.warn("StyleSheet: illegal rule: \n\n"+a+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},r.deleteRule=function(e){this._serverSheet.deleteRule(e)},r.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},r.cssRules=function(){return this._serverSheet.cssRules},r.makeStyleTag=function(e,a,r){a&&d(i(a),"makeStyleTag accepts only strings as second parameter");var t=document.createElement("style");this._nonce&&t.setAttribute("nonce",this._nonce),t.type="text/css",t.setAttribute("data-"+e,""),a&&t.appendChild(document.createTextNode(a));var o=document.head||document.getElementsByTagName("head")[0];return r?o.insertBefore(t,r):o.appendChild(t),t},s(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),a&&s(e,a),e}();function d(e,a){if(!e)throw Error("StyleSheet: "+a+".")}var c=function(e){for(var a=5381,r=e.length;r;)a=33*a^e.charCodeAt(--r);return a>>>0},u={};function m(e,a){if(!a)return"jsx-"+e;var r=String(a),t=e+r;return u[t]||(u[t]="jsx-"+c(e+"-"+r)),u[t]}function b(e,a){var r=e+(a=a.replace(/\/style/gi,"\\/style"));return u[r]||(u[r]=a.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var g=t.createContext(null);g.displayName="StyleSheetContext",o.default.useInsertionEffect||o.default.useLayoutEffect;var x=void 0;function p(e){var a=x||t.useContext(g);return a&&a.add(e),null}p.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},a.style=p},47983:(e,a,r)=>{e.exports=r(18630).style},16334:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>s,__esModule:()=>o,default:()=>l});let t=(0,r(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\anticipos\history\page.tsx`),{__esModule:o,$$typeof:s}=t,l=t.default}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[1638,6611,6654,1586,1582,1110,1881],()=>r(49176));module.exports=t})();