(()=>{var e={};e.id=6502,e.ids=[6502],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},49176:(e,a,o)=>{"use strict";o.r(a),o.d(a,{GlobalError:()=>l.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>n});var r=o(50482),s=o(69108),t=o(62563),l=o.n(t),i=o(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);o.d(a,d);let n=["",{children:["admin",{children:["anticipos",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,16334)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\anticipos\\history\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(o.bind(o,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(o.bind(o,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\anticipos\\history\\page.tsx"],u="/admin/anticipos/history/page",b={require:o,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/anticipos/history/page",pathname:"/admin/anticipos/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},84840:(e,a,o)=>{Promise.resolve().then(o.bind(o,21179))},21179:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>c});var r=o(95344),s=o(47983),t=o.n(s),l=o(3729),i=o(22254),d=o(52399),n=o(46985);function c(){console.log("\uD83D\uDD0D [COMPONENT] HistorialAnticiposPage se est\xe1 ejecutando");let[e,a]=(0,l.useState)(null),[s,c]=(0,l.useState)(!0),[u,b]=(0,l.useState)([]),[m,g]=(0,l.useState)([]),[x,D]=(0,l.useState)(null),[p,h]=(0,l.useState)({modelo:"",mes:"",periodo:"",grupo:""}),[j,f]=(0,l.useState)([]),[k,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)({}),[N,A]=(0,l.useState)({totalSolicitudes:0,realizados:0,pendientes:0,totalPagado:0}),[C,R]=(0,l.useState)("all"),[S,I]=(0,l.useState)(!0),L=(0,i.useRouter)(),O=o(72829).O;(0,l.useEffect)(()=>{console.log("\uD83D\uDD0D [USE EFFECT] Ejecutando useEffect inicial"),T()},[]),(0,l.useEffect)(()=>{console.log("\uD83D\uDD0D [USE EFFECT] Aplicando filtros autom\xe1ticamente:",{anticipos:u.length,filters:p,selectedCardType:C,showResults:S}),F()},[u,p,C,S]);let T=async()=>{try{console.log("\uD83D\uDD0D [LOAD USER] Iniciando carga de usuario..."),c(!0);let{data:e}=await O.auth.getUser();if(console.log("\uD83D\uDD0D [LOAD USER] Auth data:",e),!e?.user){console.log("\uD83D\uDD0D [LOAD USER] No hay usuario autenticado, redirigiendo a login"),L.push("/login");return}let{data:o}=await O.from("users").select("id, name, email, role").eq("id",e.user.id).single();if(console.log("\uD83D\uDD0D [LOAD USER] User data:",o),!o||"admin"!==o.role&&"super_admin"!==o.role){console.log("\uD83D\uDD0D [LOAD USER] Usuario no autorizado, redirigiendo a login"),L.push("/login");return}a(o),console.log("\uD83D\uDD0D [LOAD USER] Usuario establecido, cargando anticipos..."),await _(o.id),"super_admin"===o.role&&(console.log("\uD83D\uDD0D [LOAD USER] Es super admin, cargando grupos..."),await z())}catch(e){console.error("\uD83D\uDD0D [LOAD USER] Error loading user:",e),D("Error al cargar datos del usuario")}finally{console.log("\uD83D\uDD0D [LOAD USER] Finalizando carga de usuario"),c(!1)}},_=async e=>{try{console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Cargando anticipos para admin:",e);let a=`/api/anticipos?adminId=${e}`;console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] URL:",a);let o=await fetch(a);console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Response status:",o.status),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Response ok:",o.ok);let r=await o.json();if(console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Respuesta API completa:",r),r.success){let e=r.anticipos||r.data||[];console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Anticipos cargados:",e.length),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Detalles anticipos:",e),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Tipo de anticipos:",typeof e),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Es array:",Array.isArray(e)),e&&e.length>0&&(console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Primer anticipo:",e[0]),console.log("\uD83D\uDD0D [CARGAR ANTICIPOS] Estados de anticipos:",e.map(e=>e.estado))),b(e),E(e)}else console.error("\uD83D\uDD0D [CARGAR ANTICIPOS] Error en API:",r.error),D(r.error||"Error al cargar historial")}catch(e){console.error("\uD83D\uDD0D [CARGAR ANTICIPOS] Error en fetch:",e),D("Error al cargar historial")}},E=e=>{console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Calculando estad\xedsticas para:",e.length,"anticipos");let a=new Date().getDate(),o=a>=1&&a<=15;console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Per\xedodo quincenal actual:",{day:a,isFirstQuincena:o,period:o?"1-15":"16-fin de mes"});let r=e.filter(e=>{let a=new Date(e.created_at).getDate(),r=o?a>=1&&a<=15:a>=16;return console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Anticipo per\xedodo:",{id:e.id,created_at:e.created_at,anticipoDay:a,isInCurrentPeriod:r}),r});console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Anticipos del per\xedodo actual:",r.length),console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Estados disponibles en el per\xedodo:",r.map(e=>({id:e.id,estado:e.estado,model:e.model.name}))),console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Conteo por estado en el per\xedodo:",{pendiente:r.filter(e=>"pendiente"===e.estado).length,aprobado:r.filter(e=>"aprobado"===e.estado).length,realizado:r.filter(e=>"realizado"===e.estado).length,confirmado:r.filter(e=>"confirmado"===e.estado).length,rechazado:r.filter(e=>"rechazado"===e.estado).length,cancelado:r.filter(e=>"cancelado"===e.estado).length});let s=r.length,t=r.filter(e=>"realizado"===e.estado||"confirmado"===e.estado).length,l=r.filter(e=>"pendiente"===e.estado||"aprobado"===e.estado).length,i=r.filter(e=>"realizado"===e.estado||"confirmado"===e.estado).reduce((e,a)=>e+a.monto_solicitado,0);console.log("\uD83D\uDD0D [ESTAD\xcdSTICAS] Resultados del per\xedodo:",{totalSolicitudes:s,realizados:t,pendientes:l,totalPagado:i}),A({totalSolicitudes:s,realizados:t,pendientes:l,totalPagado:i})},P=e=>{console.log("\uD83D\uDD0D [CARD CLICK] Card clicked:",e),console.log("\uD83D\uDD0D [CARD CLICK] Current selectedCardType:",C),console.log("\uD83D\uDD0D [CARD CLICK] Current showResults:",S),console.log("\uD83D\uDD0D [CARD CLICK] Anticipos disponibles:",u.length),console.log("\uD83D\uDD0D [CARD CLICK] Estados de anticipos:",u.map(e=>({id:e.id,estado:e.estado,model:e.model.name}))),C===e?(console.log("\uD83D\uDD0D [CARD CLICK] Segundo clic en el mismo card, ocultando resultados"),I(!1),R("all")):(console.log("\uD83D\uDD0D [CARD CLICK] Seleccionando nuevo card type:",e),R(e),I(!0))},z=async()=>{try{console.log("\uD83D\uDD0D [CARGAR GRUPOS] Iniciando carga de grupos...");let{data:e}=await O.from("groups").select("id, name").order("name");if(console.log("\uD83D\uDD0D [CARGAR GRUPOS] Grupos obtenidos:",e),e){f(e);let a={};for(let o of e){console.log("\uD83D\uDD0D [CARGAR GRUPOS] Cargando modelos para grupo:",o.name);let{data:e}=await O.from("user_groups").select("user_id").eq("group_id",o.id);console.log("\uD83D\uDD0D [CARGAR GRUPOS] Modelos del grupo",o.name,":",e),e&&(a[o.id]=e.map(e=>e.user_id))}console.log("\uD83D\uDD0D [CARGAR GRUPOS] Modelos por grupo final:",a),w(a)}}catch(e){console.error("Error loading grupos:",e)}},F=()=>{let a=[...u];if(console.log("\uD83D\uDD0D [FILTROS] Aplicando filtros:",{totalAnticipos:u.length,filtros:p,userRole:e?.role,modelosPorGrupo:v}),0===u.length){console.log("\uD83D\uDD0D [FILTROS] No hay anticipos para filtrar"),g([]);return}if("all"!==C){console.log("\uD83D\uDD0D [FILTROS] Filtrando por card type PRIMERO:",C),console.log("\uD83D\uDD0D [FILTROS] Estados disponibles antes del filtro:",a.map(e=>({id:e.id,estado:e.estado})));let e=new Date().getDate(),o=e>=1&&e<=15;if(console.log("\uD83D\uDD0D [FILTROS] Filtro por per\xedodo quincenal:",{day:e,isFirstQuincena:o,period:o?"1-15":"16-fin de mes"}),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de filtro de per\xedodo:",(a=a.filter(e=>{let a=new Date(e.created_at).getDate(),r=o?a>=1&&a<=15:a>=16;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo:",{id:e.id,created_at:e.created_at,anticipoDay:a,isInCurrentPeriod:r}),r})).length),"realizados"===C){let e=a.length;console.log('\uD83D\uDD0D [FILTROS] Buscando anticipos con estado "realizado" o "confirmado"');let o=a.filter(e=>{let a="realizado"===e.estado||"confirmado"===e.estado;return console.log("\uD83D\uDD0D [FILTROS] Anticipo realizado:",{id:e.id,estado:e.estado,matches:a,model:e.model.name}),a});console.log("\uD83D\uDD0D [FILTROS] Realizados encontrados:",o.length),console.log("\uD83D\uDD0D [FILTROS] Realizados - Antes:",e,"Despu\xe9s:",o.length),a=o}else"pendientes"===C?a=a.filter(e=>"pendiente"===e.estado||"aprobado"===e.estado):"pagados"===C&&(a=a.filter(e=>"realizado"===e.estado||"confirmado"===e.estado));console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de card type PRIMERO:",a.length)}if(e?.role==="super_admin"&&p.grupo&&(console.log("\uD83D\uDD0D [FILTROS] Filtrando por grupo:",p.grupo),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de grupo:",(a=a.filter(e=>{let a=e.model.user_groups?.[0]?.group_id,o=a===p.grupo;return console.log("\uD83D\uDD0D [FILTROS] Anticipo:",{id:e.id,modelGroupId:a,filterGrupo:p.grupo,matches:o,userGroups:e.model.user_groups}),o})).length)),p.modelo&&console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de modelo:",(a=a.filter(e=>e.model.name.toLowerCase().includes(p.modelo.toLowerCase())||e.model.email.toLowerCase().includes(p.modelo.toLowerCase()))).length),p.mes){let e={enero:0,febrero:1,marzo:2,abril:3,mayo:4,junio:5,julio:6,agosto:7,septiembre:8,octubre:9,noviembre:10,diciembre:11}[p.mes];console.log("\uD83D\uDD0D [FILTROS] Filtrando por mes:",{mes:p.mes,targetMonth:e}),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de mes:",(a=a.filter(a=>{let o=new Date(a.created_at).getMonth(),r=o===e;return console.log("\uD83D\uDD0D [FILTROS] Anticipo mes:",{id:a.id,created_at:a.created_at,anticipoMonth:o,targetMonth:e,matches:r}),r})).length)}if(p.periodo&&(console.log("\uD83D\uDD0D [FILTROS] Filtrando por per\xedodo:",p.periodo),"periodo-1"===p.periodo?a=a.filter(e=>{let a=new Date(e.created_at).getDate(),o=a>=1&&a<=15;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo 1:",{id:e.id,created_at:e.created_at,day:a,matches:o}),o}):"periodo-2"===p.periodo&&(a=a.filter(e=>{let a=new Date(e.created_at).getDate(),o=a>=16;return console.log("\uD83D\uDD0D [FILTROS] Anticipo per\xedodo 2:",{id:e.id,created_at:e.created_at,day:a,matches:o}),o})),console.log("\uD83D\uDD0D [FILTROS] Despu\xe9s de per\xedodo:",a.length)),!S){console.log("\uD83D\uDD0D [FILTROS] showResults es false, ocultando todos los resultados"),g([]);return}console.log("\uD83D\uDD0D [FILTROS] Resultado final:",a.length),g(a)},G=e=>{switch(e){case"pendiente":return"bg-yellow-100 text-yellow-800";case"aprobado":return"bg-blue-100 text-blue-800";case"rechazado":return"bg-red-100 text-red-800";case"realizado":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},U=e=>{switch(e){case"pendiente":return"Pendiente";case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"realizado":return"Realizado";case"cancelado":return"Cancelado";default:return e}};return s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando..."})]})}):e?(u.length,u.filter(e=>"realizado"===e.estado).length,u.filter(e=>"pendiente"===e.estado).length,u.filter(e=>"rechazado"===e.estado).length,u.filter(e=>"cancelado"===e.estado).length,u.reduce((e,a)=>e+a.monto_solicitado,0),u.filter(e=>"realizado"===e.estado).reduce((e,a)=>e+a.monto_solicitado,0),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[r.jsx(t(),{id:"1399b66ebe8a95c2",children:".bank-select.jsx-1399b66ebe8a95c2{scrollbar-width:thin;scrollbar-color:#cbd5e1#f1f5f9;background:white;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;max-height:120px!important;overflow-y:auto}.bank-select.jsx-1399b66ebe8a95c2:focus{border-color:#3b82f6;-webkit-box-shadow:0 0 0 3px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 3px rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.1);outline:none}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar{width:6px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-track{background:#f1f5f9;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-thumb{background:#cbd5e1;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-1399b66ebe8a95c2::-webkit-scrollbar-thumb:hover{background:#94a3b8}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2{padding:8px 12px;background:white;color:#374151;font-size:14px;line-height:1.4;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin:1px 2px}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2:hover{background:#f3f4f6}.bank-select.jsx-1399b66ebe8a95c2 option.jsx-1399b66ebe8a95c2:checked{background:#3b82f6;color:white}"}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[r.jsx("div",{className:"jsx-1399b66ebe8a95c2 mb-12",children:(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative",children:[r.jsx("div",{className:"jsx-1399b66ebe8a95c2 absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),r.jsx("div",{className:"jsx-1399b66ebe8a95c2 relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center space-x-3",children:[r.jsx("div",{className:"jsx-1399b66ebe8a95c2 w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:r.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1399b66ebe8a95c2 w-5 h-5 text-white",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-1399b66ebe8a95c2"})})}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("h1",{className:"jsx-1399b66ebe8a95c2 text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Historial de Anticipos"}),r.jsx("p",{className:"jsx-1399b66ebe8a95c2 text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Gestiona el historial completo de anticipos de tu grupo"})]})]})})]})}),x&&(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg",children:[(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center",children:[r.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-1399b66ebe8a95c2 w-5 h-5 text-red-600 dark:text-red-400 mr-2",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd",className:"jsx-1399b66ebe8a95c2"})}),r.jsx("span",{className:"jsx-1399b66ebe8a95c2 text-red-800 dark:text-red-300 font-medium",children:"Error"})]}),r.jsx("p",{className:"jsx-1399b66ebe8a95c2 text-red-700 dark:text-red-300 text-sm mt-1",children:x})]}),r.jsx(d.F,{cards:[{value:N.totalSolicitudes,label:"all"===C?"Total Solicitudes (Activo)":"Total Solicitudes",color:"blue",onClick:()=>P("all"),clickable:!0},{value:N.realizados,label:"realizados"===C?"Realizados (Activo)":"Realizados",color:"green",onClick:()=>P("realizados"),clickable:!0},{value:N.pendientes,label:"pendientes"===C?"Ver Pendientes (Activo)":"Ver Pendientes",color:"yellow",onClick:()=>P("pendientes"),clickable:!0},{value:`$${N.totalPagado.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})}`,label:"pagados"===C?"Total Pagado (Activo)":"Total Pagado (COP)",color:"purple",onClick:()=>P("pagados"),clickable:!0}],columns:4,className:"mb-8"}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative z-[99998] bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 mb-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[r.jsx("h2",{className:"jsx-1399b66ebe8a95c2 text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Filtros"}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e?.role==="super_admin"&&(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Grupo"}),r.jsx(n.Z,{options:j.map(e=>({value:e.id,label:e.name})),value:p.grupo,onChange:e=>h(a=>({...a,grupo:e})),placeholder:"Seleccionar grupo",className:"text-sm"})]}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Mes"}),r.jsx(n.Z,{options:[{value:"enero",label:"Enero"},{value:"febrero",label:"Febrero"},{value:"marzo",label:"Marzo"},{value:"abril",label:"Abril"},{value:"mayo",label:"Mayo"},{value:"junio",label:"Junio"},{value:"julio",label:"Julio"},{value:"agosto",label:"Agosto"},{value:"septiembre",label:"Septiembre"},{value:"octubre",label:"Octubre"},{value:"noviembre",label:"Noviembre"},{value:"diciembre",label:"Diciembre"}],value:p.mes,onChange:e=>h(a=>({...a,mes:e})),placeholder:"Seleccionar mes",className:"text-sm"})]}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Periodo"}),r.jsx(n.Z,{options:[{value:"periodo-1",label:"Periodo 1"},{value:"periodo-2",label:"Periodo 2"}],value:p.periodo,onChange:e=>h(a=>({...a,periodo:e})),placeholder:"Seleccionar periodo",className:"text-sm"})]}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("label",{className:"jsx-1399b66ebe8a95c2 block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Modelo"}),r.jsx("input",{type:"text",value:p.modelo,onChange:e=>h(a=>({...a,modelo:e.target.value})),placeholder:"Buscar por nombre o email",list:"modelos-suggestions",className:"jsx-1399b66ebe8a95c2 w-full border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2.5 bg-white dark:bg-gray-800 text-sm text-gray-900 dark:text-gray-100"}),r.jsx("datalist",{id:"modelos-suggestions",className:"jsx-1399b66ebe8a95c2",children:u.filter(e=>e.model.name.toLowerCase().includes(p.modelo.toLowerCase())||e.model.email.toLowerCase().includes(p.modelo.toLowerCase())).slice(0,10).map((e,a)=>r.jsx("option",{value:e.model.name,className:"jsx-1399b66ebe8a95c2"},a))})]})]})]}),S?0===m.length?(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 relative z-0 bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-8 border border-white/20 dark:border-gray-600/20 text-center dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[r.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1399b66ebe8a95c2 w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-1399b66ebe8a95c2"})}),r.jsx("h3",{className:"jsx-1399b66ebe8a95c2 text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No hay anticipos"}),r.jsx("p",{className:"jsx-1399b66ebe8a95c2 text-gray-500 dark:text-gray-400",children:0===u.length?"A\xfan no hay anticipos en el sistema":"No se encontraron anticipos con los filtros aplicados"})]}):r.jsx("div",{className:"jsx-1399b66ebe8a95c2 space-y-4",children:m.map(e=>r.jsx("div",{className:"jsx-1399b66ebe8a95c2 bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl border border-white/20 dark:border-gray-600/20 p-4 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:r.jsx("div",{className:"jsx-1399b66ebe8a95c2 flex items-center justify-between",children:(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex-1",children:[(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center justify-between mb-1",children:[(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("h3",{className:"jsx-1399b66ebe8a95c2 text-base font-semibold text-gray-900 dark:text-gray-100",children:e.model.name}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Email:"})," ",e.model.email," |",r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium ml-1",children:"Grupo:"})," ",e.model.group?.name||"Sin grupo"]})]}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center space-x-2",children:[r.jsx("div",{className:"jsx-1399b66ebe8a95c2 text-right",children:(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 text-base font-bold text-gray-900 dark:text-gray-100",children:["$",e.monto_solicitado.toLocaleString("es-CO")," COP"]})}),r.jsx("span",{className:`jsx-1399b66ebe8a95c2 px-2 py-1 rounded-full text-xs font-medium ${G(e.estado)}`,children:U(e.estado)})]})]}),(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center justify-between text-xs text-gray-600 dark:text-gray-300",children:[(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 flex items-center space-x-3",children:[e.nombre_beneficiario&&(0,r.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Beneficiario:"})," ",e.nombre_beneficiario]}),(0,r.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Medio:"})," ",e.medio_pago.toUpperCase()]}),"nequi"===e.medio_pago||"daviplata"===e.medio_pago?e.numero_telefono&&(0,r.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Tel:"})," ",e.numero_telefono]}):e.banco&&e.numero_cuenta&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Banco:"})," ",e.banco]}),(0,r.jsxs)("span",{className:"jsx-1399b66ebe8a95c2",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Cuenta:"})," ",e.numero_cuenta]})]})]}),r.jsx("div",{className:"jsx-1399b66ebe8a95c2 text-xs text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString("es-CO")})]}),e.comentarios_admin&&(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mt-1 p-1 bg-blue-50 dark:bg-blue-900/20 rounded text-xs text-blue-800 dark:text-blue-300",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Admin:"})," ",e.comentarios_admin]}),e.comentarios_rechazo&&(0,r.jsxs)("div",{className:"jsx-1399b66ebe8a95c2 mt-1 p-1 bg-red-50 dark:bg-red-900/20 rounded text-xs text-red-800 dark:text-red-300",children:[r.jsx("span",{className:"jsx-1399b66ebe8a95c2 font-medium",children:"Rechazo:"})," ",e.comentarios_rechazo]})]})})},e.id))}):null,r.jsx("div",{className:"jsx-1399b66ebe8a95c2 mt-8 flex justify-center",children:r.jsx("button",{onClick:()=>L.push("/admin/anticipos/pending"),className:"jsx-1399b66ebe8a95c2 px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:"Solicitudes Pendientes"})})]})]})):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:r.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 dark:border-gray-600/20 p-8 max-w-md dark:shadow-lg dark:shadow-red-900/15 dark:ring-0.5 dark:ring-red-400/20",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Acceso Denegado"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No tienes permisos para acceder a esta p\xe1gina."})]})})})}},46985:(e,a,o)=>{"use strict";o.d(a,{Z:()=>t});var r=o(95344),s=o(3729);function t({label:e,value:a,options:o,placeholder:t="Selecciona",onChange:l,className:i="",onFocus:d,onBlur:n}){let[c,u]=(0,s.useState)(!1),[b,m]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&u(!1)}function a(e){"Escape"===e.key&&u(!1)}return document.addEventListener("mousedown",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[]),(0,s.useEffect)(()=>{if(b)u(!0);else{let e=setTimeout(()=>{b||u(!1)},150);return()=>clearTimeout(e)}},[b]),(0,s.useEffect)(()=>{c&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[c]);let x=o.find(e=>e.value===a);return(0,r.jsxs)("div",{className:`relative min-w-0 ${i}`,ref:g,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[e&&r.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium mb-1",children:e}),(0,r.jsxs)("div",{className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 dark:shadow-sm dark:shadow-orange-900/10 dark:ring-0.5 dark:ring-orange-500/15 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",onFocus:()=>{d?.(),u(!0)},onBlur:()=>{n?.(),setTimeout(()=>{b||u(!1)},100)},children:[r.jsx("span",{className:"truncate",children:x?x.label:""===a?"Todos":t}),r.jsx("svg",{className:`w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-200 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&r.jsx("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-auto apple-scroll",children:o.map((e,o)=>(0,r.jsxs)("div",{children:[o>0&&r.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{l(e.value),u(!1)},className:`w-full px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${a===e.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[r.jsx("span",{children:e.label}),e.color&&r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 ml-2",style:{backgroundColor:e.color}})]})]},e.value))})]})}},16334:(e,a,o)=>{"use strict";o.r(a),o.d(a,{$$typeof:()=>t,__esModule:()=>s,default:()=>l});let r=(0,o(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\anticipos\history\page.tsx`),{__esModule:s,$$typeof:t}=r,l=r.default}};var a=require("../../../../webpack-runtime.js");a.C(e);var o=e=>a(a.s=e),r=a.X(0,[1638,6611,5558,5094,9609,1110,9625],()=>o(49176));module.exports=r})();