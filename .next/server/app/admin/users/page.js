(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},33904:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>x,tree:()=>d});var a=t(50482),s=t(69108),o=t(62563),i=t.n(o),l=t(68300),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let d=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,51985)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\users\\page.tsx"],c="/admin/users/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},18073:(e,r,t)=>{Promise.resolve().then(t.bind(t,35644))},35644:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(95344),s=t(3729),o=t(22254),i=t(72829);async function l(){try{let{data:{session:e}}=await i.O.auth.getSession();return e?.access_token||null}catch(e){return console.error("❌ [API CLIENT] Error obteniendo token:",e),null}}async function n(e,r={}){let t=await l();if(!t)throw Error("No hay sesi\xf3n activa");let a={"Content-Type":"application/json",Authorization:`Bearer ${t}`,...r.headers};return fetch(e,{...r,headers:a})}async function d(){return(await n("/api/users")).json()}async function u(){return(await n("/api/groups")).json()}var c=t(46985);function m({onSearch:e,placeholder:r="Buscar...",filters:t=[],className:o="",onDropdownStateChange:i}){let[l,n]=(0,s.useState)(""),[d,u]=(0,s.useState)({}),[m,x]=(0,s.useState)(!1),[g,h]=(0,s.useState)(null),p=(0,s.useRef)(null),b=()=>{e(l,d)};(0,s.useEffect)(()=>{let r=setTimeout(()=>{e(l,d)},250);return()=>clearTimeout(r)},[l,d]),(0,s.useEffect)(()=>{function e(e){"Enter"===e.key&&(e.preventDefault(),b()),"Escape"===e.key&&x(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,d,m]);let f=(e,r)=>{u(t=>({...t,[e]:r})),h(null)},v=e=>{h(e)};(0,s.useEffect)(()=>{function e(e){p.current&&!p.current.contains(e.target)&&(h(null),x(!1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{i&&i(m||null!==g)},[m,g,i]);let y=()=>{u({}),n(""),e("",{})},j=Object.values(d).some(e=>""!==e);return(0,a.jsxs)("div",{ref:p,className:`relative ${o}`,children:[a.jsx("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-lg border border-white/30 shadow-sm hover:shadow-md transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("input",{type:"text",value:l,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&b(),placeholder:r,className:"w-full bg-transparent border-none outline-none text-sm text-gray-700 placeholder-gray-400 focus:ring-0"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[t.length>0&&(0,a.jsxs)("button",{onClick:()=>{x(!m),m&&h(null)},className:`p-2 rounded-md text-xs transition-all duration-200 ${m?"bg-blue-500 text-white shadow-md":"text-gray-500 hover:text-blue-500 hover:bg-blue-50/50"}`,title:m?"Ocultar filtros":"Mostrar filtros",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),j&&a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(l||j)&&a.jsx("button",{onClick:y,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50/50 rounded-md transition-all duration-200",title:"Limpiar b\xfasqueda y filtros",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),t.length>0&&m&&(0,a.jsxs)("div",{className:"mt-3 relative bg-white/95 dark:bg-white/80 backdrop-blur-sm rounded-lg border border-white/30 dark:border-gray-600/30 shadow-xl dark:shadow-2xl dark:shadow-blue-900/20 dark:ring-1 dark:ring-blue-400/20 p-4 animate-in slide-in-from-top-2 duration-200 z-[100]",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:a.jsx("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:"Filtros Avanzados"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"space-y-2 min-w-0",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-1 text-gray-600 text-xs font-medium",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),a.jsx("span",{children:e.label})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.Z,{value:d[e.id]||"",options:e.options,onChange:r=>f(e.id,r),className:"text-sm bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-md shadow-sm hover:shadow-md transition-all duration-200",onFocus:()=>v(e.id),onBlur:()=>{setTimeout(()=>h(null),100)}}),d[e.id]&&a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})]},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200/50 dark:border-gray-600/30 dark:shadow-sm dark:shadow-blue-900/5",children:[a.jsx("div",{className:"text-xs text-gray-500",children:j?`${Object.values(d).filter(e=>e).length} filtro(s) activo(s)`:"Sin filtros aplicados"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[j&&a.jsx("button",{onClick:y,className:"px-3 py-1.5 text-xs text-gray-600 hover:text-red-600 hover:bg-red-50/50 rounded-md transition-all duration-200",children:"Limpiar todo"}),a.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-xs rounded-md transition-all duration-200 shadow-sm hover:shadow-md",children:"Aplicar"})]})]})]}),j&&!m&&a.jsx("div",{className:"mt-3 relative bg-blue-50/80 backdrop-blur-sm rounded-lg border border-blue-200/30 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-blue-700 text-xs font-medium",children:"Filtros activos:"})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(d).map(([e,r])=>{if(!r)return null;let s=t.find(r=>r.id===e),o=s?.options.find(e=>e.value===r);return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-blue-100/80 text-blue-800 rounded-full text-xs border border-blue-200/50",children:[(0,a.jsxs)("span",{className:"font-medium",children:[s?.label,":"]}),a.jsx("span",{children:o?.label}),a.jsx("button",{onClick:()=>f(e,""),className:"ml-1 hover:text-blue-600 transition-colors duration-150",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e)})})]}),a.jsx("button",{onClick:()=>x(!0),className:"text-blue-600 hover:text-blue-700 text-xs font-medium transition-colors duration-150",children:"Editar"})]})})]})}var x=t(71145);function g(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)([]),[n,c]=(0,s.useState)([]),[x,g]=(0,s.useState)(!0),[p,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[N,E]=(0,s.useState)(""),[C,D]=(0,s.useState)({}),[L,S]=(0,s.useState)(null),[A,_]=(0,s.useState)(!1),U=(0,o.useRouter)();(0,s.useEffect)(()=>{z()},[]);let z=async()=>{try{g(!0);let{data:{user:e}}=await i.O.auth.getUser();if(!e){b("Usuario no autenticado");return}try{let{data:r,error:t}=await i.O.from("users").select(`
            role,
            user_groups(
              groups!inner(
                id,
                name
              )
            )
          `).eq("id",e.id).single();if(t){console.error("Error obteniendo datos del usuario:",t),b("Error obteniendo datos del usuario: "+t.message);return}if(!r){b("Error obteniendo datos del usuario");return}let a=r.user_groups?.map(e=>e.groups.id)||[];console.log("\uD83D\uDD0D [USUARIOS] Datos del usuario actual:",{id:e.id,role:r.role,groups:a}),w({id:e.id,role:r.role,groups:a})}catch(e){console.error("Error en consulta de usuario:",e),b("Error obteniendo datos del usuario");return}let[t,a]=await Promise.all([d(),u()]);if(t.success){let e=t.users;if(console.log("\uD83D\uDD0D [USUARIOS] Usuarios obtenidos de API:",t.users.length),console.log("\uD83D\uDD0D [USUARIOS] Usuario actual para filtrado:",k),k?.role==="admin"){let r=k.groups||[],a=Array.isArray(r)?r.map(e=>"string"==typeof e?e:e.id):[];console.log("\uD83D\uDD0D [USUARIOS] Aplicando filtro de jerarqu\xeda para admin:",{userGroupIds:a,totalUsers:t.users.length}),e=t.users.filter(e=>"super_admin"!==e.role&&("admin"===e.role||"modelo"===e.role)&&!!e.groups&&e.groups.length>0&&(Array.isArray(e.groups)?e.groups.map(e=>"string"==typeof e?e:e.id):[]).some(e=>a.includes(e))),console.log("\uD83D\uDD0D [USUARIOS] Usuarios despu\xe9s del filtro:",e.length)}r(e),l([])}else b("Error cargando usuarios: "+t.error);a.success&&c(a.groups)}catch(e){console.error("❌ Error cargando datos:",e),b("Error cargando datos")}finally{g(!1)}},M=[{id:"role",label:"Rol",value:C.role||"",options:(()=>{let e=[{label:"Super Admin",value:"super_admin"},{label:"Admin",value:"admin"},{label:"Modelo",value:"modelo"}];return k?.role==="admin"?e.filter(e=>"super_admin"!==e.value):e})()},{id:"group",label:"Grupo",value:C.group||"",options:(()=>{if(k?.role==="admin"){let e=Array.isArray(k.groups)?k.groups.map(e=>"string"==typeof e?e:e.id):[];return n.filter(r=>e.includes(r.id)).map(e=>({label:e.name,value:e.id}))}return n.map(e=>({label:e.name,value:e.id}))})()},{id:"status",label:"Estado",value:C.status||"",options:[{label:"Activo",value:"active"},{label:"Inactivo",value:"inactive"}]}],P=async e=>{if(!e||!e.id){console.error("❌ [FRONTEND] Usuario inv\xe1lido:",e),b("Usuario inv\xe1lido");return}if(!k||!function(e,r){if("super_admin"===e.role)return!0;if("admin"===e.role){let t=e.groups.map(e=>e.id),a=r.groups.map(e=>e.id);return"modelo"===r.role&&a.some(e=>t.includes(e))}return!1}(k,e)){b("No tienes permisos para editar este usuario");return}console.log("\uD83D\uDD0D [FRONTEND] Abriendo modal para usuario:",e),v(e),j(!0)},q=async t=>{let a=e.find(e=>e.id===t);if(!a){b("Usuario no encontrado");return}if(!k||!function(e,r){if("super_admin"===e.role)return!0;if("admin"===e.role){let t=e.groups.map(e=>e.id),a=r.groups.map(e=>e.id);return"modelo"===r.role&&a.some(e=>t.includes(e))}return!1}(k,a)){b("No tienes permisos para eliminar este usuario");return}if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este usuario?"))try{let e=await fetch(`/api/users?id=${t}`,{method:"DELETE"}),a=await e.json();a.success?(r(e=>e.filter(e=>e.id!==t)),l(e=>e.filter(e=>e.id!==t)),console.log("✅ [FRONTEND] Usuario eliminado de la lista local")):b("Error eliminando usuario: "+a.error)}catch(e){console.error("❌ Error eliminando usuario:",e),b("Error eliminando usuario")}};return x?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando usuarios..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[a.jsx("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),a.jsx("div",{className:"relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Usuarios"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Administra usuarios del sistema"})]})]}),(0,a.jsxs)("button",{onClick:()=>U.push("/admin/users/create"),className:"px-3 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 flex items-center space-x-2 shadow-md hover:shadow-lg transform hover:scale-105",children:[a.jsx("span",{className:"text-sm",children:"+"}),a.jsx("span",{className:"text-xs font-medium",children:"Nuevo Usuario"})]})]})})]})}),(0,a.jsxs)("div",{className:"mb-16 relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 z-[99999] dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("span",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"B\xfasqueda y Filtros"})]}),t.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsxs)("span",{children:[t.length," resultado(s) encontrado(s)"]})]})]}),a.jsx(m,{onSearch:(r,t)=>{if(E(r),D(t),!(r.trim()||t.role||t.group||t.status)){l([]);return}let a=e;if(k?.role==="admin"){let e=Array.isArray(k.groups)?k.groups.map(e=>"string"==typeof e?e:e.id):[];a=a.filter(r=>"super_admin"!==r.role&&("admin"===r.role||"modelo"===r.role)&&!!r.groups&&r.groups.length>0&&(Array.isArray(r.groups)?r.groups.map(e=>"string"==typeof e?e:e.id):[]).some(r=>e.includes(r)))}if(r.trim()&&(a=a.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase()))),t.role&&(a=a.filter(e=>e.role===t.role)),t.group&&(a=a.filter(e=>e.groups.some(e=>e.id===t.group))),t.status){let e="active"===t.status;a=a.filter(r=>r.is_active===e)}l(a)},placeholder:"Buscar por nombre, email o ID de usuario...",filters:M,onDropdownStateChange:e=>{_(e)}}),(N||Object.values(C).some(e=>e))&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50/80 backdrop-blur-sm rounded-lg border border-blue-200/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{children:0===t.length?"No se encontraron usuarios con los criterios especificados":`Mostrando ${t.length} de ${e.length} usuarios`})]}),a.jsx("button",{onClick:()=>{E(""),D({}),l([])},className:"text-blue-600 hover:text-blue-700 text-xs font-medium transition-colors duration-150",children:"Limpiar b\xfasqueda"})]})})]}),p&&a.jsx("div",{className:"mb-6 relative bg-red-50/80 dark:bg-red-900/20 backdrop-blur-sm border border-red-200/50 dark:border-red-700/50 text-red-700 dark:text-red-300 px-4 py-3 rounded-xl shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-sm flex items-center justify-center",children:a.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsx("span",{className:"text-sm",children:p})]})}),a.jsx("div",{className:`relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-xl shadow-md transition-all duration-300 apple-scroll overflow-x-auto overflow-y-auto max-h-[70vh] p-0 z-10 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 ${A?"opacity-30 blur-sm pointer-events-none":"opacity-100 blur-none pointer-events-auto"}`,children:(0,a.jsxs)("div",{className:"pt-6 px-6 pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsxs)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:["Usuarios del Sistema (",e.length,")"]})]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),a.jsx("div",{className:"text-gray-400 dark:text-gray-500 text-base font-medium",children:"No hay usuarios registrados"}),a.jsx("button",{onClick:()=>U.push("/admin/users/create"),className:"mt-4 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-300 text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"Crear Primer Usuario"})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center mx-auto mb-3",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("div",{className:"text-gray-400 dark:text-gray-500 text-base font-medium",children:"No hay resultados"}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs mt-2",children:N.trim()||Object.values(C).some(e=>e)?"Intenta ajustar los filtros de b\xfasqueda":"Usa los filtros de b\xfasqueda para encontrar usuarios"})]}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs table-fixed",children:[a.jsx("thead",{className:"border-b border-white/20 dark:border-gray-600/20 bg-gradient-to-r from-gray-50/80 to-blue-50/60 dark:from-gray-700/80 dark:to-gray-600/60 backdrop-blur-sm",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-4 w-[28%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Usuario"}),a.jsx("th",{className:"px-4 py-4 w-[28%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Email"}),a.jsx("th",{className:"px-4 py-4 w-[10%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Rol"}),a.jsx("th",{className:"px-4 py-4 w-[20%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Grupos"}),a.jsx("th",{className:"px-4 py-4 w-[8%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Estado"}),a.jsx("th",{className:"px-4 py-4 w-[6%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white/30 backdrop-blur-sm divide-y divide-white/20",children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/60 hover:shadow-sm transition-all duration-200 h-12 group",children:[a.jsx("td",{className:"px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-semibold shadow-sm border border-white/20",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-medium text-xs truncate",title:e.name,children:e.name}),(0,a.jsxs)("div",{className:"text-gray-400 dark:text-gray-500 text-xs truncate",title:`ID: ${e.id}`,children:["ID: ",e.id.slice(0,8),"..."]})]})]})}),a.jsx("td",{className:"px-4 py-2 text-gray-800 truncate max-w-[220px] text-xs text-center",title:e.email,children:e.email}),a.jsx("td",{className:"px-4 py-2 text-center",children:a.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold whitespace-nowrap border shadow-sm backdrop-blur-sm ${"super_admin"===e.role?"bg-gradient-to-r from-gray-800 to-gray-900 text-white border-gray-600/30":"admin"===e.role?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200/50":"bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 border-green-200/50"}`,children:e.role.replace("_"," ").toUpperCase()})}),a.jsx("td",{className:"px-4 py-2 text-center",children:e.groups.length>0?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden",children:[e.groups.slice(0,2).map(e=>a.jsx("span",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 text-gray-700 dark:text-gray-200 px-2 py-1 rounded-md text-xs whitespace-nowrap border border-gray-200/30 dark:border-gray-600/30 shadow-sm backdrop-blur-sm",children:e.name},e.id)),e.groups.length>2&&(0,a.jsxs)("span",{className:"text-gray-500 text-xs whitespace-nowrap cursor-help",title:e.groups.map(e=>e.name).join(", "),children:["+",e.groups.length-2]})]}):a.jsx("span",{className:"text-gray-400 text-xs",children:"Sin grupos"})}),a.jsx("td",{className:"px-4 py-2 text-center",children:a.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold border shadow-sm backdrop-blur-sm ${e.is_active?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 text-green-700 dark:text-green-300 border-green-200/50 dark:border-green-700/50":"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 text-gray-600 dark:text-gray-300 border-gray-200/50 dark:border-gray-600/50"}`,children:e.is_active?"Activo":"Inactivo"})}),a.jsx("td",{className:"px-4 py-2 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[a.jsx("button",{onClick:()=>P(e),className:"px-2.5 py-1.5 text-xs rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/30 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:shadow-sm transition-all duration-200 backdrop-blur-sm",children:"Editar"}),a.jsx("button",{onClick:()=>q(e.id),className:"px-2.5 py-1.5 text-xs rounded-lg bg-gradient-to-r from-red-50 to-rose-50 border border-red-200/30 text-red-700 hover:from-red-100 hover:to-rose-100 hover:shadow-sm transition-all duration-200 backdrop-blur-sm",children:"Eliminar"})]})})]},e.id))})]})})]})}),y&&f&&a.jsx(h,{user:f,groups:n,currentUser:k,modalError:L,setModalError:S,onClose:()=>{j(!1),v(null),S(null)},onSubmit:async e=>{try{console.log("\uD83D\uDD0D [PARENT] Recibiendo datos del formulario:",e);let t=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();console.log("\uD83D\uDD0D [PARENT] Respuesta de la API:",a),a.success?(console.log("✅ [PARENT] Usuario actualizado exitosamente"),j(!1),v(null),S(null),r(r=>r.map(r=>r.id===e.id?{...r,...a.user}:r)),l(r=>r.map(r=>r.id===e.id?{...r,...a.user}:r)),console.log("✅ [FRONTEND] Usuario actualizado en la lista local")):(console.error("❌ [PARENT] Error de la API:",a.error),S("Error actualizando usuario: "+a.error))}catch(e){console.error("❌ [PARENT] Error en la petici\xf3n:",e),S("Error actualizando usuario")}}})]})})}function h({user:e,groups:r,onClose:t,onSubmit:o,currentUser:i,modalError:l,setModalError:n}){let[d,u]=(0,s.useState)({id:e?.id||"",name:e?.name||"",email:e?.email||"",password:"",role:e?.role||"modelo",is_active:e?.is_active??!0,group_ids:e?.groups?.map(e=>e.id)||[]}),[c,m]=(0,s.useState)(!1),[g,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1);r.find(e=>e.id===d.group_ids[0])?.name,(0,s.useEffect)(()=>{e&&u({id:e.id,name:e.name,email:e.email,password:"",role:e.role,is_active:e.is_active,group_ids:e.groups?.map(e=>e.id)||[]})},[e]);let y=e=>{u(r=>({...r,password:e})),b(e.trim().length>0)},j=async()=>{if(!d.password.trim()){n("La contrase\xf1a no puede estar vac\xeda");return}if(d.password.trim().length<6){n("La contrase\xf1a debe tener al menos 6 caracteres");return}v(!0),n(null);try{let e=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d.id,password:d.password.trim()})}),r=await e.json();if(r.success){n(null),b(!1),u(e=>({...e,password:""}));let e=document.createElement("div");e.textContent="Contrase\xf1a actualizada exitosamente",e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},3e3)}else n(r.error||"Error actualizando contrase\xf1a")}catch(e){console.error("Error actualizando contrase\xf1a:",e),n("Error de conexi\xf3n. Por favor, intenta nuevamente.")}finally{v(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl p-4 w-full max-w-md max-h-[95vh] flex flex-col",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Editar Usuario"}),l&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:l})})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let{password:r,...t}=d;o(t)},className:"space-y-4 flex-1 overflow-y-auto pr-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Nombre"}),a.jsx("input",{type:"text",value:d.name,onChange:e=>u({...d,name:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",autoComplete:"name",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Email"}),a.jsx("input",{type:"email",value:d.email,onChange:e=>u({...d,email:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",autoComplete:"email",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:["Nueva Contrase\xf1a",a.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs ml-1",children:"(opcional - dejar vac\xedo para mantener actual)"})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",value:d.password,onChange:e=>y(e.target.value),placeholder:"Ingresa nueva contrase\xf1a",autoComplete:"new-password",className:"w-full px-3 py-2 pr-12 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"}),a.jsx("button",{type:"button",onClick:()=>m(!c),className:"absolute right-2 top-2 px-2 py-1 rounded-md text-xs text-white bg-gray-900 dark:bg-gray-700 hover:bg-gray-800 dark:hover:bg-gray-600",children:c?"Ocultar":"Ver"})]}),d.password&&d.password.length<6&&a.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:"La contrase\xf1a debe tener al menos 6 caracteres"}),p&&d.password.trim().length>=6&&a.jsx("div",{className:"mt-2",children:a.jsx("button",{type:"button",onClick:j,disabled:f,className:"px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg hover:from-green-600 hover:to-emerald-700 focus:ring-2 focus:ring-green-500/20 transition-all duration-200 shadow-md flex items-center gap-2",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Guardar Contrase\xf1a"]})})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Rol"}),a.jsx(x.Z,{options:[{value:"modelo",label:"Modelo"},{value:"admin",label:"Admin"},{value:"super_admin",label:"Super Admin"}],value:d.role,onChange:e=>u({...d,role:e}),placeholder:"Selecciona un rol",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Usuario Activo"}),a.jsx("button",{type:"button",onClick:()=>u({...d,is_active:!d.is_active}),className:"relative w-10 h-6 rounded-full transition-colors",style:{background:d.is_active?"#111827":"#e5e7eb"},"aria-pressed":d.is_active,children:a.jsx("span",{className:"absolute top-[3px] rounded-full bg-white dark:bg-gray-200 shadow",style:{left:d.is_active?20:3,width:18,height:18}})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Grupos"}),a.jsx(x.Z,{options:r.map(e=>({value:e.id,label:e.name})),value:d.group_ids.length>0?d.group_ids[0]:"",onChange:e=>{u(r=>({...r,group_ids:e?[e]:[]}))},placeholder:(d.role,"Selecciona un grupo"),className:"text-sm"}),g&&a.jsx("div",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700/50",children:g})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-10",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-3 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg hover:bg-blue-50/80 dark:hover:bg-gray-700/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:"Actualizar Usuario"})]})]})]})})}},46985:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var a=t(95344),s=t(3729);function o({label:e,value:r,options:t,placeholder:o="Selecciona",onChange:i,className:l="",onFocus:n,onBlur:d}){let[u,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&c(!1)}function r(e){"Escape"===e.key&&c(!1)}return document.addEventListener("mousedown",e),document.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[]),(0,s.useEffect)(()=>{if(m)c(!0);else{let e=setTimeout(()=>{m||c(!1)},150);return()=>clearTimeout(e)}},[m]),(0,s.useEffect)(()=>{u&&g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[u]);let h=t.find(e=>e.value===r);return(0,a.jsxs)("div",{className:`relative min-w-0 ${l}`,ref:g,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[e&&a.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium mb-1",children:e}),(0,a.jsxs)("div",{className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 dark:shadow-sm dark:shadow-orange-900/10 dark:ring-0.5 dark:ring-orange-500/15 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",onFocus:()=>{n?.(),c(!0)},onBlur:()=>{d?.(),setTimeout(()=>{m||c(!1)},100)},children:[a.jsx("span",{className:"truncate",children:h?h.label:""===r?"Todos":o}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-200 ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&a.jsx("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-auto apple-scroll",children:t.map((e,t)=>(0,a.jsxs)("div",{children:[t>0&&a.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{i(e.value),c(!1)},className:`w-full px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${r===e.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[a.jsx("span",{children:e.label}),e.color&&a.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 ml-2",style:{backgroundColor:e.color}})]})]},e.value))})]})}},71145:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var a=t(95344),s=t(3729);let o={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function i({options:e,value:r,onChange:t,placeholder:i="Selecciona una opci\xf3n",className:l="",disabled:n=!1,maxHeight:d="max-h-60",autoOpen:u=!1}){let[c,m]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{u&&e.length>1?m(!0):u||m(!1)},[u,e.length]),(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{c&&x.current&&setTimeout(()=>{x.current?.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[c]);let g=e.find(e=>e.value===r),h=e=>{t(e),m(!1)};return(0,a.jsxs)("div",{className:`relative ${l}`,ref:x,children:[a.jsx("button",{type:"button",className:`w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ${n?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!n&&m(!c),disabled:n,"aria-haspopup":"listbox","aria-expanded":c,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{className:g?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:g?g.label:i}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[g?.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o[g.badgeColor||"gray"]}`,children:g.badge}),a.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),c&&a.jsx("div",{className:`absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ${d} overflow-auto apple-scroll`,children:0===e.length?a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):e.map((e,t)=>(0,a.jsxs)("div",{children:[t>0&&a.jsx("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:`px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ${e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"} ${e.value===r?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""}`,onClick:()=>!e.disabled&&h(e.value),children:[a.jsx("span",{children:e.label}),e.badge&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o[e.badgeColor||"gray"]}`,children:e.badge})]})]},e.value))})]})}},51985:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\users\page.tsx`),{__esModule:s,$$typeof:o}=a,i=a.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6611,6654,551,9609,1110],()=>t(33904));module.exports=a})();