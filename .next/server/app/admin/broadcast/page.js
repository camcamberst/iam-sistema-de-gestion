(()=>{var e={};e.id=4519,e.ids=[4519],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},34354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["admin",{children:["broadcast",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,29933)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\broadcast\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66294)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,41878)),"C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\camca\\OneDrive\\Documentos\\GitHub\\iam-sistema-de-gestion\\app\\admin\\broadcast\\page.tsx"],u="/admin/broadcast/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/broadcast/page",pathname:"/admin/broadcast",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68255:(e,t,s)=>{Promise.resolve().then(s.bind(s,74231))},74231:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95344),a=s(3729);function i(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(["modelo"]),[n,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),d=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},u=async()=>{o(!0),c("");try{await fetch("/api/auth/token").then(()=>null);let t=await fetch("/api/chat/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e.trim(),roles:s})}),r=await t.json();t.ok?c(`Enviado a ${r.recipients} usuarios`):c(r.error||"Error")}catch(e){c(e?.message||"Error")}finally{o(!1)}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Difusi\xf3n (AIM Botty)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Env\xeda mensajes informativos como Botty a roles o grupos autorizados."}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:"Contenido"}),r.jsx("textarea",{value:e,onChange:e=>t(e.target.value),rows:5,className:"w-full bg-gray-800 text-white rounded-lg p-3 border border-gray-700",placeholder:"Escribe el mensaje de difusi\xf3n..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:"Roles destino"}),r.jsx("div",{className:"flex gap-3 text-sm",children:["modelo","admin","super_admin"].map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:s.includes(e),onChange:()=>d(e)}),e]},e))})]}),r.jsx("button",{onClick:u,disabled:n||!e.trim(),className:"px-4 py-2 rounded-lg bg-blue-600 text-white disabled:bg-gray-600",children:n?"Enviando...":"Enviar difusi\xf3n"}),l&&r.jsx("div",{className:"text-sm text-gray-300",children:l})]})}},97075:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(3729);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:n,iconNode:d,...u},m)=>(0,r.createElement)("svg",{ref:m,...c,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:o("lucide",i),...!n&&!l(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...i},l)=>(0,r.createElement)(d,{ref:l,iconNode:t,className:o(`lucide-${a(n(e))}`,`lucide-${e}`,s),...i}));return s.displayName=n(e),s}},25545:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(97075).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},29933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`C:\Users\camca\OneDrive\Documentos\GitHub\iam-sistema-de-gestion\app\admin\broadcast\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,6611,6654,1586,1582,1110],()=>s(34354));module.exports=r})();