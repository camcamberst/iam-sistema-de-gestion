(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9861],{2601:function(e,t,r){"use strict";var a,i;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(8960)},3:function(e,t,r){Promise.resolve().then(r.bind(r,2143))},2143:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(7437),i=r(2265),n=r(4033),s=r(5922);function l(){let[e,t]=(0,i.useState)(null),[r,l]=(0,i.useState)(!0),[o,d]=(0,i.useState)(null),c=(0,n.useRouter)();return((0,i.useEffect)(()=>{(async()=>{try{var e,r,a,i;l(!0);let{data:n}=await s.O.auth.getUser(),o=null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.id;if(!o){d("Usuario no autenticado"),l(!1);return}let{data:c,error:u}=await s.O.from("users").select("id, name, email, role, is_active").eq("id",o).single();if(u){d("Error obteniendo perfil: ".concat(u.message)),l(!1);return}if(!c){d("Perfil de usuario no encontrado"),l(!1);return}t({auth:{id:(null===(r=n.user)||void 0===r?void 0:r.id)||"",email:(null===(a=n.user)||void 0===a?void 0:a.email)||"",created_at:(null===(i=n.user)||void 0===i?void 0:i.created_at)||""},profile:c,expectedRedirect:"modelo"===c.role?"/admin/model/dashboard":"/admin/dashboard"})}catch(e){d("Error general: ".concat(e))}finally{l(!1)}})()},[]),r)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Verificando informaci\xf3n del usuario..."})]})}):o?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"âŒ Error"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:o}),(0,a.jsx)("button",{onClick:()=>c.push("/login"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Ir al Login"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"\uD83D\uDD0D Diagn\xf3stico de Usuario"}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Informaci\xf3n de Autenticaci\xf3n"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID de Usuario"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white font-mono text-sm",children:e.auth.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.auth.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha de Creaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white text-sm",children:new Date(e.auth.created_at).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Perfil de Usuario"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.profile.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email del Perfil"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.profile.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rol"}),(0,a.jsx)("p",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("modelo"===e.profile.role?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"admin"===e.profile.role?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"),children:e.profile.role})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado"}),(0,a.jsx)("p",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.profile.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.profile.is_active?"Activo":"Inactivo"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Redirecci\xf3n Esperada"}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-blue-900 dark:text-blue-100",children:[(0,a.jsx)("strong",{children:"URL de Redirecci\xf3n:"})," ",(0,a.jsx)("code",{className:"bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded",children:e.expectedRedirect})]}),(0,a.jsxs)("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:["Basado en el rol ",(0,a.jsx)("strong",{children:e.profile.role}),", el usuario deber\xeda ser redirigido a esta URL despu\xe9s del login."]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>c.push("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83D\uDD04 Probar Login Nuevamente"}),(0,a.jsx)("button",{onClick:()=>c.push(e.expectedRedirect),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"\uD83C\uDFAF Ir a Dashboard Correcto"})]})]})})}},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},8960:function(e){!function(){var t={229:function(e){var t,r,a,i=e.exports={};function n(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o=[],d=!1,c=-1;function u(){d&&a&&(d=!1,a.length?o=a.concat(o):c=-1,o.length&&x())}function x(){if(!d){var e=l(u);d=!0;for(var t=o.length;t;){for(a=o,o=[];++c<t;)a&&a[c].run();c=-1,t=o.length}a=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||d||l(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function a(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}},s=!0;try{t[e](n,n.exports,a),s=!1}finally{s&&delete r[e]}return n.exports}a.ab="//";var i=a(229);e.exports=i}()},622:function(e,t,r){"use strict";var a=r(2265),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var a,n={},d=null,c=null;for(a in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,a)&&!o.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:i,type:e,key:d,ref:c,props:n,_owner:l.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=3)}),_N_E=e.O()}]);