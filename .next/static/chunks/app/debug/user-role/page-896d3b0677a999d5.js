(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9861,5922],{3:function(e,r,t){Promise.resolve().then(t.bind(t,2143))},2143:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var a=t(7437),s=t(2265),l=t(4033),i=t(5922);function d(){let[e,r]=(0,s.useState)(null),[t,d]=(0,s.useState)(!0),[n,c]=(0,s.useState)(null),o=(0,l.useRouter)();return((0,s.useEffect)(()=>{(async()=>{try{var e,t,a,s;d(!0);let{data:l}=await i.supabase.auth.getUser(),n=null==l?void 0:null===(e=l.user)||void 0===e?void 0:e.id;if(!n){c("Usuario no autenticado"),d(!1);return}let{data:o,error:x}=await i.supabase.from("users").select("id, name, email, role, is_active").eq("id",n).single();if(x){c("Error obteniendo perfil: ".concat(x.message)),d(!1);return}if(!o){c("Perfil de usuario no encontrado"),d(!1);return}r({auth:{id:(null===(t=l.user)||void 0===t?void 0:t.id)||"",email:(null===(a=l.user)||void 0===a?void 0:a.email)||"",created_at:(null===(s=l.user)||void 0===s?void 0:s.created_at)||""},profile:o,expectedRedirect:"modelo"===o.role?"/admin/model/dashboard":"/admin/dashboard"})}catch(e){c("Error general: ".concat(e))}finally{d(!1)}})()},[]),t)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Verificando informaci\xf3n del usuario..."})]})}):n?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"âŒ Error"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:n}),(0,a.jsx)("button",{onClick:()=>o.push("/login"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Ir al Login"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:"\uD83D\uDD0D Diagn\xf3stico de Usuario"}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Informaci\xf3n de Autenticaci\xf3n"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID de Usuario"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white font-mono text-sm",children:e.auth.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.auth.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha de Creaci\xf3n"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white text-sm",children:new Date(e.auth.created_at).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Perfil de Usuario"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.profile.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email del Perfil"}),(0,a.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.profile.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rol"}),(0,a.jsx)("p",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("modelo"===e.profile.role?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"admin"===e.profile.role?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"),children:e.profile.role})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado"}),(0,a.jsx)("p",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.profile.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.profile.is_active?"Activo":"Inactivo"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Redirecci\xf3n Esperada"}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-blue-900 dark:text-blue-100",children:[(0,a.jsx)("strong",{children:"URL de Redirecci\xf3n:"})," ",(0,a.jsx)("code",{className:"bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded",children:e.expectedRedirect})]}),(0,a.jsxs)("p",{className:"text-blue-700 dark:text-blue-300 mt-2",children:["Basado en el rol ",(0,a.jsx)("strong",{children:e.profile.role}),", el usuario deber\xeda ser redirigido a esta URL despu\xe9s del login."]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>o.push("/login"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83D\uDD04 Probar Login Nuevamente"}),(0,a.jsx)("button",{onClick:()=>o.push(e.expectedRedirect),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"\uD83C\uDFAF Ir a Dashboard Correcto"})]})]})})}},5922:function(e,r,t){"use strict";t.r(r),t.d(r,{supabase:function(){return a}});let a=(0,t(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,d=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var a,l={},c=null,o=null;for(a in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(o=r.ref),r)i.call(r,a)&&!n.hasOwnProperty(a)&&(l[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===l[a]&&(l[a]=r[a]);return{$$typeof:s,type:e,key:c,ref:o,props:l,_owner:d.current}}r.Fragment=l,r.jsx=c,r.jsxs=c},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=3)}),_N_E=e.O()}]);