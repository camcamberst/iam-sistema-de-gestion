(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{2601:function(e,r,t){"use strict";var a,s;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(8960)},5262:function(e,r,t){Promise.resolve().then(t.bind(t,9998))},9998:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var a=t(7437),s=t(2265),o=t(4033),n=t(5922);async function i(){try{let{data:{session:e}}=await n.O.auth.getSession();return(null==e?void 0:e.access_token)||null}catch(e){return console.error("❌ [API CLIENT] Error obteniendo token:",e),null}}async function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=await i();if(!t)throw Error("No hay sesi\xf3n activa");let a={"Content-Type":"application/json",Authorization:"Bearer ".concat(t),...r.headers};return fetch(e,{...r,headers:a})}async function d(){return(await l("/api/users")).json()}async function c(){return(await l("/api/groups")).json()}var u=t(4848);function m(e){let{onSearch:r,placeholder:t="Buscar...",filters:o=[],className:n="",onDropdownStateChange:i}=e,[l,d]=(0,s.useState)(""),[c,m]=(0,s.useState)({}),[x,g]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),b=(0,s.useRef)(null),f=()=>{r(l,c)};(0,s.useEffect)(()=>{let e=setTimeout(()=>{r(l,c)},250);return()=>clearTimeout(e)},[l,c]),(0,s.useEffect)(()=>{function e(e){"Enter"===e.key&&(e.preventDefault(),f()),"Escape"===e.key&&g(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,c,x]);let v=(e,r)=>{m(t=>({...t,[e]:r})),p(null)},y=e=>{p(e)};(0,s.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&(p(null),g(!1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{i&&i(x||null!==h)},[x,h,i]);let w=()=>{m({}),d(""),r("",{})},k=Object.values(c).some(e=>""!==e);return(0,a.jsxs)("div",{ref:b,className:"relative ".concat(n),children:[(0,a.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-lg border border-white/30 shadow-sm hover:shadow-md transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("div",{className:"flex-1 relative",children:(0,a.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),placeholder:t,className:"w-full bg-transparent border-none outline-none text-sm text-gray-700 placeholder-gray-400 focus:ring-0"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[o.length>0&&(0,a.jsxs)("button",{onClick:()=>{g(!x),x&&p(null)},className:"p-2 rounded-md text-xs transition-all duration-200 ".concat(x?"bg-blue-500 text-white shadow-md":"text-gray-500 hover:text-blue-500 hover:bg-blue-50/50"),title:x?"Ocultar filtros":"Mostrar filtros",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),k&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(l||k)&&(0,a.jsx)("button",{onClick:w,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50/50 rounded-md transition-all duration-200",title:"Limpiar b\xfasqueda y filtros",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),o.length>0&&x&&(0,a.jsxs)("div",{className:"mt-3 relative bg-white/95 dark:bg-white/80 backdrop-blur-sm rounded-lg border border-white/30 dark:border-gray-600/30 shadow-xl dark:shadow-2xl dark:shadow-blue-900/20 dark:ring-1 dark:ring-blue-400/20 p-4 animate-in slide-in-from-top-2 duration-200 z-[100]",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:"Filtros Avanzados"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,a.jsxs)("div",{className:"space-y-2 min-w-0",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-1 text-gray-600 text-xs font-medium",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),(0,a.jsx)("span",{children:e.label})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{value:c[e.id]||"",options:e.options,onChange:r=>v(e.id,r),className:"text-sm bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-md shadow-sm hover:shadow-md transition-all duration-200",onFocus:()=>y(e.id),onBlur:()=>{setTimeout(()=>p(null),100)}}),c[e.id]&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})]},e.id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-200/50 dark:border-gray-600/30 dark:shadow-sm dark:shadow-blue-900/5",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:k?"".concat(Object.values(c).filter(e=>e).length," filtro(s) activo(s)"):"Sin filtros aplicados"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[k&&(0,a.jsx)("button",{onClick:w,className:"px-3 py-1.5 text-xs text-gray-600 hover:text-red-600 hover:bg-red-50/50 rounded-md transition-all duration-200",children:"Limpiar todo"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-xs rounded-md transition-all duration-200 shadow-sm hover:shadow-md",children:"Aplicar"})]})]})]}),k&&!x&&(0,a.jsx)("div",{className:"mt-3 relative bg-blue-50/80 backdrop-blur-sm rounded-lg border border-blue-200/30 p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-blue-700 text-xs font-medium",children:"Filtros activos:"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(c).map(e=>{let[r,t]=e;if(!t)return null;let s=o.find(e=>e.id===r),n=null==s?void 0:s.options.find(e=>e.value===t);return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-blue-100/80 text-blue-800 rounded-full text-xs border border-blue-200/50",children:[(0,a.jsxs)("span",{className:"font-medium",children:[null==s?void 0:s.label,":"]}),(0,a.jsx)("span",{children:null==n?void 0:n.label}),(0,a.jsx)("button",{onClick:()=>v(r,""),className:"ml-1 hover:text-blue-600 transition-colors duration-150",children:(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r)})})]}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"text-blue-600 hover:text-blue-700 text-xs font-medium transition-colors duration-150",children:"Editar"})]})})]})}var x=t(883),g=t(5051);function h(){let[e,r]=(0,s.useState)([]),[t,i]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[x,g]=(0,s.useState)(!0),[h,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[k,j]=(0,s.useState)(null),[N,E]=(0,s.useState)(""),[C,L]=(0,s.useState)({}),[S,D]=(0,s.useState)(null),[A,_]=(0,s.useState)(!1),T=(0,o.useRouter)();(0,s.useEffect)(()=>{z()},[]);let z=async()=>{try{g(!0);let{data:{user:t}}=await n.O.auth.getUser();if(!t){b("Usuario no autenticado");return}try{var e;let{data:r,error:a}=await n.O.from("users").select("\n            role,\n            user_groups(\n              groups!inner(\n                id,\n                name\n              )\n            )\n          ").eq("id",t.id).single();if(a){console.error("Error obteniendo datos del usuario:",a),b("Error obteniendo datos del usuario: "+a.message);return}if(!r){b("Error obteniendo datos del usuario");return}let s=(null===(e=r.user_groups)||void 0===e?void 0:e.map(e=>e.groups.id))||[];console.log("\uD83D\uDD0D [USUARIOS] Datos del usuario actual:",{id:t.id,role:r.role,groups:s}),j({id:t.id,role:r.role,groups:s})}catch(e){console.error("Error en consulta de usuario:",e),b("Error obteniendo datos del usuario");return}let[a,s]=await Promise.all([d(),c()]);if(a.success){let e=a.users;if(console.log("\uD83D\uDD0D [USUARIOS] Usuarios obtenidos de API:",a.users.length),console.log("\uD83D\uDD0D [USUARIOS] Usuario actual para filtrado:",k),(null==k?void 0:k.role)==="admin"){let r=k.groups||[],t=Array.isArray(r)?r.map(e=>"string"==typeof e?e:e.id):[];console.log("\uD83D\uDD0D [USUARIOS] Aplicando filtro de jerarqu\xeda para admin:",{userGroupIds:t,totalUsers:a.users.length}),e=a.users.filter(e=>"super_admin"!==e.role&&("admin"===e.role||"modelo"===e.role)&&!!e.groups&&e.groups.length>0&&(Array.isArray(e.groups)?e.groups.map(e=>"string"==typeof e?e:e.id):[]).some(e=>t.includes(e))),console.log("\uD83D\uDD0D [USUARIOS] Usuarios despu\xe9s del filtro:",e.length)}r(e),i([])}else b("Error cargando usuarios: "+a.error);s.success&&u(s.groups)}catch(e){console.error("❌ Error cargando datos:",e),b("Error cargando datos")}finally{g(!1)}},U=[{id:"role",label:"Rol",value:C.role||"",options:(()=>{let e=[{label:"Super Admin",value:"super_admin"},{label:"Admin",value:"admin"},{label:"Modelo",value:"modelo"}];return(null==k?void 0:k.role)==="admin"?e.filter(e=>"super_admin"!==e.value):e})()},{id:"group",label:"Grupo",value:C.group||"",options:(()=>{if((null==k?void 0:k.role)==="admin"){let e=Array.isArray(k.groups)?k.groups.map(e=>"string"==typeof e?e:e.id):[];return l.filter(r=>e.includes(r.id)).map(e=>({label:e.name,value:e.id}))}return l.map(e=>({label:e.name,value:e.id}))})()},{id:"status",label:"Estado",value:C.status||"",options:[{label:"Activo",value:"active"},{label:"Inactivo",value:"inactive"}]}],M=async e=>{if(!e||!e.id){console.error("❌ [FRONTEND] Usuario inv\xe1lido:",e),b("Usuario inv\xe1lido");return}if(!k||!function(e,r){if("super_admin"===e.role)return!0;if("admin"===e.role){let t=e.groups.map(e=>e.id),a=r.groups.map(e=>e.id);return"modelo"===r.role&&a.some(e=>t.includes(e))}return!1}(k,e)){b("No tienes permisos para editar este usuario");return}console.log("\uD83D\uDD0D [FRONTEND] Abriendo modal para usuario:",e),v(e),w(!0)},I=async t=>{let a=e.find(e=>e.id===t);if(!a){b("Usuario no encontrado");return}if(!k||!function(e,r){if("super_admin"===e.role)return!0;if("admin"===e.role){let t=e.groups.map(e=>e.id),a=r.groups.map(e=>e.id);return"modelo"===r.role&&a.some(e=>t.includes(e))}return!1}(k,a)){b("No tienes permisos para eliminar este usuario");return}if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este usuario?"))try{let e=await fetch("/api/users?id=".concat(t),{method:"DELETE"}),a=await e.json();a.success?(r(e=>e.filter(e=>e.id!==t)),i(e=>e.filter(e=>e.id!==t)),console.log("✅ [FRONTEND] Usuario eliminado de la lista local")):b("Error eliminando usuario: "+a.error)}catch(e){console.error("❌ Error eliminando usuario:",e),b("Error eliminando usuario")}};return x?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center pt-16",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando usuarios..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,a.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Usuarios"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Administra usuarios del sistema"})]})]}),(0,a.jsxs)("button",{onClick:()=>T.push("/admin/users/create"),className:"px-3 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 flex items-center space-x-2 shadow-md hover:shadow-lg transform hover:scale-105",children:[(0,a.jsx)("span",{className:"text-sm",children:"+"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Nuevo Usuario"})]})]})})]})}),(0,a.jsxs)("div",{className:"mb-16 relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 z-10 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 ".concat(y?"opacity-30 blur-sm pointer-events-none":""),"aria-hidden":y,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("span",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"B\xfasqueda y Filtros"})]}),t.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,a.jsxs)("span",{children:[t.length," resultado(s) encontrado(s)"]})]})]}),(0,a.jsx)(m,{onSearch:(r,t)=>{if(E(r),L(t),!(r.trim()||t.role||t.group||t.status)){i([]);return}let a=e;if((null==k?void 0:k.role)==="admin"){let e=Array.isArray(k.groups)?k.groups.map(e=>"string"==typeof e?e:e.id):[];a=a.filter(r=>"super_admin"!==r.role&&("admin"===r.role||"modelo"===r.role)&&!!r.groups&&r.groups.length>0&&(Array.isArray(r.groups)?r.groups.map(e=>"string"==typeof e?e:e.id):[]).some(r=>e.includes(r)))}if(r.trim()&&(a=a.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase()))),t.role&&(a=a.filter(e=>e.role===t.role)),t.group&&(a=a.filter(e=>e.groups.some(e=>e.id===t.group))),t.status){let e="active"===t.status;a=a.filter(r=>r.is_active===e)}i(a)},placeholder:"Buscar por nombre, email o ID de usuario...",filters:U,onDropdownStateChange:e=>{_(e)}}),(N||Object.values(C).some(e=>e))&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50/80 backdrop-blur-sm rounded-lg border border-blue-200/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("span",{children:0===t.length?"No se encontraron usuarios con los criterios especificados":"Mostrando ".concat(t.length," de ").concat(e.length," usuarios")})]}),(0,a.jsx)("button",{onClick:()=>{E(""),L({}),i([])},className:"text-blue-600 hover:text-blue-700 text-xs font-medium transition-colors duration-150",children:"Limpiar b\xfasqueda"})]})})]}),h&&(0,a.jsx)("div",{className:"mb-6 relative bg-red-50/80 dark:bg-red-900/20 backdrop-blur-sm border border-red-200/50 dark:border-red-700/50 text-red-700 dark:text-red-300 px-4 py-3 rounded-xl shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-sm flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"text-sm",children:h})]})}),(0,a.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm border border-white/20 dark:border-gray-600/20 rounded-xl shadow-md transition-all duration-300 apple-scroll overflow-x-auto overflow-y-auto max-h-[70vh] p-0 z-10 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 ".concat(A||y?"opacity-30 blur-sm pointer-events-none":"opacity-100 blur-none pointer-events-auto"),"aria-hidden":y,children:(0,a.jsxs)("div",{className:"pt-6 px-6 pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsxs)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:["Usuarios del Sistema (",e.length,")"]})]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-base font-medium",children:"No hay usuarios registrados"}),(0,a.jsx)("button",{onClick:()=>T.push("/admin/users/create"),className:"mt-4 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all duration-300 text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"Crear Primer Usuario"})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-base font-medium",children:"No hay resultados"}),(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs mt-2",children:N.trim()||Object.values(C).some(e=>e)?"Intenta ajustar los filtros de b\xfasqueda":"Usa los filtros de b\xfasqueda para encontrar usuarios"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs table-fixed",children:[(0,a.jsx)("thead",{className:"border-b border-white/20 dark:border-gray-600/20 bg-gradient-to-r from-gray-50/80 to-blue-50/60 dark:from-gray-700/80 dark:to-gray-600/60 backdrop-blur-sm",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-4 w-[28%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Usuario"}),(0,a.jsx)("th",{className:"px-4 py-4 w-[28%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-4 w-[10%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Rol"}),(0,a.jsx)("th",{className:"px-4 py-4 w-[20%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Grupos"}),(0,a.jsx)("th",{className:"px-4 py-4 w-[8%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Estado"}),(0,a.jsx)("th",{className:"px-4 py-4 w-[6%] text-gray-700 dark:text-white font-medium text-sm uppercase tracking-wide text-center",children:"Acciones"})]})}),(0,a.jsx)("tbody",{className:"bg-white/30 backdrop-blur-sm divide-y divide-white/20",children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/60 hover:shadow-sm transition-all duration-200 h-12 group",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-semibold shadow-sm border border-white/20",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-gray-900 dark:text-gray-100 font-medium text-xs truncate",title:e.name,children:e.name}),(0,a.jsxs)("div",{className:"text-gray-400 dark:text-gray-500 text-xs truncate",title:"ID: ".concat(e.id),children:["ID: ",e.id.slice(0,8),"..."]})]})]})}),(0,a.jsx)("td",{className:"px-4 py-2 text-gray-800 truncate max-w-[220px] text-xs text-center",title:e.email,children:e.email}),(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:(0,a.jsx)("span",{className:"px-2.5 py-1 rounded-lg text-xs font-semibold whitespace-nowrap border shadow-sm backdrop-blur-sm ".concat("super_admin"===e.role?"bg-gradient-to-r from-gray-800 to-gray-900 text-white border-gray-600/30":"admin"===e.role?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border-blue-200/50":"bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 border-green-200/50"),children:e.role.replace("_"," ").toUpperCase()})}),(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:e.groups.length>0?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden",children:[e.groups.slice(0,2).map(e=>(0,a.jsx)("span",{className:"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 text-gray-700 dark:text-gray-200 px-2 py-1 rounded-md text-xs whitespace-nowrap border border-gray-200/30 dark:border-gray-600/30 shadow-sm backdrop-blur-sm",children:e.name},e.id)),e.groups.length>2&&(0,a.jsxs)("span",{className:"text-gray-500 text-xs whitespace-nowrap cursor-help",title:e.groups.map(e=>e.name).join(", "),children:["+",e.groups.length-2]})]}):(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Sin grupos"})}),(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:(0,a.jsx)("span",{className:"px-2.5 py-1 rounded-lg text-xs font-semibold border shadow-sm backdrop-blur-sm ".concat(e.is_active?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 text-green-700 dark:text-green-300 border-green-200/50 dark:border-green-700/50":"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700 dark:to-gray-600 text-gray-600 dark:text-gray-300 border-gray-200/50 dark:border-gray-600/50"),children:e.is_active?"Activo":"Inactivo"})}),(0,a.jsx)("td",{className:"px-4 py-2 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[(0,a.jsx)("button",{onClick:()=>M(e),className:"px-2.5 py-1.5 text-xs rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200/30 text-blue-700 hover:from-blue-100 hover:to-indigo-100 hover:shadow-sm transition-all duration-200 backdrop-blur-sm",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>I(e.id),className:"px-2.5 py-1.5 text-xs rounded-lg bg-gradient-to-r from-red-50 to-rose-50 border border-red-200/30 text-red-700 hover:from-red-100 hover:to-rose-100 hover:shadow-sm transition-all duration-200 backdrop-blur-sm",children:"Eliminar"})]})})]},e.id))})]})})]})}),y&&f&&(0,a.jsx)(p,{user:f,groups:l,currentUser:k,modalError:S,setModalError:D,onClose:()=>{w(!1),v(null),D(null)},onSubmit:async e=>{try{console.log("\uD83D\uDD0D [PARENT] Recibiendo datos del formulario:",e);let t=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();console.log("\uD83D\uDD0D [PARENT] Respuesta de la API:",a),a.success?(console.log("✅ [PARENT] Usuario actualizado exitosamente"),w(!1),v(null),D(null),r(r=>r.map(r=>r.id===e.id?{...r,...a.user}:r)),i(r=>r.map(r=>r.id===e.id?{...r,...a.user}:r)),console.log("✅ [FRONTEND] Usuario actualizado en la lista local")):(console.error("❌ [PARENT] Error de la API:",a.error),D("Error actualizando usuario: "+a.error))}catch(e){console.error("❌ [PARENT] Error en la petici\xf3n:",e),D("Error actualizando usuario")}}})]})})}function p(e){var r,t,o;let{user:n,groups:i,onClose:l,onSubmit:d,currentUser:c,modalError:u,setModalError:m}=e,[h,p]=(0,s.useState)({id:(null==n?void 0:n.id)||"",name:(null==n?void 0:n.name)||"",email:(null==n?void 0:n.email)||"",password:"",role:(null==n?void 0:n.role)||"modelo",is_active:null===(o=null==n?void 0:n.is_active)||void 0===o||o,group_ids:(null==n?void 0:null===(r=n.groups)||void 0===r?void 0:r.map(e=>e.id))||[]}),[b,f]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[w,k]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1);null===(t=i.find(e=>e.id===h.group_ids[0]))||void 0===t||t.name,(0,s.useEffect)(()=>{var e;n&&p({id:n.id,name:n.name,email:n.email,password:"",role:n.role,is_active:n.is_active,group_ids:(null===(e=n.groups)||void 0===e?void 0:e.map(e=>e.id))||[]})},[n]);let L=e=>{p(r=>({...r,password:e})),k(e.trim().length>0)},S=async()=>{if(!h.password.trim()){m("La contrase\xf1a no puede estar vac\xeda");return}if(h.password.trim().length<6){m("La contrase\xf1a debe tener al menos 6 caracteres");return}N(!0),m(null);try{let e=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h.id,password:h.password.trim()})}),r=await e.json();if(r.success){m(null),k(!1),p(e=>({...e,password:""}));let e=document.createElement("div");e.textContent="Contrase\xf1a actualizada exitosamente",e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},3e3)}else m(r.error||"Error actualizando contrase\xf1a")}catch(e){console.error("Error actualizando contrase\xf1a:",e),m("Error de conexi\xf3n. Por favor, intenta nuevamente.")}finally{N(!1)}};return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,s.useEffect)(()=>{let e=requestAnimationFrame(()=>C(!0));return()=>cancelAnimationFrame(e)},[]),(0,a.jsxs)(g.Z,{isOpen:!0,onClose:l,title:"Editar Usuario",maxWidthClass:"max-w-md",children:[u&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300",children:u})})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let{password:r,...t}=h;d(t)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Nombre"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>p({...h,name:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",autoComplete:"name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:h.email,onChange:e=>p({...h,email:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",autoComplete:"email",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:["Nueva Contrase\xf1a",(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs ml-1",children:"(opcional - dejar vac\xedo para mantener actual)"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:b?"text":"password",value:h.password,onChange:e=>L(e.target.value),placeholder:"Ingresa nueva contrase\xf1a",autoComplete:"new-password",className:"w-full px-3 py-2 pr-12 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop-blur-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!b),className:"absolute right-2 top-2 px-2 py-1 rounded-md text-xs text-white bg-gray-900 dark:bg-gray-700 hover:bg-gray-800 dark:hover:bg-gray-600",children:b?"Ocultar":"Ver"})]}),h.password&&h.password.length<6&&(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:"La contrase\xf1a debe tener al menos 6 caracteres"}),w&&h.password.trim().length>=6&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{type:"button",onClick:S,disabled:j,className:"px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg hover:from-green-600 hover:to-emerald-700 focus:ring-2 focus:ring-green-500/20 transition-all duration-200 shadow-md flex items-center gap-2",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Guardar Contrase\xf1a"]})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Rol"}),(0,a.jsx)(x.Z,{options:[{value:"modelo",label:"Modelo"},{value:"admin",label:"Admin"},{value:"super_admin",label:"Super Admin"}],value:h.role,onChange:e=>p({...h,role:e}),placeholder:"Selecciona un rol",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Usuario Activo"}),(0,a.jsx)("button",{type:"button",onClick:()=>p({...h,is_active:!h.is_active}),className:"relative w-10 h-6 rounded-full transition-colors",style:{background:h.is_active?"#111827":"#e5e7eb"},"aria-pressed":h.is_active,children:(0,a.jsx)("span",{className:"absolute top-[3px] rounded-full bg-white dark:bg-gray-200 shadow",style:{left:h.is_active?20:3,width:18,height:18}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-medium mb-1",children:"Grupos"}),(0,a.jsx)(x.Z,{options:i.map(e=>({value:e.id,label:e.name})),value:h.group_ids.length>0?h.group_ids[0]:"",onChange:e=>{p(r=>({...r,group_ids:e?[e]:[]}))},placeholder:(h.role,"Selecciona un grupo"),className:"text-sm"}),v&&(0,a.jsx)("div",{className:"mt-3 text-sm text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700/50",children:v})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-10",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-3 py-1.5 text-xs font-medium text-blue-600 dark:text-blue-400 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg hover:bg-blue-50/80 dark:hover:bg-gray-700/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:"Actualizar Usuario"})]})]})]})}},4848:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var a=t(7437),s=t(2265);function o(e){let{label:r,value:t,options:o,placeholder:n="Selecciona",onChange:i,className:l="",onFocus:d,onBlur:c}=e,[u,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){h.current&&!h.current.contains(e.target)&&m(!1)}function r(e){"Escape"===e.key&&m(!1)}return document.addEventListener("mousedown",e),document.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[]),(0,s.useEffect)(()=>{if(x)m(!0);else{let e=setTimeout(()=>{x||m(!1)},150);return()=>clearTimeout(e)}},[x]),(0,s.useEffect)(()=>{u&&h.current&&setTimeout(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[u]);let p=o.find(e=>e.value===t);return(0,a.jsxs)("div",{className:"relative min-w-0 ".concat(l),ref:h,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[r&&(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium mb-1",children:r}),(0,a.jsxs)("div",{className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 dark:shadow-sm dark:shadow-orange-900/10 dark:ring-0.5 dark:ring-orange-500/15 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",onFocus:()=>{null==d||d(),m(!0)},onBlur:()=>{null==c||c(),setTimeout(()=>{x||m(!1)},100)},children:[(0,a.jsx)("span",{className:"truncate",children:p?p.label:""===t?"Todos":n}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,a.jsx)("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-auto apple-scroll",children:o.map((e,r)=>(0,a.jsxs)("div",{children:[r>0&&(0,a.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{i(e.value),m(!1)},className:"w-full px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(t===e.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"),children:[(0,a.jsx)("span",{children:e.label}),e.color&&(0,a.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0 ml-2",style:{backgroundColor:e.color}})]})]},e.value))})]})}},883:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(7437),s=t(2265);let o={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function n(e){let{options:r,value:t,onChange:n,placeholder:i="Selecciona una opci\xf3n",className:l="",disabled:d=!1,maxHeight:c="max-h-60",autoOpen:u=!1}=e,[m,x]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{u&&r.length>1?x(!0):u||x(!1)},[u,r.length]),(0,s.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{m&&g.current&&setTimeout(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[m]);let h=r.find(e=>e.value===t),p=e=>{n(e),x(!1)};return(0,a.jsxs)("div",{className:"relative ".concat(l),ref:g,children:[(0,a.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(d?"opacity-50 cursor-not-allowed":""),onClick:()=>!d&&x(!m),disabled:d,"aria-haspopup":"listbox","aria-expanded":m,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{className:h?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:h?h.label:i}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.badge)&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(o[h.badgeColor||"gray"]),children:h.badge}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),m&&(0,a.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===r.length?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):r.map((e,r)=>(0,a.jsxs)("div",{children:[r>0&&(0,a.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&p(e.value),children:[(0,a.jsx)("span",{children:e.label}),e.badge&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(o[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},5051:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var a=t(7437),s=t(2265);function o(e){let{isOpen:r,onClose:t,children:o,title:n,maxWidthClass:i="max-w-lg",paddingClass:l="p-7",headerMarginClass:d="mb-5",formSpaceYClass:c="space-y-5",className:u="",showCloseButton:m=!0,closeOnBackdrop:x=!0}=e,[g,h]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!r)return;let e=requestAnimationFrame(()=>h(!0));return()=>{cancelAnimationFrame(e),h(!1)}},[r]),(0,s.useEffect)(()=>{if(!r)return;let e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,t]),r)?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 transition-opacity duration-200 ".concat(g?"opacity-100":"opacity-0"),onClick:()=>{x&&t()},"aria-modal":"true",role:"dialog",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl ".concat(l," w-full ").concat(i," max-h-[90vh] overflow-y-auto transform transition-all duration-200 ease-out ").concat(g?"opacity-100 scale-100":"opacity-0 scale-95"," ").concat(u),onClick:e=>e.stopPropagation(),children:[(n||m)&&(0,a.jsxs)("div",{className:"flex items-center justify-between ".concat(d),children:[n?(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n}):(0,a.jsx)("div",{}),m&&(0,a.jsx)("button",{onClick:t,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Cerrar",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:c,children:o})]})}):null}},5922:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},8960:function(e){!function(){var r={229:function(e){var r,t,a,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:n}catch(e){t=n}}();var l=[],d=!1,c=-1;function u(){d&&a&&(d=!1,a.length?l=a.concat(l):c=-1,l.length&&m())}function m(){if(!d){var e=i(u);d=!0;for(var r=l.length;r;){for(a=l,l=[];++c<r;)a&&a[c].run();c=-1,r=l.length}a=null,d=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function x(e,r){this.fun=e,this.array=r}function g(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new x(e,r)),1!==l.length||d||i(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},n=!0;try{r[e](o,o.exports,a),n=!1}finally{n&&delete t[e]}return o.exports}a.ab="//";var s=a(229);e.exports=s}()},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var a,o={},d=null,c=null;for(a in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)n.call(r,a)&&!l.hasOwnProperty(a)&&(o[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===o[a]&&(o[a]=r[a]);return{$$typeof:s,type:e,key:d,ref:c,props:o,_owner:i.current}}r.Fragment=o,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=5262)}),_N_E=e.O()}]);