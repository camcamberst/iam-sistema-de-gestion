(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7199],{2601:function(e,r,t){"use strict";var a,s;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(8960)},9344:function(e,r,t){Promise.resolve().then(t.bind(t,5427))},5427:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var a=t(7437),s=t(2265),n=t(4033),o=t(1185);function i(){let[e,r]=(0,s.useState)([]),[t,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)(null);async function d(){try{n(!0),i(null);let e=await fetch("/api/rates/reference"),t=await e.json();if(!t.success)throw Error(t.error||"Error al cargar tasas de referencia");r(t.data)}catch(e){i(e.message||"Error inesperado")}finally{n(!1)}}(0,s.useEffect)(()=>{d()},[]);let l=e=>{switch(e){case"USD_COP":return"USD → COP";case"EUR_USD":return"EUR → USD";case"GBP_USD":return"GBP → USD";default:return e}},c=e=>e.includes("TRM")?"\uD83C\uDFDB️":e.includes("SPOT")?"\uD83D\uDCCA":e.includes("ExchangeRate")?"\uD83C\uDF10":"\uD83D\uDCCB",u=(e,r)=>"USD_COP"===r?e.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}):e.toFixed(4);return(0,a.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/20 dark:border-gray-600/20 shadow-md dark:shadow-lg dark:shadow-indigo-900/10 dark:ring-0.5 dark:ring-indigo-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Referencia"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Valores del d\xeda desde fuentes externas"})]})]}),(0,a.jsx)("button",{onClick:d,className:"px-3 py-1.5 text-xs font-medium text-indigo-600 bg-indigo-50/80 backdrop-blur-sm border border-indigo-200/50 rounded-lg hover:bg-indigo-100/80 focus:ring-2 focus:ring-indigo-500/20 transition-all duration-200",disabled:t,children:t?"Actualizando...":"Actualizar"})]}),o?(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 text-xs mb-3",children:o}),(0,a.jsx)("button",{onClick:d,className:"px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-lg hover:bg-red-100/80 focus:ring-2 focus:ring-red-500/20 transition-all duration-200",children:"Reintentar"})]}):(0,a.jsx)("div",{className:"space-y-2",children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium mb-1",children:"No hay tasas de referencia"}),(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-400 text-xs",children:"Las tasas se cargar\xe1n autom\xe1ticamente"})]}):e.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-indigo-50/60 dark:bg-indigo-50/60 backdrop-blur-sm rounded-lg border border-indigo-200/30 dark:border-indigo-200/30 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-indigo-100 dark:bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs",children:c(e.source)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:l(e.kind)}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-900",children:e.source})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-900",children:u(e.value,e.kind)}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-900",children:new Date(e.lastUpdated).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]},r))}),e.length>0&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-600/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,a.jsx)("span",{children:"Usa estos valores como referencia para personalizar tus tasas"})]})})]})}var d=t(883);function l(){let e=(0,n.useRouter)(),[r,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),[g,h]=(0,s.useState)(null),[b,p]=(0,s.useState)(!0),[f,y]=(0,s.useState)(0),v=t(5922).O;(0,s.useEffect)(()=>{let r=!0;return async function(){try{var t;console.log("\uD83D\uDD0D Iniciando verificaci\xf3n de autenticaci\xf3n..."),p(!0);let{data:a,error:s}=await v.auth.getUser();if(console.log("\uD83D\uDD10 Auth result:",{auth:a,authError:s}),s||!(null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.id)){console.log("❌ No autenticado, redirigiendo..."),r&&e.push("/");return}let{data:n,error:o}=await v.from("users").select("id,name,email,role").eq("id",a.user.id).single();if(console.log("\uD83D\uDC64 User data:",{userRow:n,userError:o}),o||!n){console.log("❌ Usuario no encontrado, redirigiendo..."),r&&e.push("/");return}if("super_admin"!==n.role&&"admin"!==n.role){console.log("❌ Rol no autorizado:",n.role),r&&e.push("/admin/dashboard");return}let i=[];if("admin"===n.role){let{data:e,error:r}=await v.from("user_groups").select("groups(name)").eq("user_id",a.user.id);console.log("\uD83D\uDC65 Groups data:",{ug:e,groupsError:r}),i=(e||[]).map(e=>{var r;return null===(r=e.groups)||void 0===r?void 0:r.name}).filter(Boolean)}let d={id:n.id,name:n.name,email:n.email,role:n.role,groups:i};console.log("✅ Usuario autorizado:",d),r&&h(d)}catch(t){console.error("❌ Error de autenticaci\xf3n:",t),r&&e.push("/")}finally{r&&p(!1)}}(),()=>{r=!1}},[]);let[k,j]=(0,s.useState)({scope:"global",kind:"USD→COP",value:"",source:"manual"}),[w,N]=(0,s.useState)([]);async function D(){if(g)try{u(!0),m(null);let e=new URLSearchParams;e.append("activeOnly","true"),"super_admin"===g.role||"admin"===g.role&&g.groups&&g.groups.length>0&&g.groups.forEach(r=>{e.append("scope","group:".concat(r))});let r=await fetch("/api/rates?".concat(e.toString())),t=await r.json();if(!t.success)throw Error(t.error||"Error al cargar tasas");l(t.data)}catch(e){m(e.message||"Error inesperado")}finally{u(!1)}}async function S(e){if(e.preventDefault(),!g){m("Usuario no autenticado");return}try{u(!0),m(null);let e=await fetch("/api/rates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scope:k.scope,kind:k.kind,value:Number(k.value),source:k.source,author_id:g.id})}),r=await e.json();if(!r.success)throw Error(r.error||"Error al crear tasa");j({...k,value:""}),await D(),y(e=>e+1),m(null)}catch(e){m(e.message||"Error inesperado")}finally{u(!1)}}return((0,s.useEffect)(()=>{if(g){let e=[];"super_admin"===g.role?(e.push({value:"global",label:"Global (todos los grupos)"}),g.groups&&g.groups.length>0&&g.groups.forEach(r=>{e.push({value:"group:".concat(r),label:"Grupo: ".concat(r)})})):"admin"===g.role&&g.groups&&g.groups.length>0&&g.groups.forEach(r=>{e.push({value:"group:".concat(r),label:"Grupo: ".concat(r)})}),N(e),e.length>0&&j(r=>({...r,scope:e[0].value})),D()}},[g]),b)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20 text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Verificando permisos..."})]})})}):g?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsx)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-md",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Definir RATES"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"super_admin"===g.role?"Puedes gestionar RATES globales y por grupo":"Solo puedes gestionar RATES de tus grupos asignados"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Acceso: ",(0,a.jsx)("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"super_admin"===g.role?"Super Admin":"Admin"})]})]})})}),(0,a.jsx)("div",{className:"mb-8 relative z-[9997]",children:(0,a.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-md dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 relative z-[9997]",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,a.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Establecer rates manual"})]}),(0,a.jsxs)("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Aplicar a"}),(0,a.jsx)(d.Z,{options:w.map(e=>({value:e.value,label:e.label})),value:k.scope,onChange:e=>j({...k,scope:e}),placeholder:"Selecciona alcance",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Divisa"}),(0,a.jsx)(d.Z,{options:[{value:"USD→COP",label:"USD → COP"},{value:"EUR→USD",label:"EUR → USD"},{value:"GBP→USD",label:"GBP → USD"}],value:k.kind,onChange:e=>j({...k,kind:e}),placeholder:"Selecciona divisa",className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-2",children:"Valor"}),(0,a.jsx)("input",{type:"number",step:"any",className:"w-full px-3 py-2 text-sm border border-gray-200/50 dark:border-gray-600/50 rounded-lg bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",value:k.value,onChange:e=>j({...k,value:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:"Guardar"}),(0,a.jsx)("button",{type:"button",className:"flex-1 px-4 py-2 text-sm font-medium text-blue-600 bg-white/80 backdrop-blur-sm border border-blue-200/50 rounded-lg hover:bg-blue-50/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",onClick:D,children:"Refrescar"})]})]}),x&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50/80 dark:bg-red-900/20 backdrop-blur-sm border border-red-200/50 dark:border-red-800/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 text-xs",children:x})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 relative z-0",children:[(0,a.jsx)(o.Z,{refreshTrigger:f}),(0,a.jsx)(i,{})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:(0,a.jsxs)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20 text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Acceso Denegado"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:"No tienes permisos para acceder a esta funci\xf3n."}),(0,a.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-md",children:"Volver al Dashboard"})]})})})}},1185:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var a=t(7437),s=t(2265);function n(e){let{compact:r=!1,showTitle:t=!0,refreshTrigger:n}=e,[o,i]=(0,s.useState)([]),[d,l]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null);async function x(){try{l(!0),u(null);let e=await fetch("/api/rates?activeOnly=true"),r=await e.json();if(!r.success)throw Error(r.error||"Error al cargar tasas");let t=new Date,a=["USD→COP","EUR→USD","GBP→USD"],s=r.data.filter(e=>{let r=e.valid_to?new Date(e.valid_to):null;return(!r||r>t)&&a.includes(e.kind)}).sort((e,r)=>new Date(r.valid_from).getTime()-new Date(e.valid_from).getTime()).reduce((e,r)=>(e.find(e=>e.kind===r.kind)||e.push(r),e),[]).sort((e,r)=>{let t={"USD→COP":1,"EUR→USD":2,"GBP→USD":3};return(t[e.kind]||4)-(t[r.kind]||4)});i(s)}catch(e){u(e.message||"Error inesperado")}finally{l(!1)}}(0,s.useEffect)(()=>{x()},[]),(0,s.useEffect)(()=>{void 0!==n&&x()},[n]);let m=e=>{switch(e){case"USD→COP":return"USD → COP";case"EUR→USD":return"EUR → USD";case"GBP→USD":return"GBP → USD";default:return e}},g=e=>"global"===e?"Global":e.startsWith("group:")?"Grupo: ".concat(e.replace("group:","")):e,h=e=>{switch(e){case"manual":return"✏️";case"ECB":return"\uD83C\uDFDB️";case"system":return"\uD83E\uDD16";case"OXR":return"\uD83D\uDCCA";default:return"\uD83D\uDCCB"}};return r?(0,a.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 cursor-pointer",children:[t&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Solo manuales"})]}),d&&(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin ml-auto"})]}),c?(0,a.jsx)("p",{className:"text-red-600 text-xs",children:c}):(0,a.jsx)("div",{className:"space-y-1",children:0===o.length?(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-xs text-center py-2",children:"No hay tasas de calculadora"}):o.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-gray-50 dark:bg-white rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs",children:h(e.source)}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-900",children:m(e.kind)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:e.value}),(0,a.jsx)("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:g(e.scope)})]})]},e.id))})]}):(0,a.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/20 dark:border-gray-600/20 shadow-md dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Solo tasas manuales"})]})]}),(0,a.jsx)("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/80 backdrop-blur-sm border border-blue-200/50 rounded-lg hover:bg-blue-100/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",disabled:d,children:d?"Actualizando...":"Actualizar"})]}),c?(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("p",{className:"text-red-600 text-xs mb-3",children:c}),(0,a.jsx)("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-lg hover:bg-red-100/80 focus:ring-2 focus:ring-red-500/20 transition-all duration-200",children:"Reintentar"})]}):(0,a.jsx)("div",{className:"space-y-2",children:0===o.length?(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium mb-1",children:"No hay tasas de calculadora"}),(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-400 text-xs",children:"Configura las tasas manualmente"})]}):o.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-white backdrop-blur-sm rounded-lg border border-gray-200/30 dark:border-gray-500/30 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gray-50 dark:bg-gray-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xs",children:h(e.source)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:m(e.kind)}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-900",children:g(e.scope)})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-900",children:e.value}),(0,a.jsx)("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:new Date(e.valid_from).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]},e.id))})]})}},883:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var a=t(7437),s=t(2265);let n={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function o(e){let{options:r,value:t,onChange:o,placeholder:i="Selecciona una opci\xf3n",className:d="",disabled:l=!1,maxHeight:c="max-h-60",autoOpen:u=!1}=e,[x,m]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{u&&r.length>1?m(!0):u||m(!1)},[u,r.length]),(0,s.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{x&&g.current&&setTimeout(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[x]);let h=r.find(e=>e.value===t),b=e=>{o(e),m(!1)};return(0,a.jsxs)("div",{className:"relative ".concat(d),ref:g,children:[(0,a.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(l?"opacity-50 cursor-not-allowed":""),onClick:()=>!l&&m(!x),disabled:l,"aria-haspopup":"listbox","aria-expanded":x,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{className:h?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:h?h.label:i}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.badge)&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(n[h.badgeColor||"gray"]),children:h.badge}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(x?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),x&&(0,a.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===r.length?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):r.map((e,r)=>(0,a.jsxs)("div",{children:[r>0&&(0,a.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&b(e.value),children:[(0,a.jsx)("span",{children:e.label}),e.badge&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(n[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},5922:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},8960:function(e){!function(){var r={229:function(e){var r,t,a,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var d=[],l=!1,c=-1;function u(){l&&a&&(l=!1,a.length?d=a.concat(d):c=-1,d.length&&x())}function x(){if(!l){var e=i(u);l=!0;for(var r=d.length;r;){for(a=d,d=[];++c<r;)a&&a[c].run();c=-1,r=d.length}a=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function g(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];d.push(new m(e,r)),1!==d.length||l||i(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var n=t[e]={exports:{}},o=!0;try{r[e](n,n.exports,a),o=!1}finally{o&&delete t[e]}return n.exports}a.ab="//";var s=a(229);e.exports=s}()},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,t){var a,n={},l=null,c=null;for(a in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(c=r.ref),r)o.call(r,a)&&!d.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===n[a]&&(n[a]=r[a]);return{$$typeof:s,type:e,key:l,ref:c,props:n,_owner:i.current}}r.Fragment=n,r.jsx=l,r.jsxs=l},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=9344)}),_N_E=e.O()}]);