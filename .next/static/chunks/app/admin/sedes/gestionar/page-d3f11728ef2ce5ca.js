(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6192],{4083:function(e,r,a){Promise.resolve().then(a.bind(a,8153))},8153:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return d}});var s=a(7437),o=a(2265),t=a(4033),n=a(883),l=a(5051),i=a(327);function d(){var e,r,a,d,c,m;let[x,u]=(0,o.useState)([]),[g,h]=(0,o.useState)([]),[b,p]=(0,o.useState)(!0),[f,v]=(0,o.useState)(""),[y,j]=(0,o.useState)(""),[N,k]=(0,o.useState)(""),[w,D]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!1),[S,R]=(0,o.useState)(""),[O,L]=(0,o.useState)(""),[_,T]=(0,o.useState)(!1),[M,A]=(0,o.useState)(""),[B,F]=(0,o.useState)([]),[W,H]=(0,o.useState)(""),[z,I]=(0,o.useState)(""),[P,G]=(0,o.useState)([]),[U,V]=(0,o.useState)(null),[Z,q]=(0,o.useState)(null),[Y,J]=(0,o.useState)(!1),[$,Q]=(0,o.useState)(null),[K,X]=(0,o.useState)([]),[ee,er]=(0,o.useState)(""),[ea,es]=(0,o.useState)(""),[eo,et]=(0,o.useState)(!1),[en,el]=(0,o.useState)(""),[ei,ed]=(0,o.useState)([]),[ec,em]=(0,o.useState)(!1),[ex,eu]=(0,o.useState)(null),[eg,eh]=(0,o.useState)(null),[eb,ep]=(0,o.useState)(!1),[ef,ev]=(0,o.useState)(null),[ey,ej]=(0,o.useState)(!1),[eN,ek]=(0,o.useState)(null),ew=(0,t.useRouter)(),eD=(e,r)=>{ew.push("/admin/sedes/portafolio?model=".concat(e,"&email=").concat(encodeURIComponent(r)))};(0,o.useEffect)(()=>{window.scrollTo(0,0),eE()},[]),(0,o.useEffect)(()=>{M&&""!==M&&(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Ejecutando useEffect con:",{userRole:M,userGroups:B}),eO(),eC())},[M,B]);let eE=()=>{try{let r=localStorage.getItem("user");if(r){var e;let a=JSON.parse(r);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Datos del usuario desde localStorage:",{id:a.id,role:a.role,groups:a.groups}),A(a.role||"admin");let s=(null===(e=a.groups)||void 0===e?void 0:e.map(e=>e.id))||[];console.log("\uD83D\uDD0D [GESTIONAR-SEDES] IDs de grupos extra\xeddos:",s),F(s),H(a.id||"")}}catch(e){console.warn("Error parsing user data from localStorage:",e)}},eC=async()=>{try{if(!M||""===M){console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Saltando carga de sedes - userRole vac\xedo");return}console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Cargando sedes disponibles con:",{userRole:M,userGroups:B});let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:M,userGroups:B})}),r=await e.json();if(console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Respuesta de API:",r),!r.success)return;let a=r.groups.filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);console.log("\uD83D\uDD0D [GESTIONAR-SEDES] Sedes operativas filtradas:",a),G(a),I(""),k("")}catch(e){console.error("Error cargando sedes disponibles:",e)}},eS=async()=>{try{console.log("\uD83D\uDD04 [FRONTEND] Recargando solo rooms...");let r=await fetch("/api/groups/rooms");if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let a=await r.json();if(a.success){var e;h(a.rooms||[]),console.log("✅ [FRONTEND] Rooms actualizados:",(null===(e=a.rooms)||void 0===e?void 0:e.length)||0)}else console.error("❌ [FRONTEND] Error cargando rooms:",a.error)}catch(e){console.error("❌ [FRONTEND] Error recargando rooms:",e)}},eR=async e=>{try{let a=P.find(r=>r.id===e);if(!a)return;let s=await fetch("/api/groups/rooms"),o=await s.json();if(o.success){let r=o.rooms.filter(r=>r.group_id===e);V({...a,rooms:r})}let t=await fetch("/api/users"),n=await t.json();if(n.success){console.log("\uD83D\uDD0D [DEBUG] Buscando admin para sede:",e),console.log("\uD83D\uDD0D [DEBUG] Todos los usuarios:",n.users.length);let a=n.users.filter(e=>"admin"===e.role);console.log("\uD83D\uDD0D [DEBUG] Solo admins:",a.length);let s=a.filter(r=>{var a,s;let o=null===(a=r.user_groups)||void 0===a?void 0:a.some(r=>r.id===e);return console.log("\uD83D\uDD0D [DEBUG] Admin ".concat(r.name,":"),{user_groups:r.user_groups,tieneEstaSede:o,sedeId:e,sedesAsignadas:(null===(s=r.user_groups)||void 0===s?void 0:s.length)||0}),o});console.log("\uD83D\uDD0D [DEBUG] Admins asignados a esta sede:",s.length);let o=null;if(s.length>0){if(1===s.length)o=s[0],console.log("\uD83D\uDD0D [DEBUG] Solo un admin asignado:",o.name);else{var r;o=s.reduce((e,r)=>{var a,s;let o=(null===(a=e.user_groups)||void 0===a?void 0:a.length)||0,t=(null===(s=r.user_groups)||void 0===s?void 0:s.length)||0;return console.log("\uD83D\uDD0D [DEBUG] Comparando: ".concat(e.name," (").concat(o," sedes) vs ").concat(r.name," (").concat(t," sedes)")),t<o?r:e}),console.log("\uD83D\uDD0D [DEBUG] Admin seleccionado (menos sedes):",o.name,"(".concat((null===(r=o.user_groups)||void 0===r?void 0:r.length)||0," sedes)"))}}console.log("\uD83D\uDD0D [DEBUG] Admin final seleccionado:",o),q(o)}}catch(e){console.error("Error cargando informaci\xf3n de la sede:",e)}},eO=async()=>{try{p(!0),v("");let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:M,userGroups:B})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();if(r.success){let e=(r.groups||[]).filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);u(e),e.length>0&&k(e[0].id)}else v("Error cargando sedes: "+(r.error||"Error desconocido"));let a=await fetch("/api/groups/rooms");if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();s.success?h(s.rooms||[]):v("Error cargando rooms: "+(s.error||"Error desconocido"))}catch(e){console.error("Error cargando datos:",e),v("Error de conexi\xf3n: "+(e instanceof Error?e.message:"Error desconocido"))}finally{p(!1)}},eL=async e=>{if(e.preventDefault(),S.trim()){T(!0);try{let e=localStorage.getItem("supabase.auth.token"),r={"Content-Type":"application/json"};e&&(r.Authorization="Bearer ".concat(e));let a=await fetch("/api/groups",{method:"POST",headers:r,body:JSON.stringify({name:S.trim()})}),s=await a.json();s.success?(j("Sede creada exitosamente"),R(""),D(!1),eO()):v("Error creando sede: "+s.error)}catch(e){console.error("Error:",e),v("Error de conexi\xf3n")}finally{T(!1)}}},e_=async e=>{if(e.preventDefault(),O.trim()&&N){T(!0);try{let e=await fetch("/api/groups/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_name:O.trim(),group_id:N})}),r=await e.json();r.success?(j("Room creado exitosamente"),L(""),C(!1),await Promise.all([eS(),z?eR(z):Promise.resolve()])):r.error&&r.error.includes("ya existe")?v("Este Room ya existe"):v("Error creando room: "+r.error)}catch(e){console.error("Error:",e),v("Error de conexi\xf3n")}finally{T(!1)}}},eT=async e=>{try{console.log("\uD83D\uDD0D [FRONTEND] Haciendo clic en room:",e.room_name),Q(e),J(!0),er(""),es(""),console.log("\uD83D\uDD0D [FRONTEND] Cargando asignaciones para room ID:",e.id);let a=await fetch("/api/room-assignments?roomId=".concat(e.id)),s=await a.json();if(console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",s),s.success){var r;X(s.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones cargadas:",(null===(r=s.assignments)||void 0===r?void 0:r.length)||0)}else console.error("❌ [FRONTEND] Error cargando asignaciones:",s.error),X([])}catch(e){console.error("❌ [FRONTEND] Error en handleRoomClick:",e),X([])}},eM=async e=>{if($){console.log("\uD83D\uDD0D [FRONTEND] Clic en jornada:",e),el(e);try{let e=await fetch("/api/groups/".concat($.group_id,"/models")),r=await e.json();r.success?(ed(r.models||[]),et(!0)):v("Error cargando modelos: "+r.error)}catch(e){console.error("❌ [FRONTEND] Error cargando modelos:",e),v("Error de conexi\xf3n")}}},eA=async e=>{eu(e);try{let r=await fetch("/api/models/".concat(e.id,"/assignments")),a=await r.json();a.success&&a.assignments.length>0?(eh({model:e,existingAssignments:a.assignments,newAssignment:{room_id:null==$?void 0:$.id,room_name:null==$?void 0:$.room_name,jornada:en}}),em(!0),et(!1)):await eF(e,"assign")}catch(e){console.error("❌ [FRONTEND] Error verificando asignaciones:",e),v("Error verificando asignaciones")}},eB=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{r>0&&(console.log("⏳ [FRONTEND] Esperando ".concat(r,"ms para sincronizaci\xf3n...")),await new Promise(e=>setTimeout(e,r))),console.log("\uD83D\uDD0D [FRONTEND] Recargando asignaciones para room ID:",e.id);let s=await fetch("/api/room-assignments?roomId=".concat(e.id)),o=await s.json();if(console.log("\uD83D\uDD0D [FRONTEND] Respuesta del endpoint:",o),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones raw:",o.assignments),o.success){var a;X(o.assignments||[]),console.log("\uD83D\uDD0D [FRONTEND] Asignaciones recibidas:",(null===(a=o.assignments)||void 0===a?void 0:a.length)||0),console.log("\uD83D\uDD0D [FRONTEND] Estado actualizado con:",o.assignments)}else console.error("❌ [FRONTEND] Error recargando asignaciones:",o.error),X([])}catch(e){console.error("❌ [FRONTEND] Error en reloadRoomAssignments:",e),X([])}},eF=async(e,r)=>{try{var a;console.log("\uD83D\uDD0D [FRONTEND] Asignando modelo:",{model_id:e.id,model_name:e.name,room_id:null==$?void 0:$.id,room_name:null==$?void 0:$.room_name,jornada:en,action:r});let s={action:r,model_id:e.id,room_id:null==$?void 0:$.id,jornada:en};if("move"===r&&(null==eg?void 0:null===(a=eg.existingAssignments)||void 0===a?void 0:a.length)>0){let e=eg.existingAssignments[0];s.from_room_id=e.room_id,s.from_jornada=e.jornada}let o=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await o.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de asignaci\xf3n:",t),t.success?(console.log("✅ [FRONTEND] Asignaci\xf3n exitosa, recargando asignaciones..."),es("Modelo ".concat("move"===r?"movida":"asignada"," exitosamente")),er(""),$&&(console.log("\uD83D\uDD0D [FRONTEND] Llamando a reloadRoomAssignments..."),await eB($),console.log("✅ [FRONTEND] reloadRoomAssignments completado")),et(!1),em(!1),eu(null),eh(null)):(console.error("❌ [FRONTEND] Error en asignaci\xf3n:",t.error),er("Error asignando modelo: "+t.error),es(""))}catch(e){console.error("❌ [FRONTEND] Error asignando modelo:",e),er("Error de conexi\xf3n"),es("")}},eW=e=>{ek(e),ej(!0)},eH=async()=>{if(eN&&$){if(eN.isDeleting){console.log("⚠️ [FRONTEND] Eliminaci\xf3n ya en progreso, ignorando...");return}ek({...eN,isDeleting:!0});try{console.log("\uD83D\uDD0D [FRONTEND] Eliminando asignaci\xf3n:",{model_id:eN.model_id,model_name:eN.model_name,room_id:$.id,room_name:$.room_name,jornada:eN.jornada});let e=await fetch("/api/room-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"remove",model_id:eN.model_id,room_id:$.id,jornada:eN.jornada})}),r=await e.json();console.log("\uD83D\uDD0D [FRONTEND] Respuesta de eliminaci\xf3n:",r),r.success?(console.log("✅ [FRONTEND] Eliminaci\xf3n exitosa, recargando asignaciones..."),es("Modelo eliminada exitosamente de ".concat(eN.jornada)),er(""),console.log("\uD83D\uDD04 [FRONTEND] Recargando asignaciones para sincronizar UI..."),await eB($),console.log("✅ [FRONTEND] Sincronizaci\xf3n completada")):(console.error("❌ [FRONTEND] Error en eliminaci\xf3n:",r.error),er("Error eliminando modelo: "+r.error),es(""))}catch(e){console.error("❌ [FRONTEND] Error eliminando modelo:",e),er("Error de conexi\xf3n"),es("")}finally{ej(!1),ek(null)}}},ez=async()=>{if(console.log("\uD83D\uDD0D [DELETE-ROOM] handleDeleteRoom ejecut\xe1ndose con:",ef),!ef){console.log("❌ [DELETE-ROOM] No hay room para eliminar");return}try{T(!0),v(""),j(""),console.log("\uD83D\uDD0D [FRONTEND] Eliminando room:",{room_id:ef.id,room_name:ef.room_name,group_id:ef.group_id});let e=await fetch("/api/groups/rooms?id=".concat(ef.id),{method:"DELETE"});console.log("\uD83D\uDD0D [DELETE-ROOM] Respuesta de API:",e.status);let r=await e.json();console.log("\uD83D\uDD0D [DELETE-ROOM] Resultado:",r),r.success?(j(r.message),v(""),z&&await eR(z),ep(!1),ev(null)):(v(r.error||"Error eliminando room"),j(""))}catch(e){console.error("❌ [DELETE-ROOM] Error eliminando room:",e),v("Error de conexi\xf3n eliminando room"),j("")}finally{T(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando datos..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,s.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Sedes"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:"Administra las sedes, rooms y configuraciones del sistema"})]})]})})]})}),"admin"===M&&0===P.length&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 backdrop-blur-sm rounded-xl p-6 border border-yellow-200/30",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-yellow-800",children:"Sin Sedes Asignadas"}),(0,s.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"No tienes sedes asignadas para gestionar. Contacta al Super Admin para que te asigne sedes."})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[(0,s.jsx)("div",{className:"flex flex-col h-full",children:(0,s.jsxs)("div",{className:"relative flex-1 z-10",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),(0,s.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar Sede"})]}),(0,s.jsx)(n.Z,{options:P.map(e=>({value:e.id,label:e.name})),value:z,onChange:e=>{I(e),k(e),e?eR(e):(V(null),q(null))},placeholder:"Selecciona una sede para gestionar",className:"text-sm"}),0===P.length&&(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"No hay sedes disponibles para gestionar"})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-6 h-full",children:["super_admin"===M&&(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),(0,s.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Nueva Sede"})]}),(0,s.jsx)("button",{onClick:()=>D(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Sede"})]})})]}),z&&(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-2xl blur-sm"}),(0,s.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 h-full flex flex-col dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Crear Room"})]}),(0,s.jsx)("button",{onClick:()=>C(!0),className:"w-32 px-4 py-2 text-sm font-medium bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"+ Crear Room"})]})})]})]})]}),U&&(0,s.jsxs)("div",{className:"relative mb-10",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-indigo-500/5 rounded-xl blur-sm"}),(0,s.jsxs)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg shadow-md border border-white/20 dark:border-gray-600/20 p-4 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:U.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(null===(e=U.rooms)||void 0===e?void 0:e.length)||0," rooms configurados"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1.5 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:"Activa"})]})]}),Z?(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/80 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm rounded-lg p-4 mb-4 border border-blue-200/30 dark:border-blue-700/30",children:[(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Admin Asignado"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:(null===(r=Z.name)||void 0===r?void 0:r.charAt(0))||"A"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:Z.name}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:Z.email}),(0,s.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:[(null===(a=Z.user_groups)||void 0===a?void 0:a.length)||0," sede",1!==((null===(d=Z.user_groups)||void 0===d?void 0:d.length)||0)?"s":""," asignada",1!==((null===(c=Z.user_groups)||void 0===c?void 0:c.length)||0)?"s":""]})]})]})]}):(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 dark:from-yellow-900/20 dark:to-orange-900/20 backdrop-blur-sm rounded-xl p-5 mb-6 border border-yellow-200/30 dark:border-yellow-700/30",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No hay admin asignado a esta sede"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Rooms Disponibles"})]}),U.rooms&&U.rooms.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:U.rooms.map(e=>(0,s.jsx)("div",{className:"inline-flex items-center",children:(0,s.jsxs)("button",{onClick:()=>eT(e),className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-gradient-to-r from-gray-100 to-slate-100 dark:from-gray-600 dark:to-slate-600 text-gray-800 dark:text-gray-200 hover:from-gray-200 hover:to-slate-200 dark:hover:from-gray-500 dark:hover:to-slate-500 hover:text-gray-900 dark:hover:text-gray-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm hover:shadow-md transform hover:-translate-y-0.5 border border-gray-200/50 dark:border-gray-500/50",children:[(0,s.jsx)("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.room_name]})},e.id))}):(0,s.jsxs)("div",{className:"bg-gradient-to-r from-gray-50/80 to-slate-50/80 dark:from-gray-600/80 dark:to-slate-600/80 backdrop-blur-sm rounded-xl p-6 text-center border border-gray-200/30 dark:border-gray-500/30",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"No hay rooms configurados en esta sede"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Usa el bot\xf3n "Crear Room" para agregar rooms'})]})]})]})]}),w&&"super_admin"===M&&(0,s.jsxs)(l.Z,{isOpen:w,onClose:()=>D(!1),title:"Crear Nueva Sede",maxWidthClass:"max-w-lg",paddingClass:"p-7",headerMarginClass:"mb-5",formSpaceYClass:"space-y-5",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-5",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-slate-700 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})}),(0,s.jsxs)("form",{onSubmit:eL,className:"space-y-5",children:[f&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("p",{className:"text-sm text-red-700 font-medium",children:f})]})}),y&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-sm text-green-700 font-medium",children:y})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre de la Sede"}),(0,s.jsx)("input",{type:"text",value:S,onChange:e=>R(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: Sede Norte",required:!0})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-2 flex-nowrap",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{D(!1),R("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-2 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50 text-sm whitespace-nowrap",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",disabled:_,className:"flex-1 bg-gradient-to-r from-gray-700 to-slate-800 text-white py-2 px-4 rounded-xl hover:from-gray-800 hover:to-slate-900 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm whitespace-nowrap",children:_?"Creando...":"Crear Sede"})]})]})]}),E&&(0,s.jsxs)(l.Z,{isOpen:E,onClose:()=>C(!1),title:"Crear Room",maxWidthClass:"max-w-lg",paddingClass:"p-7",headerMarginClass:"mb-5",formSpaceYClass:"space-y-5",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-5",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})}),(0,s.jsxs)("form",{onSubmit:e_,className:"space-y-5",children:[f&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("p",{className:"text-sm text-red-700 font-medium",children:f})]})}),y&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-sm text-green-700 font-medium",children:y})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Sede Seleccionada"}),(0,s.jsx)("div",{className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:(null===(m=x.find(e=>e.id===N))||void 0===m?void 0:m.name)||"Ninguna sede seleccionada"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-2",children:"Nombre del Room"}),(0,s.jsx)("input",{type:"text",value:O,onChange:e=>L(e.target.value),className:"w-full border border-gray-200 dark:border-gray-600 rounded-xl px-4 py-2.5 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm transition-all duration-200",placeholder:"Ej: ROOM01",required:!0})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-2 flex-nowrap",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{C(!1),L(""),k("")},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-2 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50 text-sm whitespace-nowrap",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",disabled:_||!N,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-4 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 text-sm whitespace-nowrap",children:_?"Creando...":"Crear Room"})]})]})]}),Y&&$&&(0,s.jsxs)(l.Z,{isOpen:Y,onClose:()=>{J(!1),Q(null),X([])},title:"Configuraci\xf3n de ".concat($.room_name),maxWidthClass:"max-w-2xl",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("button",{onClick:()=>{ev($),ep(!0)},className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors border border-red-200/60 dark:border-red-700/40",title:"Eliminar room",children:(0,s.jsxs)("span",{className:"inline-flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})})})}),ee&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:ee})})]})}),ea&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("p",{className:"text-sm text-green-800",children:ea})})]})}),(0,s.jsx)("div",{className:"space-y-4",children:["MA\xd1ANA","TARDE","NOCHE"].map(e=>{let r=K.filter(r=>r.jornada===e);return(0,s.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 dark:bg-gray-700/50",children:[(0,s.jsxs)("h3",{className:"text-md font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),e]}),r.length>0?(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg p-2 -m-2 transition-colors group",onClick:()=>eD(e.model_id,e.model_email),title:"Ver portafolio de la modelo",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:(0,i.W)(e.model_email)||e.model_name||"Modelo no especificada"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.model_email||"Email no disponible"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:"Asignada"}),(0,s.jsx)("button",{onClick:()=>eW(e),className:"w-8 h-8 rounded-full flex items-center justify-center transition-colors group bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-800/50 cursor-pointer",title:"Eliminar modelo de esta jornada",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400 group-hover:text-red-700 dark:group-hover:text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))}):(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-600 rounded-lg p-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-500 transition-colors",onClick:()=>eM(e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"No hay modelos asignadas"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Haz clic para asignar"})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-500 text-gray-600 dark:text-gray-300",children:"Disponible"})})]})]},e)})}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:(0,s.jsx)("button",{onClick:()=>{J(!1),Q(null),X([])},className:"w-full bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",children:"Cerrar"})})]}),eo&&(0,s.jsxs)(l.Z,{isOpen:eo,onClose:()=>{et(!1),ed([]),el("")},title:"Seleccionar Modelo para ".concat(en),maxWidthClass:"max-w-md",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[(0,s.jsx)("div",{className:"space-y-2",children:ei.map(e=>(0,s.jsx)("button",{onClick:()=>eA(e),className:"w-full text-left p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name||"Nombre no disponible"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.email||"Email no disponible"})]})]})},e.id))}),0===ei.length&&(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No hay modelos disponibles"})})]}),ec&&eg&&(0,s.jsxs)(l.Z,{isOpen:ec,onClose:()=>{em(!1),eh(null),eu(null)},title:"Conflicto de Asignaci\xf3n",maxWidthClass:"max-w-md",paddingClass:"p-6",headerMarginClass:"mb-4",formSpaceYClass:"space-y-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:[(0,s.jsx)("strong",{children:eg.model.name})," ya est\xe1 asignada en:"]}),(0,s.jsx)("div",{className:"space-y-2",children:eg.existingAssignments.map((e,r)=>(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.room_name," - ",e.jornada]})]})},r))}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-3",children:"\xbfQu\xe9 deseas hacer?"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>eF(eg.model,"move"),className:"flex-1 bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Mover"}),(0,s.jsx)("button",{onClick:()=>eF(eg.model,"assign"),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Doblar"})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Mover:"})," Desasigna de ubicaci\xf3n actual y asigna aqu\xed"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Doblar:"})," Mantiene ubicaci\xf3n actual y asigna tambi\xe9n aqu\xed"]})]})]}),ey&&eN&&(0,s.jsxs)(l.Z,{isOpen:ey,onClose:()=>{ej(!1),ek(null)},title:"Confirmar Eliminaci\xf3n",maxWidthClass:"max-w-md",paddingClass:"p-8",headerMarginClass:"mb-6",formSpaceYClass:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-6",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar a ",(0,s.jsx)("strong",{children:eN.model_name})," de la jornada ",(0,s.jsx)("strong",{children:eN.jornada}),"?"]}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-600 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:eN.model_name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:eN.model_email})]})]})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{ej(!1),ek(null)},className:"flex-1 bg-gray-100/80 dark:bg-gray-600/80 backdrop-blur-sm text-gray-700 dark:text-gray-200 py-3 px-4 rounded-xl hover:bg-gray-200/80 dark:hover:bg-gray-500/80 transition-all duration-200 font-medium border border-gray-200/50 dark:border-gray-500/50",children:"Cancelar"}),(0,s.jsx)("button",{onClick:eH,disabled:null==eN?void 0:eN.isDeleting,className:"flex-1 py-3 px-4 rounded-xl transition-all duration-200 font-medium shadow-lg ".concat((null==eN?void 0:eN.isDeleting)?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:from-red-700 hover:to-orange-700 hover:shadow-xl transform hover:-translate-y-0.5"),children:(null==eN?void 0:eN.isDeleting)?"Eliminando...":"Eliminar"})]})]}),eb&&ef&&(0,s.jsxs)(l.Z,{isOpen:eb,onClose:()=>{ep(!1),ev(null)},title:"Confirmar Eliminaci\xf3n de Room",maxWidthClass:"max-w-md",paddingClass:"p-8",headerMarginClass:"mb-6",formSpaceYClass:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-6",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["\xbfEst\xe1s seguro de que deseas eliminar el room ",(0,s.jsx)("strong",{children:ef.room_name}),"?"]}),(0,s.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Advertencia"}),(0,s.jsx)("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Esta acci\xf3n no se puede deshacer. Si el room tiene asignaciones activas, no se podr\xe1 eliminar."})]})]})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Cancelando eliminaci\xf3n"),ep(!1),ev(null)},className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{console.log("\uD83D\uDD0D [DELETE-ROOM] Confirmando eliminaci\xf3n de:",ef),ez()},disabled:_,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Eliminando...":"Eliminar Room"})]})]})]})})}},883:function(e,r,a){"use strict";a.d(r,{Z:function(){return n}});var s=a(7437),o=a(2265);let t={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function n(e){let{options:r,value:a,onChange:n,placeholder:l="Selecciona una opci\xf3n",className:i="",disabled:d=!1,maxHeight:c="max-h-60",autoOpen:m=!1}=e,[x,u]=(0,o.useState)(!1),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{m&&r.length>1?u(!0):m||u(!1)},[m,r.length]),(0,o.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(()=>{x&&g.current&&setTimeout(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[x]);let h=r.find(e=>e.value===a),b=e=>{n(e),u(!1)};return(0,s.jsxs)("div",{className:"relative ".concat(i),ref:g,children:[(0,s.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(d?"opacity-50 cursor-not-allowed":""),onClick:()=>!d&&u(!x),disabled:d,"aria-haspopup":"listbox","aria-expanded":x,children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("span",{className:h?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:h?h.label:l}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.badge)&&(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(t[h.badgeColor||"gray"]),children:h.badge}),(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(x?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),x&&(0,s.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===r.length?(0,s.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):r.map((e,r)=>(0,s.jsxs)("div",{children:[r>0&&(0,s.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,s.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===a?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&b(e.value),children:[(0,s.jsx)("span",{children:e.label}),e.badge&&(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(t[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},5051:function(e,r,a){"use strict";a.d(r,{Z:function(){return t}});var s=a(7437),o=a(2265);function t(e){let{isOpen:r,onClose:a,children:t,title:n,maxWidthClass:l="max-w-lg",paddingClass:i="p-7",headerMarginClass:d="mb-5",formSpaceYClass:c="space-y-5",className:m="",showCloseButton:x=!0,closeOnBackdrop:u=!0}=e,[g,h]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{if(!r)return;let e=requestAnimationFrame(()=>h(!0));return()=>{cancelAnimationFrame(e),h(!1)}},[r]),(0,o.useEffect)(()=>{if(!r)return;let e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,a]),r)?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 transition-opacity duration-200 ".concat(g?"opacity-100":"opacity-0"),onClick:()=>{u&&a()},"aria-modal":"true",role:"dialog",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl ".concat(i," w-full ").concat(l," max-h-[90vh] overflow-y-auto transform transition-all duration-200 ease-out ").concat(g?"opacity-100 scale-100":"opacity-0 scale-95"," ").concat(m),onClick:e=>e.stopPropagation(),children:[(n||x)&&(0,s.jsxs)("div",{className:"flex items-center justify-between ".concat(d),children:[n?(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n}):(0,s.jsx)("div",{}),x&&(0,s.jsx)("button",{onClick:a,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Cerrar",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:c,children:t})]})}):null}},327:function(e,r,a){"use strict";a.d(r,{W:function(){return s}});let s=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""},622:function(e,r,a){"use strict";var s=a(2265),o=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,a){var s,t={},d=null,c=null;for(s in void 0!==a&&(d=""+a),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)n.call(r,s)&&!i.hasOwnProperty(s)&&(t[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===t[s]&&(t[s]=r[s]);return{$$typeof:o,type:e,key:d,ref:c,props:t,_owner:l.current}}r.Fragment=t,r.jsx=d,r.jsxs=d},7437:function(e,r,a){"use strict";e.exports=a(622)},4033:function(e,r,a){e.exports=a(5313)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=4083)}),_N_E=e.O()}]);