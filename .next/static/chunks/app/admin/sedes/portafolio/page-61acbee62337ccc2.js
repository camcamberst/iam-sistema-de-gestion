(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6249],{5531:function(e,a,r){"use strict";r.d(a,{Z:function(){return u}});var t=r(2265);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),o=e=>{let a=s(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=(...e)=>e.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim(),d=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:s="",children:o,iconNode:c,...u},m)=>(0,t.createElement)("svg",{ref:m,...i,width:a,height:a,stroke:e,strokeWidth:l?24*Number(r)/Number(a):r,className:n("lucide",s),...!o&&!d(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]])),u=(e,a)=>{let r=(0,t.forwardRef)(({className:r,...s},d)=>(0,t.createElement)(c,{ref:d,iconNode:a,className:n(`lucide-${l(o(e))}`,`lucide-${e}`,r),...s}));return r.displayName=o(e),r}},8253:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},8063:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4530:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9806:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6141:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},9670:function(e,a,r){"use strict";r.d(a,{Z:function(){return t}});let t=(0,r(5531).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5974:function(e,a,r){Promise.resolve().then(r.bind(r,4452))},4452:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return v}});var t=r(7437),l=r(2265),s=r(4033),o=r(9670),n=r(6141),d=r(8063),i=r(4530),c=r(5531);let u=(0,c.Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var m=r(9806);let g=(0,c.Z)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),x=(0,c.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),h=(0,c.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var b=r(8253),p=r(4848),f=r(5051),y=r(327);function v(){let e=(0,s.useRouter)(),a=(0,s.useSearchParams)(),r=(a,r)=>{e.push("/admin/calculator/view-model?modelId=".concat(a))},[c,v]=(0,l.useState)(!0),[k,w]=(0,l.useState)(""),[j,N]=(0,l.useState)(""),[_,S]=(0,l.useState)([]),[E,C]=(0,l.useState)([]),[A,Z]=(0,l.useState)([]),[M,L]=(0,l.useState)([]),[D,P]=(0,l.useState)([]),[O,T]=(0,l.useState)([]),[R,W]=(0,l.useState)(""),[q,F]=(0,l.useState)(""),[z,B]=(0,l.useState)(""),[I,U]=(0,l.useState)(""),[$,J]=(0,l.useState)("grid"),[G,H]=(0,l.useState)(!0),[V,Y]=(0,l.useState)(null),[K,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)("request"),[ea,er]=(0,l.useState)(""),[et,el]=(0,l.useState)(!1),[es,eo]=(0,l.useState)("disponible"),[en,ed]=(0,l.useState)(0),[ei,ec]=(0,l.useState)(""),[eu,em]=(0,l.useState)([]),[eg,ex]=(0,l.useState)("");(0,l.useEffect)(()=>{(()=>{let e=localStorage.getItem("user");if(e){var a;let r=JSON.parse(e);ec(r.role||""),em((null===(a=r.groups)||void 0===a?void 0:a.map(e=>e.id))||[]),ex(r.id||"")}})()},[]),(0,l.useEffect)(()=>{ei&&eu.length>=0&&eh()},[ei,eu]),(0,l.useEffect)(()=>{let r=a.get("model"),t=a.get("email");if(r&&t&&!c){console.log("\uD83D\uDD0D Aplicando filtro autom\xe1tico por modelo:",{modelId:r,modelEmail:t}),ey(r);let a=new URL(window.location.href);a.searchParams.delete("model"),a.searchParams.delete("email"),e.replace(a.pathname+a.search,{scroll:!1})}},[a,e,c]),(0,l.useEffect)(()=>{c||(q||R||z||I?eb():S([]))},[R,q,z,I]);let eh=async()=>{try{v(!0);let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:ei,userGroups:eu})});if(e.ok){let a=await e.json();if(a.success){let e=a.groups.filter(e=>"Otros"!==e.name&&"Sat\xe9lites"!==e.name);Z(e)}}let a=await fetch("/api/plataformas-catalogo");if(a.ok){let e=await a.json();P(Array.isArray(e)?e:[])}let r=await fetch("/api/users?role=modelo");if(r.ok){let e=await r.json(),a=(Array.isArray(e)?e:Array.isArray(null==e?void 0:e.users)?e.users:[]).filter(e=>"modelo"===e.role);T(a.map(e=>e.id))}}catch(e){console.error("Error loading initial data:",e),w("Error al cargar los datos iniciales")}finally{v(!1)}},eb=async()=>{try{q&&await ep(q);let e=new URLSearchParams;R&&e.append("model_id",R),q&&e.append("group_id",q),z&&e.append("jornada",z),I&&e.append("platform_id",I);let a=await fetch("/api/modelo-plataformas?".concat(e.toString()));if(a.ok){let e=await a.json(),r=Array.isArray(e)?e.filter(e=>e.model_name&&!e.model_name.includes("Administrator")&&!e.model_name.includes("Super Administrator")):[];S(r)}else w("Error al cargar las plataformas")}catch(e){console.error("Error loading platforms:",e),w("Error al cargar las plataformas")}},ep=async e=>{try{let a=await fetch("/api/groups/".concat(e,"/models"));if(a.ok){let e=await a.json(),r=Array.isArray(e)?e:Array.isArray(null==e?void 0:e.models)?e.models:[];C(r)}}catch(e){console.error("Error loading models:",e)}},ef=e=>{F(e),W(""),C([]),e&&ep(e)},ey=async e=>{console.log("\uD83D\uDD0D Aplicando filtro por modelo:",e);let a=await fetch("/api/modelo-plataformas?model_id=".concat(e));if(a.ok){let e=await a.json(),r=Array.isArray(e)?e:Array.isArray(null==e?void 0:e.platforms)?e.platforms:[];if(r.length>0){let e=r[0].group_id;e&&(console.log("\uD83D\uDD0D Encontrado grupo para modelo:",e),F(e),await ep(e))}}W(e)},ev=e=>{switch(e){case"disponible":return"bg-slate-200 text-slate-700 border border-slate-300 hover:bg-slate-300";case"solicitada":return"bg-blue-300 text-blue-800 border border-blue-400 hover:bg-blue-400";case"pendiente":return"bg-yellow-300 text-yellow-800 border border-yellow-400 hover:bg-yellow-400";case"entregada":return"bg-green-300 text-green-800 border border-green-400 hover:bg-green-400";case"desactivada":return"bg-gray-800 text-white border border-gray-800 hover:opacity-90";case"inviable":return"bg-red-300 text-red-800 border border-red-400 hover:bg-red-400";default:return"bg-gray-50 text-gray-600 border border-gray-200"}},ek=(e,a)=>{switch(a&&"desactivada"!==e?"confirmada":e){case"disponible":return(0,t.jsx)(o.Z,{className:"w-4 h-4"});case"solicitada":return(0,t.jsx)(n.Z,{className:"w-4 h-4"});case"pendiente":return(0,t.jsx)(d.Z,{className:"w-4 h-4"});case"entregada":case"confirmada":default:return(0,t.jsx)(i.Z,{className:"w-4 h-4"});case"desactivada":return(0,t.jsx)(u,{className:"w-4 h-4"});case"inviable":return(0,t.jsx)(m.Z,{className:"w-4 h-4"})}},ew=(e,a)=>{switch(a&&"desactivada"!==e?"confirmada":e){case"disponible":return"Disponible";case"solicitada":return"Solicitada";case"pendiente":return"Pendiente";case"entregada":return"Entregada";case"desactivada":return"Desactivada";case"inviable":return"Inviable";default:return"Confirmada"}},ej=(e,a)=>{Y(e),ee(a),er(""),eo(e.status||"disponible"),Q(!0)},eN=async()=>{if(V&&eg)try{el(!0),w("");let e=await fetch("/api/modelo-plataformas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model_id:V.model_id,platform_id:V.platform_id,new_status:es,changed_by:eg,reason:ea||null})});if(e.ok)N("Plataforma ".concat(ew(es).toLowerCase()," correctamente")),Q(!1),await eb();else{let a=await e.json();w(a.error||"Error al procesar la acci\xf3n")}}catch(e){console.error("Error executing action:",e),w("Error al procesar la acci\xf3n")}finally{el(!1)}},e_=Object.values(_.filter(e=>0===O.length||O.includes(e.model_id)).reduce((e,a)=>{let r=a.model_id;return e[r]||(e[r]={model_id:a.model_id,model_name:a.model_name,model_email:a.model_email,group_name:a.group_name,group_id:a.group_id,platforms:[]}),e[r].platforms.push(a),e},{}));return c?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,t.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Cargando portafolio..."})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,t.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:["admin"===ei&&0===A.length&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-yellow-50/80 to-orange-50/80 dark:bg-yellow-900/20 dark:border-yellow-700/50 backdrop-blur-sm rounded-xl p-6 border border-yellow-200/30 dark:border-yellow-700/50",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-300",children:"Sin Sedes Asignadas"}),(0,t.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-400 mt-1",children:"No tienes sedes asignadas para ver portafolios. Contacta al Super Admin para que te asigne sedes."})]})]})})}),(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsx)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-md",children:(0,t.jsx)(g,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Portafolio Modelos"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Gesti\xf3n de plataformas por modelo y sede"})]})]})})}),k&&(0,t.jsx)("div",{className:"mb-6 bg-red-50/80 dark:bg-red-900/20 dark:border-red-700/50 backdrop-blur-sm border border-red-200/50 dark:border-red-700/50 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg shadow-sm",children:k}),j&&(0,t.jsx)("div",{className:"mb-6 bg-green-50/80 dark:bg-green-900/20 dark:border-green-700/50 backdrop-blur-sm border border-green-200/50 dark:border-green-700/50 text-green-700 dark:text-green-400 px-4 py-3 rounded-lg shadow-sm",children:j}),(0,t.jsx)("div",{className:"mb-8 z-50 relative",children:(0,t.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[(0,t.jsx)(x,{className:"w-5 h-5 mr-2"}),"Filtros"]}),(0,t.jsx)("button",{onClick:()=>H(!G),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:G?"Ocultar":"Mostrar"})]}),G&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(p.Z,{label:"Grupo",value:q,options:[{label:"Todos los grupos",value:""},...A.map(e=>({label:e.name,value:e.id}))],onChange:e=>ef(e),onFocus:()=>ed(e=>e+1),onBlur:()=>ed(e=>Math.max(0,e-1)),className:"text-sm"}),(0,t.jsx)(p.Z,{label:"Modelo",value:R,options:[{label:"Todas las modelos",value:""},...E.map(e=>({label:(0,y.W)(e.email),value:e.id}))],onChange:e=>W(e),onFocus:()=>ed(e=>e+1),onBlur:()=>ed(e=>Math.max(0,e-1)),className:"text-sm"}),(0,t.jsx)(p.Z,{label:"Jornada",value:z,options:[{label:"Todas las jornadas",value:""},...["MA\xd1ANA","TARDE","NOCHE"].map(e=>({label:e,value:e}))],onChange:e=>B(e),onFocus:()=>ed(e=>e+1),onBlur:()=>ed(e=>Math.max(0,e-1)),className:"text-sm"}),(0,t.jsx)(p.Z,{label:"Plataforma",value:I,options:[{label:"Todas las plataformas",value:""},...D.map(e=>({label:e.name,value:e.id}))],onChange:e=>U(e),onFocus:()=>ed(e=>e+1),onBlur:()=>ed(e=>Math.max(0,e-1)),className:"text-sm"})]})]})}),(0,t.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 transition-all dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 ".concat(en>0?"opacity-30 blur-sm pointer-events-none":"opacity-100"),children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Modelos (",e_.length,")"]})}),0===e_.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(h,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Aplica un filtro de Grupo, Modelo, Room, Jornada o Plataforma para ver resultados."})]}):(0,t.jsx)("div",{className:"space-y-6",children:e_.map(e=>(0,t.jsxs)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl border border-white/30 dark:border-gray-600/30 shadow-lg p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md",children:(0,t.jsx)(h,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 cursor-pointer hover:text-blue-700 dark:hover:text-blue-400 transition-colors",onClick:()=>r(e.model_id,e.model_email),title:"Ver calculadora de la modelo",children:(0,y.W)(e.model_email)}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),e.group_name]})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(D||[]).map(a=>{let r=e.platforms.find(e=>e.platform_id===a.id)||{id:null,model_id:e.model_id,model_name:e.model_name,model_email:e.model_email,platform_id:a.id,platform_name:a.name,platform_code:a.id,status:"disponible",requested_at:null,delivered_at:null,confirmed_at:null,deactivated_at:null,reverted_at:null,requested_by_name:null,delivered_by_name:null,confirmed_by_name:null,deactivated_by_name:null,reverted_by_name:null,notes:null,revert_reason:null,is_initial_config:!1,calculator_sync:!1,calculator_activated_at:null,group_name:e.group_name,group_id:e.group_id,created_at:null,updated_at:null};return(0,t.jsx)("button",{type:"button",className:"px-2.5 py-1 rounded-full text-[11px] leading-5 font-medium transition-colors inline-flex items-center ".concat(ev(r.is_initial_config&&"desactivada"!==r.status?"entregada":r.status)),onClick:()=>ej(r,"request"),children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 align-middle",children:[ek(r.status,r.is_initial_config),r.platform_name]})},"".concat(e.model_id,"-").concat(a.id))})}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-600/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,t.jsxs)("span",{children:["Total: ",D.length," plataformas"]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("span",{className:"text-green-600 dark:text-green-400",children:(()=>{let a=e.platforms.filter(e=>{let a=e.is_initial_config&&"desactivada"!==e.status;return"entregada"===e.status||a}).length;return(0,t.jsxs)(t.Fragment,{children:["Entregadas: ",a]})})()}),(0,t.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["Solicitadas: ",e.platforms.filter(e=>"solicitada"===e.status).length]}),(0,t.jsxs)("span",{className:"text-gray-500 dark:text-gray-500",children:["Disponibles: ",D.length-e.platforms.length]})]})]})})]},e.model_id))})]}),K&&V&&(0,t.jsxs)(f.Z,{isOpen:!0,onClose:()=>Q(!1),title:"request"===X&&"Solicitar Plataforma"||"deliver"===X&&"Entregar Plataforma"||"deactivate"===X&&"Desactivar Plataforma"||"revert"===X&&"Revertir Plataforma"||"Acci\xf3n",maxWidthClass:"max-w-md",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,t.jsx)("strong",{children:"Plataforma:"})," ",V.platform_name]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,t.jsx)("strong",{children:"Modelo:"})," ",(0,y.W)(V.model_email)]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,t.jsx)("strong",{children:"Estado actual:"})," ",ew(V.status)]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Estado"}),(0,t.jsx)(p.Z,{value:es,onChange:e=>eo(e),options:[{label:"Disponible",value:"disponible",color:"#e2e8f0"},{label:"Solicitada",value:"solicitada",color:"#93c5fd"},{label:"Pendiente",value:"pendiente",color:"#fde047"},{label:"Entregada",value:"entregada",color:"#86efac"},{label:"Desactivada",value:"desactivada",color:"#1f2937"},{label:"Inviable",value:"inviable",color:"#fca5a5"}],className:"text-sm"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Notas (opcional)"}),(0,t.jsx)("textarea",{value:ea,onChange:e=>er(e.target.value),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Agregar notas sobre esta acci\xf3n..."})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("button",{onClick:()=>Q(!1),className:"flex-1 px-3 py-1.5 text-xs font-medium border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",disabled:et,children:"Cancelar"}),(0,t.jsx)("button",{onClick:eN,disabled:et,className:"flex-1 px-3 py-1.5 text-xs font-medium bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-md disabled:opacity-50",children:et?"Procesando...":"Confirmar"})]})]})]})})}},4848:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(7437),l=r(2265);function s(e){let{label:a,value:r,options:s,placeholder:o="Selecciona",onChange:n,className:d="",onFocus:i,onBlur:c}=e,[u,m]=(0,l.useState)(!1),[g,x]=(0,l.useState)(!1),h=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){h.current&&!h.current.contains(e.target)&&m(!1)}function a(e){"Escape"===e.key&&m(!1)}return document.addEventListener("mousedown",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[]),(0,l.useEffect)(()=>{if(g)m(!0);else{let e=setTimeout(()=>{g||m(!1)},150);return()=>clearTimeout(e)}},[g]),(0,l.useEffect)(()=>{u&&h.current&&setTimeout(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[u]);let b=s.find(e=>e.value===r);return(0,t.jsxs)("div",{className:"relative min-w-0 ".concat(d),ref:h,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[a&&(0,t.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium mb-1",children:a}),(0,t.jsxs)("div",{className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 dark:shadow-sm dark:shadow-orange-900/10 dark:ring-0.5 dark:ring-orange-500/15 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-400 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200",onFocus:()=>{null==i||i(),m(!0)},onBlur:()=>{null==c||c(),setTimeout(()=>{g||m(!1)},100)},children:[(0,t.jsx)("span",{className:"truncate",children:b?b.label:""===r?"Todos":o}),(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400 dark:text-gray-500 transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,t.jsx)("div",{className:"absolute z-[9999] w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-56 overflow-auto apple-scroll",children:s.map((e,a)=>(0,t.jsxs)("div",{children:[a>0&&(0,t.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{n(e.value),m(!1)},className:"w-full px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(r===e.value?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"),children:[(0,t.jsx)("span",{children:e.label}),e.color&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0 ml-2",style:{backgroundColor:e.color}})]})]},e.value))})]})}},5051:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(7437),l=r(2265);function s(e){let{isOpen:a,onClose:r,children:s,title:o,maxWidthClass:n="max-w-lg",paddingClass:d="p-7",headerMarginClass:i="mb-5",formSpaceYClass:c="space-y-5",className:u="",showCloseButton:m=!0,closeOnBackdrop:g=!0}=e,[x,h]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(!a)return;let e=requestAnimationFrame(()=>h(!0));return()=>{cancelAnimationFrame(e),h(!1)}},[a]),(0,l.useEffect)(()=>{if(!a)return;let e=e=>{"Escape"===e.key&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,r]),a)?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 transition-opacity duration-200 ".concat(x?"opacity-100":"opacity-0"),onClick:()=>{g&&r()},"aria-modal":"true",role:"dialog",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-2xl shadow-xl ".concat(d," w-full ").concat(n," max-h-[90vh] overflow-y-auto transform transition-all duration-200 ease-out ").concat(x?"opacity-100 scale-100":"opacity-0 scale-95"," ").concat(u),onClick:e=>e.stopPropagation(),children:[(o||m)&&(0,t.jsxs)("div",{className:"flex items-center justify-between ".concat(i),children:[o?(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o}):(0,t.jsx)("div",{}),m&&(0,t.jsx)("button",{onClick:r,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Cerrar",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:c,children:s})]})}):null}},327:function(e,a,r){"use strict";r.d(a,{W:function(){return t}});let t=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""},622:function(e,a,r){"use strict";var t=r(2265),l=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,a,r){var t,s={},i=null,c=null;for(t in void 0!==r&&(i=""+r),void 0!==a.key&&(i=""+a.key),void 0!==a.ref&&(c=a.ref),a)o.call(a,t)&&!d.hasOwnProperty(t)&&(s[t]=a[t]);if(e&&e.defaultProps)for(t in a=e.defaultProps)void 0===s[t]&&(s[t]=a[t]);return{$$typeof:l,type:e,key:i,ref:c,props:s,_owner:n.current}}a.Fragment=s,a.jsx=i,a.jsxs=i},7437:function(e,a,r){"use strict";e.exports=r(622)},4033:function(e,a,r){e.exports=r(5313)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=5974)}),_N_E=e.O()}]);