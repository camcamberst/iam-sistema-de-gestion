(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7143],{1759:function(e,r,a){Promise.resolve().then(a.bind(a,2116))},2116:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return i}});var t=a(7437),s=a(2265),o=a(4033),l=a(883);let n=e=>{let r={Cabecera:60,Diamante:60,"Sede MP":60,Terrazas:60,Victoria:60,Satélites:80,Otros:70}[e]||80;return console.log('\uD83D\uDD0D [STANDARD PERCENTAGE] Grupo: "'.concat(e,'" -> ').concat(r,"%")),r},d=e=>{switch(e){case"entregada":return"bg-green-100 text-green-800 border-green-200";case"pendiente":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"solicitada":return"bg-blue-100 text-blue-800 border-blue-200";case"inviable":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function i(){var e;(0,o.useRouter)();let[r,a]=(0,s.useState)([]),[i,c]=(0,s.useState)([]),[u,g]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[h,b]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[j,k]=(0,s.useState)([]),[N,w]=(0,s.useState)("all"),[D,C]=(0,s.useState)(null),[L,E]=(0,s.useState)([]),[S,M]=(0,s.useState)(""),[O,_]=(0,s.useState)(""),[A,P]=(0,s.useState)(""),[I,z]=(0,s.useState)(""),[F,G]=(0,s.useState)({});(0,s.useEffect)(()=>{T()},[]);let T=async()=>{try{var e,r;console.log("\uD83D\uDD0D [LOAD] Iniciando loadData..."),b(!0),v(null),console.log("\uD83D\uDD0D [LOAD] Cargando datos del usuario...");let t=localStorage.getItem("user"),s=t?JSON.parse(t):null,o=(null==s?void 0:s.id)||"current-user";console.log("\uD83D\uDD0D [LOAD] User data:",s),C(s),console.log("\uD83D\uDD0D [LOAD] Cargando modelos...");let l=await fetch("/api/calculator/models?adminId=".concat(o));console.log("\uD83D\uDD0D [LOAD] Models response status:",l.status);let n=await l.json();if(console.log("\uD83D\uDD0D [LOAD] Models data:",n),!n.success)throw Error(n.error||"Error al cargar modelos");c(n.models),a(n.models);let d=new Map;n.models.forEach(e=>{e.groups.forEach(e=>{e&&e.id&&e.name&&d.set(e.id,e)})});let i=Array.from(d.values()),u=i;if((null==s?void 0:s.role)==="admin"){let e=(null===(r=s.groups)||void 0===r?void 0:r.map(e=>e.id))||[];u=i.filter(r=>e.includes(r.id))}k(u),console.log("\uD83D\uDD0D [LOAD] Available groups:",u),console.log("\uD83D\uDD0D [LOAD] Models set successfully"),console.log("\uD83D\uDD0D [LOAD] Cargando plataformas...");let m=await fetch("/api/calculator/platforms");console.log("\uD83D\uDD0D [LOAD] Platforms response status:",m.status);let x=await m.json();if(console.log("\uD83D\uDD0D [LOAD] Platforms data:",x),!x.success)throw Error(x.error||"Error al cargar plataformas");let h=(null===(e=x.config)||void 0===e?void 0:e.platforms)||[];g(h),console.log("\uD83D\uDD0D [LOAD] platforms set with:",h.length,"plataformas"),console.log("\uD83D\uDD0D [LOAD] loadData completado exitosamente")}catch(e){console.error("❌ [LOAD] Error en loadData:",e),v(e.message||"Error al cargar datos")}finally{console.log("\uD83D\uDD0D [LOAD] Setting loading to false"),b(!1)}},R=async e=>{var a,t,s,o,l;let d=r.find(r=>r.id===e);if(d){if(x(d),d.hasConfig&&d.currentConfig){let e=d.currentConfig;E(e.enabled_platforms||[]),M((null===(a=e.percentage_override)||void 0===a?void 0:a.toString())||""),_((null===(t=e.min_quota_override)||void 0===t?void 0:t.toString())||"");let r=null===(s=d.groups[0])||void 0===s?void 0:s.name;if(e.group_percentage&&e.group_percentage>0)P(e.group_percentage.toString());else if(r){let e=n(r);P(e.toString()),console.log("\uD83D\uDD0D [EXISTING CONFIG] Usando porcentaje est\xe1ndar para ".concat(r,": ").concat(e,"%"))}else P("");z((null===(o=e.group_min_quota)||void 0===o?void 0:o.toString())||"")}else{E([]),M(""),_("");let e=null===(l=d.groups[0])||void 0===l?void 0:l.name;if(e){let r=n(e);P(r.toString()),console.log("\uD83D\uDD0D [DEFAULT PERCENTAGE] Cargando porcentaje est\xe1ndar para ".concat(e,": ").concat(r,"%"))}else P("");z("")}try{let e=await fetch("/api/modelo-plataformas?model_id=".concat(d.id)),r=await e.json(),a={};r.forEach(e=>{a[e.platform_id]=e}),G(a)}catch(e){console.error("Error cargando datos del Portafolio:",e),G({})}}},W=async e=>{if(L.includes(e)){E(r=>r.filter(r=>r!==e));return}if(!m){console.error("No hay modelo seleccionado");return}if(!m.hasConfig){console.log("\uD83D\uDD0D [INITIAL CONFIG] Permitir plataforma para configuraci\xf3n inicial:",e),E(r=>[...r,e]);return}try{let r=await fetch("/api/modelo-plataformas?model_id=".concat(m.id,"&platform_id=").concat(e)),a=await r.json();if(a&&a.length>0){let r=a[0].status;"entregada"===r||a[0].is_initial_config?E(r=>[...r,e]):alert("No se puede activar esta plataforma. Estado actual en Portafolio: ".concat(r,'. Debe estar en estado "Entregada" para poder activarla.'))}else alert("Esta plataforma no est\xe1 disponible. Debe ser solicitada a trav\xe9s del Portafolio Modelos primero.")}catch(e){console.error("Error validando estado del Portafolio:",e),alert("Error al validar el estado de la plataforma. Intenta nuevamente.")}},B=async()=>{if(m)try{var e;f(!0),v(null);let r=localStorage.getItem("user"),a=r?JSON.parse(r).id:"current-user",t=await fetch("/api/calculator/config-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelId:m.id,adminId:a,groupId:(null===(e=m.groups[0])||void 0===e?void 0:e.id)||"default-group",enabledPlatforms:L,percentageOverride:S?parseFloat(S):null,minQuotaOverride:O?parseFloat(O):null,groupPercentage:A?parseFloat(A):null,groupMinQuota:I?parseFloat(I):null})}),s=await t.json();if(!s.success)throw Error(s.error||"Error al guardar configuraci\xf3n");alert("Configuraci\xf3n guardada correctamente"),await T(),x(null)}catch(e){v(e.message||"Error al guardar")}finally{f(!1)}};return h?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Cargando configuraci\xf3n..."})]})}):y?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center pt-16",children:(0,t.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 dark:border-gray-600/20 p-8 max-w-md dark:shadow-lg dark:shadow-red-900/15 dark:ring-0.5 dark:ring-red-400/20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:y}),(0,t.jsx)("button",{onClick:T,className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-300 text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"Reintentar"})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,t.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,t.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Gesti\xf3n de Calculadora"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Configura las tasas y par\xe1metros de c\xe1lculo para cada modelo"})]})]})})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-1",children:(0,t.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 space-y-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 z-[99999]",children:[j.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,t.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Filtrar por Grupo"})]}),(0,t.jsx)(l.Z,{options:j.map(e=>({value:e.id,label:e.name})),value:N,onChange:e=>{w(e),x(null),"all"===e?a(i):a(i.filter(r=>r.groups.some(r=>r.id===e)))},placeholder:"Selecciona un grupo",className:"text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar Modelo"})]}),(0,t.jsx)(l.Z,{options:[{value:"",label:"Seleccionar modelo"},...r.map(e=>({value:e.id,label:e.email?e.email.split("@")[0]:e.name,badge:e.hasConfig?"Configurado":void 0,badgeColor:e.hasConfig?"green":void 0}))],value:(null==m?void 0:m.id)||"",onChange:e=>e?R(e):x(null),placeholder:"Seleccionar modelo",className:"text-sm"}),m&&m.groups.length>0&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-gray-50/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-lg border border-gray-200/50 dark:border-gray-500/50",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-2 font-medium",children:"Grupos:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:m.groups.map(e=>(0,t.jsx)("span",{className:"inline-block px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 text-xs rounded-full border border-blue-200/50 dark:border-blue-700/50",children:e.name},e.id))})]})]})]})}),m&&(0,t.jsxs)("div",{className:"md:col-span-2 relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-purple-500 to-violet-600 rounded-md flex items-center justify-center",children:(0,t.jsxs)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsxs)("h2",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:["Configurar: ",m.name||m.email]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Seleccionar P\xe1ginas"})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100/80 dark:bg-gray-600/80 px-2 py-1 rounded-full border border-gray-200/50 dark:border-gray-500/50",children:[u.length," plataformas disponibles"]})]}),(0,t.jsx)("div",{className:"border border-gray-200/50 dark:border-gray-500/50 rounded-lg p-4 max-h-80 overflow-y-auto bg-gray-50/30 dark:bg-gray-600/30 backdrop-blur-sm",children:(0,t.jsx)("div",{className:"space-y-3",children:0===u.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"No hay plataformas disponibles"}),(0,t.jsx)("p",{className:"text-xs",children:"Cargando datos..."})]}):u.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-lg border border-gray-200/50 dark:border-gray-500/50",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.name}),F[e.id]&&(null==m?void 0:m.hasConfig)&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border ".concat(d(F[e.id].status)),children:F[e.id].status}),!(null==m?void 0:m.hasConfig)&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border bg-green-100 text-green-800 border-green-200",children:"Disponible"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>W(e.id),className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(L.includes(e.id)?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gray-200"),children:[(0,t.jsx)("span",{className:"sr-only",children:"Enable platform"}),(0,t.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ".concat(L.includes(e.id)?"translate-x-5":"translate-x-1")})]})]},e.id))})})]}),(0,t.jsxs)("div",{className:"relative bg-white/50 dark:bg-gray-600/50 backdrop-blur-sm rounded-xl shadow-sm border border-white/30 dark:border-gray-500/30 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-orange-500 to-amber-600 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Configuraci\xf3n de Reparto"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white/80 dark:bg-gray-600/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-200/50 dark:border-gray-500/50 p-6 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-sm flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2 h-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Configuraci\xf3n Grupo"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"groupPercentage",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Porcentaje Grupo"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"number",id:"groupPercentage",className:"apple-input flex-1",value:A,onChange:e=>P(e.target.value),placeholder:"60"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]}),(null==m?void 0:null===(e=m.groups)||void 0===e?void 0:e[0])&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Valor por defecto: ",n(m.groups[0].name),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"groupMinQuota",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Objetivo Grupo"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"number",id:"groupMinQuota",className:"apple-input flex-1",value:I,onChange:e=>z(e.target.value),placeholder:"500000"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"USD"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\xa0"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-600 rounded-xl shadow-sm border border-gray-200 dark:border-gray-500 p-6 h-full",children:[(0,t.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-gray-100 mb-6",children:"Configuraci\xf3n Modelo"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"percentageOverride",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Porcentaje Modelo"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"number",id:"percentageOverride",className:"apple-input flex-1",value:S,onChange:e=>M(e.target.value),placeholder:"70"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Dejar vac\xedo para usar el porcentaje del grupo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"minQuotaOverride",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Objetivo Modelo"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"number",id:"minQuotaOverride",className:"apple-input flex-1",value:O,onChange:e=>_(e.target.value),placeholder:"300000"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"USD"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Dejar vac\xedo para usar el objetivo del grupo"})]})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{type:"button",onClick:B,disabled:p,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200 shadow-md",children:p?"Guardando...":"Guardar Configuraci\xf3n"})})]})]})]})]})})}},883:function(e,r,a){"use strict";a.d(r,{Z:function(){return l}});var t=a(7437),s=a(2265);let o={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function l(e){let{options:r,value:a,onChange:l,placeholder:n="Selecciona una opci\xf3n",className:d="",disabled:i=!1,maxHeight:c="max-h-60",autoOpen:u=!1}=e,[g,m]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{u&&r.length>1?m(!0):u||m(!1)},[u,r.length]),(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&m(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{g&&x.current&&setTimeout(()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[g]);let h=r.find(e=>e.value===a),b=e=>{l(e),m(!1)};return(0,t.jsxs)("div",{className:"relative ".concat(d),ref:x,children:[(0,t.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(i?"opacity-50 cursor-not-allowed":""),onClick:()=>!i&&m(!g),disabled:i,"aria-haspopup":"listbox","aria-expanded":g,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{className:h?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:h?h.label:n}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.badge)&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(o[h.badgeColor||"gray"]),children:h.badge}),(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),g&&(0,t.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===r.length?(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):r.map((e,r)=>(0,t.jsxs)("div",{children:[r>0&&(0,t.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,t.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===a?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&b(e.value),children:[(0,t.jsx)("span",{children:e.label}),e.badge&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(o[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},622:function(e,r,a){"use strict";var t=a(2265),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function i(e,r,a){var t,o={},i=null,c=null;for(t in void 0!==a&&(i=""+a),void 0!==r.key&&(i=""+r.key),void 0!==r.ref&&(c=r.ref),r)l.call(r,t)&&!d.hasOwnProperty(t)&&(o[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps)void 0===o[t]&&(o[t]=r[t]);return{$$typeof:s,type:e,key:i,ref:c,props:o,_owner:n.current}}r.Fragment=o,r.jsx=i,r.jsxs=i},7437:function(e,r,a){"use strict";e.exports=a(622)},4033:function(e,r,a){e.exports=a(5313)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=1759)}),_N_E=e.O()}]);