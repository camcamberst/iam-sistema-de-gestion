(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4519],{774:function(e,t,s){Promise.resolve().then(s.bind(s,2933))},2933:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),n=s(2265);function r(){let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(["modelo"]),[o,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),d=e=>{r(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},u=async()=>{i(!0),c("");try{await fetch("/api/auth/token").then(()=>null);let t=await fetch("/api/chat/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e.trim(),roles:s})}),a=await t.json();t.ok?c("Enviado a ".concat(a.recipients," usuarios")):c(a.error||"Error")}catch(e){c((null==e?void 0:e.message)||"Error")}finally{i(!1)}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Difusi\xf3n (AIM Botty)"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Env\xeda mensajes informativos como Botty a roles o grupos autorizados."}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Contenido"}),(0,a.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),rows:5,className:"w-full bg-gray-800 text-white rounded-lg p-3 border border-gray-700",placeholder:"Escribe el mensaje de difusi\xf3n..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Roles destino"}),(0,a.jsx)("div",{className:"flex gap-3 text-sm",children:["modelo","admin","super_admin"].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.includes(e),onChange:()=>d(e)}),e]},e))})]}),(0,a.jsx)("button",{onClick:u,disabled:o||!e.trim(),className:"px-4 py-2 rounded-lg bg-blue-600 text-white disabled:bg-gray-600",children:o?"Enviando...":"Enviar difusi\xf3n"}),l&&(0,a.jsx)("div",{className:"text-sm text-gray-300",children:l})]})}},622:function(e,t,s){"use strict";var a=s(2265),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var a,r={},c=null,d=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:i.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=774)}),_N_E=e.O()}]);