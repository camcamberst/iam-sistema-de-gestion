(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3257],{2601:function(e,r,t){"use strict";var a,s;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(8960)},9163:function(e,r,t){Promise.resolve().then(t.bind(t,5888))},5888:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),s=t(2265),n=t(5257),o=t(883);function i(){let[e,r]=(0,s.useState)(null),[t,i]=(0,s.useState)([]),[l,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(""),[g,x]=(0,s.useState)("todos");(0,s.useEffect)(()=>{(async()=>{try{var e,t,a,s;d(!0);let o=(0,n.createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c"),{data:l}=await o.auth.getUser(),c=null==l?void 0:null===(e=l.user)||void 0===e?void 0:e.id;if(!c){r(null),d(!1);return}let{data:g}=await o.from("users").select("id,name,email,role").eq("id",c).single(),x={id:(null==g?void 0:g.id)||c,name:(null==g?void 0:g.name)||(null===(a=l.user)||void 0===a?void 0:null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"Usuario",email:(null==g?void 0:g.email)||(null===(s=l.user)||void 0===s?void 0:s.email)||"",role:(null==g?void 0:g.role)||"modelo"};r(x);let{data:m,error:h}=await o.from("anticipos").select("*").eq("model_id",x.id).order("created_at",{ascending:!1});h?(console.error("Error cargando anticipos:",h),u("Error al cargar las solicitudes")):i(m||[])}catch(e){console.error("Error loading user:",e),u("Error al cargar los datos del usuario")}finally{d(!1)}})()},[]);let m=e=>{switch(e){case"pendiente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"aprobado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"rechazado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"realizado":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}},h=e=>{switch(e){case"pendiente":return"Pendiente";case"aprobado":return"Aprobado";case"rechazado":return"Rechazado";case"realizado":return"Realizado";case"cancelado":return"Cancelado";default:return e}},b=e=>{switch(e){case"nequi":return"Nequi";case"daviplata":return"Daviplata";case"cuenta_bancaria":return"Cuenta Bancaria";default:return e}},y="todos"===g?t:t.filter(e=>e.estado===g);return l?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Cargando solicitudes..."})]})}):c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:c})]})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,a.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Mis Solicitudes de Anticipo"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Revisa el estado de tus solicitudes de anticipo"})]}),(0,a.jsx)("div",{className:"flex space-x-3",children:(0,a.jsx)("button",{onClick:()=>window.location.href="/admin/model/anticipos/solicitar",className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 text-sm font-medium shadow-md",children:"Nueva Solicitud"})})]})})]})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-700/80 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600/20 p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filtrar por estado:"}),(0,a.jsx)(o.Z,{options:[{value:"todos",label:"Todos"},{value:"pendiente",label:"Pendientes"},{value:"aprobado",label:"Aprobados"},{value:"rechazado",label:"Rechazados"},{value:"realizado",label:"Realizados"},{value:"cancelado",label:"Cancelados"}],value:g,onChange:x,placeholder:"Seleccionar estado"})]})})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-700/80 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600/20 overflow-hidden",children:0===y.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No hay solicitudes"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"todos"===g?"No tienes solicitudes de anticipo registradas.":'No tienes solicitudes con estado "'.concat(h(g),'".')}),(0,a.jsx)("button",{onClick:()=>window.location.href="/admin/model/anticipos/solicitar",className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 text-sm font-medium shadow-md",children:"Crear Primera Solicitud"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:y.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-600/20 transition-colors",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(m(e.estado)),children:h(e.estado)}),(0,a.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monto Solicitado"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["$",e.monto_solicitado.toLocaleString("es-CO")," COP"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Porcentaje"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.porcentaje_solicitado,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Medio de Pago"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:b(e.medio_pago)})]})]}),(e.comentarios_admin||e.comentarios_rechazo)&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-600/20 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsx)("strong",{children:"Comentarios:"})," ",e.comentarios_admin||e.comentarios_rechazo]})})]})})},e.id))})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Acceso Denegado"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No tienes permisos para acceder a esta p\xe1gina."})]})})}},883:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var a=t(7437),s=t(2265);let n={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function o(e){let{options:r,value:t,onChange:o,placeholder:i="Selecciona una opci\xf3n",className:l="",disabled:d=!1,maxHeight:c="max-h-60",autoOpen:u=!1}=e,[g,x]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{u&&r.length>1?x(!0):u||x(!1)},[u,r.length]),(0,s.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&x(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{g&&m.current&&setTimeout(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[g]);let h=r.find(e=>e.value===t),b=e=>{o(e),x(!1)};return(0,a.jsxs)("div",{className:"relative ".concat(l),ref:m,children:[(0,a.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(d?"opacity-50 cursor-not-allowed":""),onClick:()=>!d&&x(!g),disabled:d,"aria-haspopup":"listbox","aria-expanded":g,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{className:h?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:h?h.label:i}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.badge)&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(n[h.badgeColor||"gray"]),children:h.badge}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),g&&(0,a.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===r.length?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):r.map((e,r)=>(0,a.jsxs)("div",{children:[r>0&&(0,a.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,a.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===t?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&b(e.value),children:[(0,a.jsx)("span",{children:e.label}),e.badge&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(n[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},8960:function(e){!function(){var r={229:function(e){var r,t,a,s=e.exports={};function n(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var l=[],d=!1,c=-1;function u(){d&&a&&(d=!1,a.length?l=a.concat(l):c=-1,l.length&&g())}function g(){if(!d){var e=i(u);d=!0;for(var r=l.length;r;){for(a=l,l=[];++c<r;)a&&a[c].run();c=-1,r=l.length}a=null,d=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function x(e,r){this.fun=e,this.array=r}function m(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new x(e,r)),1!==l.length||d||i(g)},x.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var n=t[e]={exports:{}},o=!0;try{r[e](n,n.exports,a),o=!1}finally{o&&delete t[e]}return n.exports}a.ab="//";var s=a(229);e.exports=s}()},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var a,n={},d=null,c=null;for(a in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)o.call(r,a)&&!l.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===n[a]&&(n[a]=r[a]);return{$$typeof:s,type:e,key:d,ref:c,props:n,_owner:i.current}}r.Fragment=n,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=9163)}),_N_E=e.O()}]);