(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5629],{3669:function(e,a,r){Promise.resolve().then(r.bind(r,4875))},4875:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return u}});var t=r(7437),o=r(9102),l=r.n(o),s=r(2265),d=r(4033),i=r(6727);let n=()=>{let e=new Date(new Date().toLocaleString("en-US",{timeZone:"America/Bogota"})),a=e.getDate(),r=e.getMonth(),t=e.getFullYear();console.log("\uD83D\uDD0D [ANTICIPO-RESTRICTIONS] Validando fecha:",{colombiaDate:e.toISOString(),day:a,month:r+1,year:t});let o=new Date(t,r,0).getDate(),l=a>=o||a<=5,s=a>=15&&a<=20;if(console.log("\uD83D\uDD0D [ANTICIPO-RESTRICTIONS] Validaciones:",{lastDayOfPrevMonth:o,isInFirstRestriction:l,isInSecondRestriction:s}),l||s){let a=new Date(e);l?a.setDate(6):s&&a.setDate(21);let r=l?"No se pueden solicitar anticipos del ".concat(o," al 5 de cada mes"):"No se pueden solicitar anticipos del 15 al 20 de cada mes";return console.log("\uD83D\uDEAB [ANTICIPO-RESTRICTIONS] Solicitud bloqueada:",{reason:r,nextAvailable:a.toISOString()}),{allowed:!1,reason:r,nextAvailable:a}}return console.log("✅ [ANTICIPO-RESTRICTIONS] Solicitud permitida"),{allowed:!0}};var c=r(883),b=r(5342);function u(){var e,a,o,u,g,x,m,p,h;let[y,j]=(0,s.useState)(null),[k,v]=(0,s.useState)(!0),[f,N]=(0,s.useState)(!1),[w,D]=(0,s.useState)(null),[C,_]=(0,s.useState)(!1),[I,S]=(0,s.useState)({monto_solicitado:0,medio_pago:"nequi"}),[O,A]=(0,s.useState)({copModelo:0,anticipoDisponible:0,anticiposPagados:0}),[E,T]=(0,s.useState)(""),[L,P]=(0,s.useState)(""),[M,R]=(0,s.useState)(""),[B,q]=(0,s.useState)(null),z=(0,d.useRouter)(),F=r(5922).O;(0,s.useEffect)(()=>{V()},[]),(0,s.useEffect)(()=>{let e=n();q(e),console.log("\uD83D\uDD0D [SOLICITAR ANTICIPO] Restricci\xf3n temporal:",e)},[]);let V=async()=>{try{v(!0);let{data:e}=await F.auth.getUser();if(!(null==e?void 0:e.user)){z.push("/login");return}let{data:a}=await F.from("users").select("id, name, email, role").eq("id",e.user.id).single();if(!a||"modelo"!==a.role){z.push("/login");return}j(a),await Z(a.id)}catch(e){console.error("Error loading user:",e),D("Error al cargar datos del usuario")}finally{v(!1)}},Z=async e=>{try{console.log("\uD83D\uDD0D [SOLICITAR ANTICIPO] Iniciando carga de datos de productividad para userId:",e);let a=(0,i.iR)();console.log("\uD83D\uDD0D [SOLICITAR ANTICIPO] Periodo:",a),console.log("\uD83D\uDD0D [SOLICITAR ANTICIPO] Obteniendo valores reales de Mi Calculadora...");let r=await fetch("/api/calculator/mi-calculadora-real?modelId=".concat(e,"&periodDate=").concat(a,"&t=").concat(Date.now())),t=await r.json();console.log("\uD83D\uDD0D [SOLICITAR ANTICIPO] Mi Calculadora real response:",t),t.success?(console.log("✅ [SOLICITAR ANTICIPO] Valores reales de Mi Calculadora obtenidos correctamente:",{copModelo:t.data.copModelo,anticipoDisponible:t.data.anticipoDisponible,anticiposPagados:t.data.anticiposPagados}),console.log("\uD83D\uDD04 [SOLICITAR ANTICIPO] Estableciendo datos de productividad:",{copModelo:t.data.copModelo,anticipoDisponible:t.data.anticipoDisponible,anticiposPagados:t.data.anticiposPagados}),A({copModelo:t.data.copModelo,anticipoDisponible:t.data.anticipoDisponible,anticiposPagados:t.data.anticiposPagados})):(console.error("❌ [SOLICITAR ANTICIPO] Error al obtener valores reales de Mi Calculadora:",t.error),A({copModelo:0,anticipoDisponible:0,anticiposPagados:0}))}catch(e){console.error("Error loading productivity data:",e),D("Error al cargar datos de productividad")}},J=(e,a)=>{S(r=>({...r,[e]:a}))},U=()=>0===O.anticipoDisponible?0:I.monto_solicitado/O.anticipoDisponible*100,W=e=>e.toLocaleString("es-CO"),$=e=>parseFloat(e.replace(/\./g,"").replace(/,/g,"."))||0,Y=e=>e<=0?"El monto debe ser mayor a 0":e%1e4!=0?"El monto debe ser m\xfaltiplo de 10.000 COP":e>O.anticipoDisponible?"El monto no puede superar $".concat(W(O.anticipoDisponible)," COP"):"",X=e=>{let a=$(e);S(e=>({...e,monto_solicitado:a})),P(e.replace(/[^0-9.,]/g,"")),T(Y(a))},G=e=>1e4*Math.floor(e/1e4),H=e=>{let a=e.replace(/\D/g,"");return 0===a.length?"":10!==a.length?"El n\xfamero de tel\xe9fono debe tener exactamente 10 d\xedgitos":a.startsWith("3")?"":"El n\xfamero debe empezar con 3 (celular colombiano)"},Q=e=>{let a=e.replace(/\D/g,"").slice(0,10);S(e=>({...e,numero_telefono:a})),R(H(a))},K=async e=>{if(e.preventDefault(),!y)return;let a=Y(I.monto_solicitado);if(a){D(a);return}if("nequi"===I.medio_pago||"daviplata"===I.medio_pago){if(!I.nombre_beneficiario||!I.numero_telefono){D("Nombre y n\xfamero son requeridos para NEQUI/DAVIPLATA");return}let e=H(I.numero_telefono);if(e){D(e);return}}if("cuenta_bancaria"===I.medio_pago&&(!I.nombre_titular||!I.banco||!I.tipo_cuenta||!I.numero_cuenta||!I.documento_titular)){D("Todos los campos bancarios son requeridos");return}try{N(!0),D(null);let e=(0,i.iR)(),a=U(),r=await fetch("/api/anticipos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model_id:y.id,period_date:e,monto_solicitado:I.monto_solicitado,porcentaje_solicitado:a,monto_disponible:O.anticipoDisponible,medio_pago:I.medio_pago,nombre_beneficiario:I.nombre_beneficiario,numero_telefono:I.numero_telefono,nombre_titular:I.nombre_titular,banco:I.banco,banco_otro:I.banco_otro,tipo_cuenta:I.tipo_cuenta,numero_cuenta:I.numero_cuenta,documento_titular:I.documento_titular})}),t=await r.json();t.success?(_(!0),setTimeout(()=>{z.push("/model/anticipos/solicitudes")},2e3)):D(t.error||"Error al enviar solicitud")}catch(e){console.error("Error submitting anticipo:",e),D("Error al enviar solicitud")}finally{N(!1)}};return B&&!B.allowed?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto text-center p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Solicitud No Disponible"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:B.reason}),(0,t.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700/50 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[(0,t.jsx)("strong",{children:"Pr\xf3xima fecha disponible:"}),(0,t.jsx)("br",{}),null===(e=B.nextAvailable)||void 0===e?void 0:e.toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),(0,t.jsx)("button",{onClick:()=>z.back(),className:"px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-700 dark:hover:bg-gray-600",children:"Regresar"})]})}):k?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Cargando..."})]})}):y?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,t.jsx)(l(),{id:"a4a669272e0e9e7b",children:".bank-select.jsx-a4a669272e0e9e7b{max-height:120px!important;overflow-y:auto!important}.bank-select.jsx-a4a669272e0e9e7b::-webkit-scrollbar{width:6px}.bank-select.jsx-a4a669272e0e9e7b::-webkit-scrollbar-track{background:#f1f5f9;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-a4a669272e0e9e7b::-webkit-scrollbar-thumb{background:#cbd5e1;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.bank-select.jsx-a4a669272e0e9e7b::-webkit-scrollbar-thumb:hover{background:#94a3b8}"}),(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b mb-12",children:(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b relative",children:[(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-md",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-a4a669272e0e9e7b w-5 h-5 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1",className:"jsx-a4a669272e0e9e7b"})})}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("h1",{className:"jsx-a4a669272e0e9e7b text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Solicitar Anticipo"}),(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Solicita un anticipo de hasta el 90% de tu productividad"})]})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b text-sm text-gray-500 dark:text-gray-400",children:["Acceso: ",(0,t.jsx)("span",{className:"jsx-a4a669272e0e9e7b font-medium text-blue-600 dark:text-blue-400",children:"Modelo"})]})]}),(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b mt-4 p-3 bg-blue-50/80 dark:bg-blue-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg",children:(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex items-center",children:[(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-a4a669272e0e9e7b w-5 h-5 text-blue-600 dark:text-blue-400 mr-2",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z",className:"jsx-a4a669272e0e9e7b"})}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-sm font-medium text-blue-800 dark:text-blue-300",children:"Pol\xedtica de fechas activa"}),(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-xs text-blue-700 dark:text-blue-400",children:"No disponible del fin de mes al 5 y del 15 al 20"})]})]})})]})]})}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b bg-white dark:bg-gray-700/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-600/20 p-6 mb-6 hover:shadow-md transition-all duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,t.jsxs)("h2",{className:"jsx-a4a669272e0e9e7b text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[(0,t.jsx)("span",{className:"jsx-a4a669272e0e9e7b w-2 h-2 bg-green-500 rounded-full mr-2"}),"Resumen de Productividad"]}),(0,t.jsx)(b.F,{cards:[{value:"$".concat(O.copModelo.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})),label:"COP Modelo",color:"blue"},{value:"$".concat(O.anticipoDisponible.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})),label:"Anticipo Disponible",color:"green",onClick:()=>{let e=G(O.anticipoDisponible);S(a=>({...a,monto_solicitado:e})),P(W(e)),T(Y(e))},clickable:!0},{value:"$".concat(O.anticiposPagados.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})),label:"Ya Pagados",color:"orange"}],columns:3})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b bg-white dark:bg-gray-700/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-600/20 p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,t.jsx)("h2",{className:"jsx-a4a669272e0e9e7b text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Datos del Anticipo"}),C&&(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex items-center",children:[(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-a4a669272e0e9e7b w-5 h-5 text-green-600 dark:text-green-400 mr-2",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd",className:"jsx-a4a669272e0e9e7b"})}),(0,t.jsx)("span",{className:"jsx-a4a669272e0e9e7b text-green-800 dark:text-green-300 font-medium",children:"\xa1Solicitud enviada correctamente!"})]}),(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-green-700 dark:text-green-400 text-sm mt-1",children:'Ser\xe1s redirigido a "Mis Solicitudes" en unos segundos...'})]}),w&&(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex items-center",children:[(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"jsx-a4a669272e0e9e7b w-5 h-5 text-red-600 dark:text-red-400 mr-2",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd",className:"jsx-a4a669272e0e9e7b"})}),(0,t.jsx)("span",{className:"jsx-a4a669272e0e9e7b text-red-800 dark:text-red-300 font-medium",children:"Error"})]}),(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-red-700 dark:text-red-400 text-sm mt-1",children:w})]}),(0,t.jsxs)("form",{onSubmit:K,className:"jsx-a4a669272e0e9e7b space-y-8",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-200 mb-3",children:"Monto Solicitado (COP)"}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b relative",children:[(0,t.jsx)("input",{type:"text",value:L,onChange:e=>X(e.target.value),onBlur:()=>{let e=G(I.monto_solicitado||0);S(a=>({...a,monto_solicitado:e})),P(W(e)),T(Y(e))},placeholder:"",style:{paddingLeft:"2rem"},className:"jsx-a4a669272e0e9e7b "+"apple-input w-full pr-20 ".concat(E&&I.monto_solicitado>0?"border-red-500 focus:ring-red-500":"")}),(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium select-none pointer-events-none",children:"$"}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b absolute right-3 top-1/2 transform -translate-y-1/2 text-sm font-medium text-blue-600",children:[U().toFixed(1),"%"]})]}),E&&I.monto_solicitado>0&&(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-red-500 text-xs mt-1",children:E}),(0,t.jsxs)("p",{className:"jsx-a4a669272e0e9e7b text-xs text-gray-500 dark:text-gray-400 mt-2",children:["M\xe1ximo disponible: $",G(O.anticipoDisponible).toLocaleString("es-CO")," COP (m\xfaltiplos de 10.000)"]})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-200 mb-3",children:"Medio de Pago"}),(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b space-y-3",children:["nequi","daviplata","cuenta_bancaria"].map(e=>(0,t.jsxs)("label",{className:"jsx-a4a669272e0e9e7b flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[(0,t.jsx)("input",{type:"radio",name:"medio_pago",value:e,checked:I.medio_pago===e,onChange:e=>J("medio_pago",e.target.value),className:"jsx-a4a669272e0e9e7b mr-3 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"jsx-a4a669272e0e9e7b text-sm font-medium text-gray-700 dark:text-gray-200",children:"cuenta_bancaria"===e?"CUENTA BANCARIA":e.toUpperCase()})]},e))})]})]}),("nequi"===I.medio_pago||"daviplata"===I.medio_pago)&&(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b bg-blue-50 dark:bg-blue-50/90 rounded-xl p-6 border border-blue-200 dark:border-blue-200/50 shadow-sm",children:[(0,t.jsxs)("h3",{className:"jsx-a4a669272e0e9e7b text-lg font-semibold text-blue-900 dark:text-blue-600 mb-4",children:["Datos de ",I.medio_pago.toUpperCase()]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Nombre del Beneficiario"}),(0,t.jsx)("input",{type:"text",value:I.nombre_beneficiario||"",onChange:e=>J("nombre_beneficiario",e.target.value),placeholder:"Nombre completo",required:!0,className:"jsx-a4a669272e0e9e7b w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsxs)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:["N\xfamero de ",I.medio_pago.toUpperCase()]}),(0,t.jsx)("input",{type:"tel",value:I.numero_telefono||"",onChange:e=>Q(e.target.value),placeholder:"N\xfamero de tel\xe9fono (10 d\xedgitos)",maxLength:10,required:!0,className:"jsx-a4a669272e0e9e7b "+"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(M?"border-red-500 focus:ring-red-500":"")}),M&&(0,t.jsx)("p",{className:"jsx-a4a669272e0e9e7b text-red-500 text-xs mt-1",children:M})]})]})]}),"cuenta_bancaria"===I.medio_pago&&(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b bg-green-50 dark:bg-green-50/90 rounded-xl p-6 border border-green-200 dark:border-green-200/50 shadow-sm",children:[(0,t.jsx)("h3",{className:"jsx-a4a669272e0e9e7b text-lg font-semibold text-green-900 dark:text-green-600 mb-6",children:"Datos de CUENTA BANCARIA"}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Nombre del Titular"}),(0,t.jsx)("input",{type:"text",value:I.nombre_titular||"",onChange:e=>J("nombre_titular",e.target.value),placeholder:"Nombre completo del titular",required:!0,className:"jsx-a4a669272e0e9e7b w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Banco"}),(0,t.jsx)(c.Z,{options:["Bancolombia","Banco de Bogot\xe1","BBVA Colombia","Davivienda","Colpatria","Banco Popular","Banco AV Villas","Banco Caja Social","Banco Falabella","Banco Santander","Banco de Occidente","Otros"].map(e=>({value:e,label:e})),value:I.banco||"",onChange:e=>J("banco",e),placeholder:"Selecciona un banco",maxHeight:"max-h-32",className:"text-sm"})]})]}),"Otros"===I.banco&&(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b mb-6",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Nombre del Banco"}),(0,t.jsx)("input",{type:"text",value:I.banco_otro||"",onChange:e=>J("banco_otro",e.target.value),placeholder:"Escribe el nombre del banco",required:!0,className:"jsx-a4a669272e0e9e7b w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Tipo de Cuenta"}),(0,t.jsx)(c.Z,{options:["Ahorros","Corriente"].map(e=>({value:e.toLowerCase(),label:e})),value:I.tipo_cuenta||"",onChange:e=>J("tipo_cuenta",e),placeholder:"Selecciona tipo de cuenta",className:"text-sm"})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"N\xfamero de Cuenta"}),(0,t.jsx)("input",{type:"text",value:I.numero_cuenta||"",onChange:e=>J("numero_cuenta",e.target.value),placeholder:"N\xfamero de cuenta",required:!0,className:"jsx-a4a669272e0e9e7b w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"})]})]}),(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b",children:[(0,t.jsx)("label",{className:"jsx-a4a669272e0e9e7b block text-sm font-medium text-gray-700 dark:text-gray-800 mb-3",children:"Documento del Titular"}),(0,t.jsx)("input",{type:"text",value:I.documento_titular||"",onChange:e=>J("documento_titular",e.target.value),placeholder:"C\xe9dula o documento de identidad",required:!0,className:"jsx-a4a669272e0e9e7b w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200"})]})]}),(0,t.jsx)("div",{className:"jsx-a4a669272e0e9e7b flex justify-center pt-8 border-t border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"jsx-a4a669272e0e9e7b flex gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>z.back(),className:"jsx-a4a669272e0e9e7b px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:f||O.anticipoDisponible<=0||!(!(Y(I.monto_solicitado)||I.monto_solicitado<=0||("nequi"===I.medio_pago||"daviplata"===I.medio_pago)&&(!(null===(a=I.nombre_beneficiario)||void 0===a?void 0:a.trim())||!(null===(o=I.numero_telefono)||void 0===o?void 0:o.trim())||H(I.numero_telefono)))&&("cuenta_bancaria"!==I.medio_pago||(null===(u=I.nombre_titular)||void 0===u?void 0:u.trim())&&(null===(g=I.banco)||void 0===g?void 0:g.trim())&&(null===(x=I.tipo_cuenta)||void 0===x?void 0:x.trim())&&(null===(m=I.numero_cuenta)||void 0===m?void 0:m.trim())&&(null===(p=I.documento_titular)||void 0===p?void 0:p.trim())&&("Otros"!==I.banco||(null===(h=I.banco_otro)||void 0===h?void 0:h.trim())))),className:"jsx-a4a669272e0e9e7b px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md",children:f?"Enviando...":"Enviar Solicitud"})]})})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Acceso Denegado"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"No tienes permisos para acceder a esta p\xe1gina."})]})})}},883:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});var t=r(7437),o=r(2265);let l={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",gray:"bg-gray-100 text-gray-800"};function s(e){let{options:a,value:r,onChange:s,placeholder:d="Selecciona una opci\xf3n",className:i="",disabled:n=!1,maxHeight:c="max-h-60",autoOpen:b=!1}=e,[u,g]=(0,o.useState)(!1),x=(0,o.useRef)(null);(0,o.useEffect)(()=>{b&&a.length>1?g(!0):b||g(!1)},[b,a.length]),(0,o.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&g(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(()=>{u&&x.current&&setTimeout(()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},[u]);let m=a.find(e=>e.value===r),p=e=>{s(e),g(!1)};return(0,t.jsxs)("div",{className:"relative ".concat(i),ref:x,children:[(0,t.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-sm text-left border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 cursor-pointer flex items-center justify-between hover:border-gray-400 dark:hover:border-gray-500 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all duration-200 ".concat(n?"opacity-50 cursor-not-allowed":""),onClick:()=>!n&&g(!u),disabled:n,"aria-haspopup":"listbox","aria-expanded":u,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("span",{className:m?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400",children:m?m.label:d}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==m?void 0:m.badge)&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(l[m.badgeColor||"gray"]),children:m.badge}),(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}),u&&(0,t.jsx)("div",{className:"absolute z-[99998] w-full mt-1 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg dark:shadow-lg dark:shadow-cyan-900/10 dark:ring-0.5 dark:ring-cyan-500/15 ".concat(c," overflow-auto apple-scroll"),children:0===a.length?(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No hay opciones disponibles"}):a.map((e,a)=>(0,t.jsxs)("div",{children:[a>0&&(0,t.jsx)("div",{className:"w-full h-px bg-gray-100 dark:bg-gray-600/50 dark:shadow-sm dark:shadow-blue-900/10"}),(0,t.jsxs)("div",{className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 flex items-center justify-between ".concat(e.disabled?"text-gray-400 dark:text-gray-500 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100"," ").concat(e.value===r?"bg-blue-50 dark:bg-blue-900/20 text-blue-900 dark:text-blue-100":""),onClick:()=>!e.disabled&&p(e.value),children:[(0,t.jsx)("span",{children:e.label}),e.badge&&(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(l[e.badgeColor||"gray"]),children:e.badge})]})]},e.value))})]})}},5342:function(e,a,r){"use strict";r.d(a,{F:function(){return s}});var t=r(7437);r(2265);let o={blue:{gradient:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-50/90 dark:to-blue-100/95",border:"border-blue-200 dark:border-blue-300/60",text:"text-blue-700 dark:text-blue-600",badge:"text-blue-600 bg-blue-200 dark:text-blue-700 dark:bg-blue-200/80",shadow:"hover:shadow-blue-200 dark:hover:shadow-blue-300/40"},green:{gradient:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-50/90 dark:to-green-100/95",border:"border-green-200 dark:border-green-300/60",text:"text-green-700 dark:text-green-600",badge:"text-green-600 bg-green-200 dark:text-green-700 dark:bg-green-200/80",shadow:"hover:shadow-green-200 dark:hover:shadow-green-300/40"},purple:{gradient:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-50/90 dark:to-purple-100/95",border:"border-purple-200 dark:border-purple-300/60",text:"text-purple-700 dark:text-purple-600",badge:"text-purple-600 bg-purple-200 dark:text-purple-700 dark:bg-purple-200/80",shadow:"hover:shadow-purple-200 dark:hover:shadow-purple-300/40"},orange:{gradient:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-50/90 dark:to-orange-100/95",border:"border-orange-200 dark:border-orange-300/60",text:"text-orange-700 dark:text-orange-600",badge:"text-orange-600 bg-orange-200 dark:text-orange-700 dark:bg-orange-200/80",shadow:"hover:shadow-orange-200 dark:hover:shadow-orange-300/40"},red:{gradient:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-50/90 dark:to-red-100/95",border:"border-red-200 dark:border-red-300/60",text:"text-red-700 dark:text-red-600",badge:"text-red-600 bg-red-200 dark:text-red-700 dark:bg-red-200/80",shadow:"hover:shadow-red-200 dark:hover:shadow-red-300/40"},yellow:{gradient:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-50/90 dark:to-yellow-100/95",border:"border-yellow-200 dark:border-yellow-300/60",text:"text-yellow-700 dark:text-yellow-600",badge:"text-yellow-600 bg-yellow-200 dark:text-yellow-700 dark:bg-yellow-200/80",shadow:"hover:shadow-yellow-200 dark:hover:shadow-yellow-300/40"}};function l(e){let{value:a,label:r,color:l="blue",onClick:s,clickable:d=!1,className:i="",size:n="md"}=e,c=o[l];return(0,t.jsxs)("div",{className:"\n        text-center ".concat("sm"===n?"p-4":"lg"===n?"p-6":"p-5"," ").concat(c.gradient," rounded-xl border ").concat(c.border," \n        hover:shadow-lg ").concat(c.shadow," dark:shadow-lg dark:ring-0.5 dark:ring-opacity-20 transition-all duration-200 transform hover:scale-105\n        ").concat(d||s?"cursor-pointer":"","\n        ").concat(i,"\n      "),onClick:s,title:d?"Hacer clic para interactuar":void 0,children:[(0,t.jsx)("div",{className:"".concat("lg"===n?"text-2xl":"sm"===n?"text-lg":"text-xl"," font-bold ").concat(c.text," mb-1"),children:"number"==typeof a?a.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}):String(a)}),(0,t.jsx)("div",{className:"".concat("sm"===n?"text-[11px]":"text-xs"," font-medium ").concat(c.badge," px-2 py-1 rounded-full inline-block"),children:r})]})}function s(e){let{cards:a,columns:r=3,className:o=""}=e;return(0,t.jsx)("div",{className:"grid ".concat({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}[r]," gap-4 ").concat(o),children:a.map((e,a)=>(0,t.jsx)(l,{value:e.value,label:e.label,color:e.color,onClick:e.onClick,clickable:e.clickable,size:e.size},a))})}},5922:function(e,a,r){"use strict";r.d(a,{O:function(){return t}});let t=(0,r(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},6727:function(e,a,r){"use strict";r.d(a,{dB:function(){return t},iR:function(){return o}}),r(2601);let t=()=>(console.warn("⚠️ getCalculatorDate() is deprecated. Use getColombiaDate() instead."),o()),o=()=>new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"})}},function(e){e.O(0,[5257,2368,2971,4938,1744],function(){return e(e.s=3669)}),_N_E=e.O()}]);