(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2314],{5531:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var a=t(2265);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),l=e=>{let r=d(e);return r.charAt(0).toUpperCase()+r.slice(1)},n=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim(),o=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:d="",children:l,iconNode:c,...u},x)=>(0,a.createElement)("svg",{ref:x,...i,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:n("lucide",d),...!l&&!o(u)&&{"aria-hidden":"true"},...u},[...c.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(l)?l:[l]])),u=(e,r)=>{let t=(0,a.forwardRef)(({className:t,...d},o)=>(0,a.createElement)(c,{ref:o,iconNode:r,className:n(`lucide-${s(l(e))}`,`lucide-${e}`,t),...d}));return t.displayName=l(e),t}},6840:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3523:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8759:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},4280:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6654:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},5790:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(5531).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},2601:function(e,r,t){"use strict";var a,s;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(8960)},2838:function(e,r,t){Promise.resolve().then(t.bind(t,7121))},7121:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var a=t(7437),s=t(2265),d=t(4033),l=t(6727),n=t(7279),o=t(8759),i=t(6840),c=t(6654),u=t(5790),x=t(5531);let m=(0,x.Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var g=t(4280);let h=(0,x.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var p=t(3523);let b=(0,x.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function v(e){let{userId:r,userRole:t}=e,[d,l]=(0,s.useState)(null),[n,x]=(0,s.useState)(!1),[v,f]=(0,s.useState)(""),[y,k]=(0,s.useState)(!1),[w,j]=(0,s.useState)("insights"),N=async()=>{try{x(!0),f("");let e=await fetch("/api/ai-dashboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,userRole:t})}),a=await e.json();a.success?l(a.data):f(a.error||"Error al cargar datos de IA")}catch(e){f(e.message||"Error al cargar datos de IA")}finally{x(!1)}};(0,s.useEffect)(()=>{r&&"modelo"===t&&N()},[r,t]);let M=e=>{switch(e){case"high":return"border-l-red-400 bg-red-50/50";case"medium":return"border-l-amber-400 bg-amber-50/50";case"low":return"border-l-emerald-400 bg-emerald-50/50";default:return"border-l-blue-400 bg-blue-50/50"}},S=e=>{switch(e){case"tip":return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-yellow-600"});case"analysis":return(0,a.jsx)(i.Z,{className:"w-4 h-4 text-blue-600"});case"recommendation":return(0,a.jsx)(c.Z,{className:"w-4 h-4 text-green-600"});case"trend":return(0,a.jsx)(u.Z,{className:"w-4 h-4 text-purple-600"});default:return(0,a.jsx)(m,{className:"w-4 h-4 text-gray-600"})}};return"modelo"!==t?null:(0,a.jsxs)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg shadow-sm border border-gray-200/50 dark:border-gray-600/20 transition-all duration-300 hover:shadow-md hover:bg-white/90 dark:hover:bg-gray-600/90 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsx)("div",{className:"px-4 py-3 cursor-pointer",onClick:()=>k(!y),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"p-1.5 bg-gradient-to-br from-purple-500 to-blue-600 rounded-md",children:(0,a.jsx)(m,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Asistente AI"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Insights personalizados"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),N()},className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-600 rounded-md transition-all duration-200",title:"Actualizar datos",children:(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ".concat(n?"animate-spin":"")})}),y?(0,a.jsx)(h,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}):(0,a.jsx)(p.Z,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})]})]})}),y&&(0,a.jsx)("div",{className:"px-4 pb-3 border-t border-gray-200/50 dark:border-gray-600/20",children:n?(0,a.jsxs)("div",{className:"py-6 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Generando insights..."})]}):v?(0,a.jsxs)("div",{className:"py-6 text-center",children:[(0,a.jsx)("div",{className:"text-red-500 dark:text-red-400 mb-2 text-sm",children:"Error al cargar datos"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3",children:v}),(0,a.jsx)("button",{onClick:N,className:"px-3 py-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors duration-200 text-sm",children:"Reintentar"})]}):d?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex space-x-0.5 bg-gray-100 dark:bg-gray-600 rounded-md p-0.5",children:[{id:"insights",label:"Insights",icon:b},{id:"tips",label:"Tips",icon:o.Z},{id:"analysis",label:"An\xe1lisis",icon:i.Z}].map(e=>(0,a.jsxs)("button",{onClick:()=>j(e.id),className:"flex-1 flex items-center justify-center space-x-1.5 py-1.5 px-2 rounded-sm text-xs font-medium transition-all duration-200 ".concat(w===e.id?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"),children:[(0,a.jsx)(e.icon,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{children:e.label})]},e.id))}),"insights"===w&&(0,a.jsx)("div",{className:"space-y-2",children:d.insights.map((e,r)=>(0,a.jsx)("div",{className:"p-3 rounded-md border-l-3 ".concat(M(e.priority)," transition-all duration-200 hover:shadow-sm"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[S(e.type),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-1 text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:e.content}),e.actionable&&(0,a.jsx)("div",{className:"mt-1.5",children:(0,a.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:"Accionable"})})]})]})},r))}),"tips"===w&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-md border border-yellow-200 dark:border-yellow-700/50",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-1 text-sm",children:"\uD83D\uDCA1 Tip del D\xeda"}),(0,a.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:d.dailyTip})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center space-x-1.5 text-sm",children:[(0,a.jsx)(c.Z,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"}),(0,a.jsx)("span",{children:"Recomendaciones"})]}),d.recommendations.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-start space-x-2 p-2.5 bg-green-50 dark:bg-green-900/20 rounded-md border border-green-200 dark:border-green-700/50",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-5 h-5 bg-green-100 dark:bg-green-800/50 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs font-bold",children:r+1})}),(0,a.jsx)("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:e})]},r))]})]}),"analysis"===w&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",d.performanceSummary.todayEarnings.toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Ganancias Hoy"})]}),(0,a.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-md text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["+",d.performanceSummary.weeklyTrend.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Tendencia Semanal"})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-md",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center space-x-1.5 text-sm",children:[(0,a.jsx)(u.Z,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"}),(0,a.jsx)("span",{children:"Resumen de Rendimiento"})]}),(0,a.jsxs)("div",{className:"space-y-1.5 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Mejor Plataforma:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:d.performanceSummary.bestPlatform})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Progreso del Objetivo:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[d.performanceSummary.goalProgress.toFixed(1),"%"]})]})]})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-200/50 dark:border-gray-600/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["Actualizado: ",new Date(d.lastUpdated).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"AI"})]})]})})]}):null})]})}var f=t(5342);function y(){let[e,r]=(0,s.useState)(null),[o,i]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1);(0,d.useRouter)();let g=t(5922).O;(0,s.useEffect)(()=>{(async()=>{try{var e,t,a,s;i(!0);let{data:d}=await g.auth.getUser(),l=null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id;if(!l){r(null),i(!1);return}let{data:n}=await g.from("users").select("id,name,email,role").eq("id",l).single(),o=[];if(n&&"super_admin"!==n.role){let{data:e}=await g.from("user_groups").select("groups(name)").eq("user_id",l);o=(e||[]).map(e=>{var r;return null===(r=e.groups)||void 0===r?void 0:r.name}).filter(Boolean)}let c={id:(null==n?void 0:n.id)||l,name:(null==n?void 0:n.name)||(null===(a=d.user)||void 0===a?void 0:null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"Usuario",email:(null==n?void 0:n.email)||(null===(s=d.user)||void 0===s?void 0:s.email)||"",role:(null==n?void 0:n.role)||"modelo",groups:o,organization_id:"",is_active:!0,last_login:new Date().toISOString()};r(c),"modelo"===c.role&&await h(c.id)}finally{i(!1)}})()},[]),(0,s.useEffect)(()=>{o||x||!e||setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),console.log("\uD83D\uDD0D [DASHBOARD] Scrollbar positioned at start:",0)},1e3)},[o,x,e]);let h=async e=>{try{var r,t,a,s,d,n,o,i,c,x,g;m(!0),console.log("\uD83D\uDD0D [DASHBOARD] Loading productivity data for user:",e);let h=await fetch("/api/rates-v2?activeOnly=true"),p=await h.json(),b={usd_cop:(null==p?void 0:null===(t=p.data)||void 0===t?void 0:null===(r=t.find(e=>"USD→COP"===e.kind))||void 0===r?void 0:r.value)||3900,eur_usd:(null==p?void 0:null===(s=p.data)||void 0===s?void 0:null===(a=s.find(e=>"EUR→USD"===e.kind))||void 0===a?void 0:a.value)||1.01,gbp_usd:(null==p?void 0:null===(n=p.data)||void 0===n?void 0:null===(d=n.find(e=>"GBP→USD"===e.kind))||void 0===d?void 0:d.value)||1.2},v=await fetch("/api/calculator/config-v2?userId=".concat(e)),f=await v.json(),y=((null==f?void 0:null===(o=f.config)||void 0===o?void 0:o.platforms)||[]).filter(e=>e.enabled),k=(null===(i=y[0])||void 0===i?void 0:i.percentage_override)||(null===(c=y[0])||void 0===c?void 0:c.group_percentage)||80,w=(null===(x=y[0])||void 0===x?void 0:x.min_quota_override)||(null===(g=y[0])||void 0===g?void 0:g.group_min_quota)||470,j=(0,l.iR)(),N=new Date(new Date(j).getTime()-864e5).toISOString().split("T")[0],M=await fetch("/api/calculator/model-values-v2?modelId=".concat(e,"&periodDate=").concat(j)),S=await M.json(),_=(null==S?void 0:S.data)||[],D={};_.forEach(e=>{D[e.platform_id]=Number(e.value)||0});let Z=await fetch("/api/calculator/model-values-v2?modelId=".concat(e,"&periodDate=").concat(N)),C=await Z.json(),A=(null==C?void 0:C.data)||[],E={};A.forEach(e=>{E[e.platform_id]=Number(e.value)||0});let T=0,O=0;for(let e of y){let r=D[e.id]||0;if(r<=0)continue;let t=0;"EUR"===e.currency?t="big7"===e.id?r*b.eur_usd*.84:"mondo"===e.id?r*b.eur_usd*.78:r*b.eur_usd:"GBP"===e.currency?t="aw"===e.id?r*b.gbp_usd*.677:r*b.gbp_usd:"USD"===e.currency&&("cmd"===e.id||"camlust"===e.id||"skypvt"===e.id?t=.75*r:"chaturbate"===e.id||"myfreecams"===e.id||"stripchat"===e.id?t=.05*r:"dxlive"===e.id?t=.6*r:"secretfriends"===e.id?t=.5*r:(e.id,t=r)),T+=t}O=k/100*T;let I=0,L=0;for(let e of y){let r=E[e.id]||0;if(r<=0)continue;let t=0;"EUR"===e.currency?t="big7"===e.id?r*b.eur_usd*.84:"mondo"===e.id?r*b.eur_usd*.78:r*b.eur_usd:"GBP"===e.currency?t="aw"===e.id?r*b.gbp_usd*.677:r*b.gbp_usd:"USD"===e.currency&&("cmd"===e.id||"camlust"===e.id||"skypvt"===e.id?t=.75*r:"chaturbate"===e.id||"myfreecams"===e.id||"stripchat"===e.id?t=.05*r:"dxlive"===e.id?t=.6*r:"secretfriends"===e.id?t=.5*r:(e.id,t=r)),I+=t}L=k/100*I;let B=O-L,R=O*b.usd_cop,z=w>0?Math.min(O/w*100,100):0;console.log("\uD83D\uDD0D [DASHBOARD] Calculated productivity:",{todayUsdBruto:T,todayUsdModelo:O,todayEarnings:B,copModelo:R,goalUsd:w,goalProgress:z}),u({usdBruto:T,usdModelo:O,todayEarnings:B,copModelo:R,goalUsd:w,goalProgress:z})}catch(e){console.error("❌ [DASHBOARD] Error loading productivity data:",e)}finally{m(!1)}};return o?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Cargando dashboard..."})]})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,a.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Mi Dashboard"}),e&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:["Bienvenida, ",e.name," \xb7 Rol: ",String(e.role).replace("_"," "),e.groups.length>0&&" \xb7 Grupos: ".concat(e.groups.join(", "))]})]})]})})]})}),(0,a.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Resumen de Productividad"})]}),x?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Cargando datos de productividad..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.F,{cards:[{value:c?"$".concat(c.todayEarnings.toFixed(2)):"—",label:"Ganancias Hoy",color:"blue"},{value:c?"$".concat(c.usdModelo.toFixed(2)):"—",label:"USD Modelo (hoy)",color:"green"},{value:c?"".concat(Math.round(c.copModelo).toLocaleString("es-CO")):"—",label:"COP Modelo (hoy)",color:"purple"}],columns:3,className:"mb-4"}),(0,a.jsx)("div",{className:"mt-4",children:(()=>{if(!c)return null;let e=c.usdBruto,r=c.goalUsd,t=e/r*100,s=e<r,d={r:142,g:36,b:170},l=(e,r,t)=>({r:Math.round(e.r+(r.r-e.r)*t),g:Math.round(e.g+(r.g-e.g)*t),b:Math.round(e.b+(r.b-e.b)*t)}),o=(e,r)=>l(e,{r:255,g:255,b:255},r),i=(e,r)=>l(e,{r:0,g:0,b:0},r),u=e=>"#".concat(e.r.toString(16).padStart(2,"0")).concat(e.g.toString(16).padStart(2,"0")).concat(e.b.toString(16).padStart(2,"0")),x=Math.max(0,Math.min(100,t))/100,m=x<=.6?l({r:229,g:57,b:53},d,x/.6):l(d,{r:46,g:125,b:50},(x-.6)/.4),g=u(i(m,.05)),h=u(i(m,.15)),p=u(o(m,.92)),b=u(o(m,.88)),v=u(o(m,.7)),f=u(i(m,0)),y=u(i(m,.2)),k=u(i(m,.55)),w=u(i(m,.45));return(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border transition-all duration-300",style:{background:"linear-gradient(135deg, ".concat(p,", ").concat(b,")"),borderColor:v,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-10 animate-pulse",style:{background:"linear-gradient(90deg, ".concat(g,", ").concat(h,")")}}),(0,a.jsx)("div",{className:"relative p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"relative flex-shrink-0 ".concat(s?"animate-bounce":"animate-pulse"),children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shadow-md",style:{background:"linear-gradient(135deg, ".concat(f,", ").concat(y,")")},children:(0,a.jsx)("span",{className:"text-white text-sm",children:"✓"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-bold text-sm",style:{color:k},children:s?"Objetivo B\xe1sico en Progreso":"Objetivo B\xe1sico Alcanzado"}),(()=>{let d=Math.max(0,Math.min(100,Math.round(t)));return(0,a.jsx)("div",{className:"text-xs font-medium",style:{color:w},children:s?"Faltan $".concat(Math.ceil(r-e)," USD (").concat(Math.max(0,100-d),"% restante)"):"Excelente +".concat(Math.max(0,d-100),"%")})})()]}),(0,a.jsx)(n.Z,{progress:Math.max(0,Math.min(100,Math.round(t)))}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all duration-1000 ease-out",style:{width:"".concat(Math.min(t,100),"%"),background:"linear-gradient(90deg, ".concat(g,", ").concat(h,")")}})})})]})]})})]})})()}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-300",children:["Para actualizar tus valores usa el men\xfa ",(0,a.jsx)("a",{href:"/admin/model/calculator",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 underline font-medium",children:"Mi Calculadora"}),"."]})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(v,{userId:e.id,userRole:e.role})})]})}):null}},5342:function(e,r,t){"use strict";t.d(r,{F:function(){return l}});var a=t(7437);t(2265);let s={blue:{gradient:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-50/90 dark:to-blue-100/95",border:"border-blue-200 dark:border-blue-300/60",text:"text-blue-700 dark:text-blue-600",badge:"text-blue-600 bg-blue-200 dark:text-blue-700 dark:bg-blue-200/80",shadow:"hover:shadow-blue-200 dark:hover:shadow-blue-300/40"},green:{gradient:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-50/90 dark:to-green-100/95",border:"border-green-200 dark:border-green-300/60",text:"text-green-700 dark:text-green-600",badge:"text-green-600 bg-green-200 dark:text-green-700 dark:bg-green-200/80",shadow:"hover:shadow-green-200 dark:hover:shadow-green-300/40"},purple:{gradient:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-50/90 dark:to-purple-100/95",border:"border-purple-200 dark:border-purple-300/60",text:"text-purple-700 dark:text-purple-600",badge:"text-purple-600 bg-purple-200 dark:text-purple-700 dark:bg-purple-200/80",shadow:"hover:shadow-purple-200 dark:hover:shadow-purple-300/40"},orange:{gradient:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-50/90 dark:to-orange-100/95",border:"border-orange-200 dark:border-orange-300/60",text:"text-orange-700 dark:text-orange-600",badge:"text-orange-600 bg-orange-200 dark:text-orange-700 dark:bg-orange-200/80",shadow:"hover:shadow-orange-200 dark:hover:shadow-orange-300/40"},red:{gradient:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-50/90 dark:to-red-100/95",border:"border-red-200 dark:border-red-300/60",text:"text-red-700 dark:text-red-600",badge:"text-red-600 bg-red-200 dark:text-red-700 dark:bg-red-200/80",shadow:"hover:shadow-red-200 dark:hover:shadow-red-300/40"},yellow:{gradient:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-50/90 dark:to-yellow-100/95",border:"border-yellow-200 dark:border-yellow-300/60",text:"text-yellow-700 dark:text-yellow-600",badge:"text-yellow-600 bg-yellow-200 dark:text-yellow-700 dark:bg-yellow-200/80",shadow:"hover:shadow-yellow-200 dark:hover:shadow-yellow-300/40"}};function d(e){let{value:r,label:t,color:d="blue",onClick:l,clickable:n=!1,className:o="",size:i="md"}=e,c=s[d];return(0,a.jsxs)("div",{className:"\n        text-center ".concat("sm"===i?"p-4":"lg"===i?"p-6":"p-5"," ").concat(c.gradient," rounded-xl border ").concat(c.border," \n        hover:shadow-lg ").concat(c.shadow," dark:shadow-lg dark:ring-0.5 dark:ring-opacity-20 transition-all duration-200 transform hover:scale-105\n        ").concat(n||l?"cursor-pointer":"","\n        ").concat(o,"\n      "),onClick:l,title:n?"Hacer clic para interactuar":void 0,children:[(0,a.jsx)("div",{className:"".concat("lg"===i?"text-2xl":"sm"===i?"text-lg":"text-xl"," font-bold ").concat(c.text," mb-1"),children:"number"==typeof r?r.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}):String(r)}),(0,a.jsx)("div",{className:"".concat("sm"===i?"text-[11px]":"text-xs"," font-medium ").concat(c.badge," px-2 py-1 rounded-full inline-block"),children:t})]})}function l(e){let{cards:r,columns:t=3,className:s=""}=e;return(0,a.jsx)("div",{className:"grid ".concat({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-4"}[t]," gap-4 ").concat(s),children:r.map((e,r)=>(0,a.jsx)(d,{value:e.value,label:e.label,color:e.color,onClick:e.onClick,clickable:e.clickable,size:e.size},r))})}},7279:function(e,r,t){"use strict";var a=t(7437);t(2265),r.Z=e=>{let{progress:r}=e,t=r>=100?100:r>=75?75:r>=50?50:r>=25?25:0,s=100===t?{dot:"bg-emerald-500",text:"text-emerald-700",badgeBg:"bg-emerald-100",shadow:"shadow-emerald-100"}:75===t?{dot:"bg-purple-500",text:"text-purple-700",badgeBg:"bg-purple-100",shadow:"shadow-purple-100"}:{dot:"bg-blue-500",text:"text-blue-700",badgeBg:"bg-blue-100",shadow:"shadow-blue-100"};return(0,a.jsx)("div",{className:"mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-xl border border-gray-200 bg-gradient-to-br ".concat(100===t?"from-emerald-50 to-emerald-100":75===t?"from-purple-50 to-purple-100":"from-blue-50 to-blue-100"," px-2.5 py-1 shadow-sm"),children:[(0,a.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full ".concat(s.dot)}),(0,a.jsx)("div",{className:"text-[11px] sm:text-[12px] font-semibold ".concat(s.text," leading-tight"),children:{0:{title:"Aqu\xed comienza el camino"},25:{title:"\xa1Ya lograste el primer cuarto!"},50:{title:"Vas a mitad de camino"},75:{title:"\xa1Est\xe1s muy cerca!"},100:{title:"Lo lograste, muy bien hecho"}}[t].title}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("div",{className:"text-[10px] sm:text-[11px] font-semibold ".concat(s.text," ").concat(s.badgeBg," px-1.5 py-0.5 rounded-full leading-none"),children:[r,"%"]})]})})}},5922:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},6727:function(e,r,t){"use strict";t.d(r,{dB:function(){return a},iR:function(){return s}}),t(2601);let a=()=>(console.warn("⚠️ getCalculatorDate() is deprecated. Use getColombiaDate() instead."),s()),s=()=>new Date().toLocaleDateString("en-CA",{timeZone:"America/Bogota"})},8960:function(e){!function(){var r={229:function(e){var r,t,a,s=e.exports={};function d(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function n(e){if(r===setTimeout)return setTimeout(e,0);if((r===d||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:d}catch(e){r=d}try{t="function"==typeof clearTimeout?clearTimeout:l}catch(e){t=l}}();var o=[],i=!1,c=-1;function u(){i&&a&&(i=!1,a.length?o=a.concat(o):c=-1,o.length&&x())}function x(){if(!i){var e=n(u);i=!0;for(var r=o.length;r;){for(a=o,o=[];++c<r;)a&&a[c].run();c=-1,r=o.length}a=null,i=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function g(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];o.push(new m(e,r)),1!==o.length||i||n(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function a(e){var s=t[e];if(void 0!==s)return s.exports;var d=t[e]={exports:{}},l=!0;try{r[e](d,d.exports,a),l=!1}finally{l&&delete t[e]}return d.exports}a.ab="//";var s=a(229);e.exports=s}()},622:function(e,r,t){"use strict";var a=t(2265),s=Symbol.for("react.element"),d=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function i(e,r,t){var a,d={},i=null,c=null;for(a in void 0!==t&&(i=""+t),void 0!==r.key&&(i=""+r.key),void 0!==r.ref&&(c=r.ref),r)l.call(r,a)&&!o.hasOwnProperty(a)&&(d[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===d[a]&&(d[a]=r[a]);return{$$typeof:s,type:e,key:i,ref:c,props:d,_owner:n.current}}r.Fragment=d,r.jsx=i,r.jsxs=i},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=2838)}),_N_E=e.O()}]);