(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3797,5922],{5531:function(e,a,s){"use strict";s.d(a,{Z:function(){return m}});var r=s(2265);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,s)=>s?s.toUpperCase():a.toLowerCase()),d=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=(...e)=>e.filter((e,a,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===a).join(" ").trim(),i=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:t,className:l="",children:d,iconNode:c,...m},x)=>(0,r.createElement)("svg",{ref:x,...o,width:a,height:a,stroke:e,strokeWidth:t?24*Number(s)/Number(a):s,className:n("lucide",l),...!d&&!i(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(d)?d:[d]])),m=(e,a)=>{let s=(0,r.forwardRef)(({className:s,...l},i)=>(0,r.createElement)(c,{ref:i,iconNode:a,className:n(`lucide-${t(d(e))}`,`lucide-${e}`,s),...l}));return s.displayName=d(e),s}},8253:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]])},8203:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6840:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},8063:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4530:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},3711:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},9670:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8759:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},5589:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},4280:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6654:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},5790:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},7972:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(5531).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2279:function(e,a,s){Promise.resolve().then(s.bind(s,6289))},6289:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Z}});var r=s(7437),t=s(2265),l=s(5922),d=s(5790),n=s(5531);let i=(0,n.Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),o=(0,n.Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var c=s(4280),m=s(6840),x=s(6654),h=s(8759);let g=(0,n.Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function u(e){let{modelId:a}=e,[s,l]=(0,t.useState)(null),[n,u]=(0,t.useState)(!1),[p,b]=(0,t.useState)(""),y=async()=>{try{u(!0),b("");let e=await fetch("/api/modelo-portafolio/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelId:a,analysisType:"comprehensive"})}),s=await e.json();s.success?l(s.data):b(s.error||"Error al cargar an\xe1lisis")}catch(e){b(e.message||"Error al cargar an\xe1lisis")}finally{u(!1)}};(0,t.useEffect)(()=>{a&&y()},[a]);let f=e=>{switch(e){case"up":return(0,r.jsx)(d.Z,{className:"w-4 h-4 text-green-500"});case"down":return(0,r.jsx)(i,{className:"w-4 h-4 text-red-500"});default:return(0,r.jsx)(o,{className:"w-4 h-4 text-gray-500"})}},v=e=>{switch(e){case"up":return"text-green-600 bg-green-50 border-green-200";case"down":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return n?(0,r.jsx)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):p?(0,r.jsx)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 mb-2",children:"Error al cargar an\xe1lisis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:p}),(0,r.jsxs)("button",{onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2 mx-auto",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Reintentar"})]})]})}):s?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsx)("span",{children:"Resumen de Rendimiento"})]}),(0,r.jsx)("button",{onClick:y,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-white/60 rounded-lg transition-all duration-200",title:"Actualizar an\xe1lisis",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.summary.totalPeriods}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Per\xedodos Quincenales"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",s.summary.totalEarnings.toFixed(2)]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total USD"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:["$",s.summary.avgPeriodEarnings.toFixed(2)]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Promedio por Per\xedodo"})]}),(0,r.jsxs)("div",{className:"text-center p-4 rounded-lg ".concat(s.summary.growthRate>0?"bg-green-50":s.summary.growthRate<0?"bg-red-50":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat(s.summary.growthRate>0?"text-green-600":s.summary.growthRate<0?"text-red-600":"text-gray-600"),children:[s.summary.growthRate>0?"+":"",s.summary.growthRate.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Crecimiento"})]})]})]}),(0,r.jsxs)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,r.jsx)(x.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsx)("span",{children:"An\xe1lisis de Rendimiento"})]}),(0,r.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,r.jsx)("div",{className:"whitespace-pre-line text-gray-700 leading-relaxed",children:s.analysis})})]}),s.trends.length>0&&(0,r.jsxs)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsx)("span",{children:"Tendencias"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.trends.map((e,a)=>(0,r.jsx)("div",{className:"p-4 rounded-lg border ".concat(v(e.trend)),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:e.label}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:e.change})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[f(e.trend),(0,r.jsx)("span",{className:"font-bold",children:e.value})]})]})},a))})]}),(0,r.jsxs)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-yellow-600"}),(0,r.jsx)("span",{children:"Recomendaciones"})]}),(0,r.jsx)("div",{className:"space-y-3",children:s.recommendations.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-yellow-600 text-sm font-bold",children:a+1})}),(0,r.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:e})]},a))})]}),s.platformStats.length>0&&(0,r.jsxs)("div",{className:"relative bg-white/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,r.jsx)(g,{className:"w-5 h-5 text-green-600"}),(0,r.jsx)("span",{children:"Rendimiento por Plataforma"})]}),(0,r.jsx)("div",{className:"space-y-4",children:s.platformStats.map((e,a)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.code})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["$",e.avgEarnings.toFixed(2),"/per\xedodo"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.totalPeriods," per\xedodos"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total"}),(0,r.jsxs)("div",{className:"font-semibold text-gray-900",children:["$",e.totalEarnings.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"M\xe1ximo"}),(0,r.jsxs)("div",{className:"font-semibold text-gray-900",children:["$",e.maxEarnings.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"M\xednimo"}),(0,r.jsxs)("div",{className:"font-semibold text-gray-900",children:["$",e.minEarnings.toFixed(2)]})]})]})]},a))})]}),(0,r.jsxs)("div",{className:"text-center text-xs text-gray-500",children:["\xdaltima actualizaci\xf3n: ",new Date(s.lastUpdated).toLocaleString("es-ES")]})]}):null}var p=s(4530),b=s(6141),y=s(8063),f=s(8253),v=s(5589),w=s(7972);let k=(0,n.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),j=(0,n.Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var N=s(9670),_=s(3711),C=s(8203);function Z(){var e,a;let[s,d]=(0,t.useState)(null),[n,i]=(0,t.useState)(!0),[c,m]=(0,t.useState)(""),[h,Z]=(0,t.useState)(null),[M,E]=(0,t.useState)(null),[S,A]=(0,t.useState)("platforms"),[L,P]=(0,t.useState)(null),[O,R]=(0,t.useState)(null),[D,I]=(0,t.useState)(!1),[z,F]=(0,t.useState)(!1),[T,U]=(0,t.useState)("details"),[$,J]=(0,t.useState)({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1}),[q,V]=(0,t.useState)(!1),[X,H]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await l.supabase.auth.getUser();e?d(e):m("Usuario no autenticado")}catch(e){m("Error al cargar usuario")}})()},[]),(0,t.useEffect)(()=>{(null==s?void 0:s.id)&&B()},[null==s?void 0:s.id]),(0,t.useEffect)(()=>{if(L&&(null==s?void 0:s.id)){var e,a;G(L.platform_id),U("details"),(null===(e=L.calculator_platforms.id)||void 0===e?void 0:e.toLowerCase())==="superfoon"||(null===(a=L.calculator_platforms.name)||void 0===a?void 0:a.toLowerCase().includes("superfoon"))?Q(L.platform_id):J({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1})}else R(null),F(!1),J({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1})},[L,null==s?void 0:s.id]),(0,t.useEffect)(()=>{window.scrollTo(0,0)},[]);let B=async()=>{try{i(!0);let e=await fetch("/api/modelo-portafolio?modelId=".concat(null==s?void 0:s.id)),a=await e.json();a.success?(Z(a.data),P(null)):m(a.error||"Error al cargar el portafolio")}catch(e){m(e.message||"Error al cargar el portafolio")}finally{i(!1)}},W=async e=>{try{E(e);let a=await fetch("/api/modelo-portafolio/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platformId:e,modelId:null==s?void 0:s.id})}),r=await a.json();r.success?B():m(r.error||"Error al confirmar plataforma")}catch(e){m(e.message||"Error al confirmar plataforma")}finally{E(null)}},G=async e=>{if((null==s?void 0:s.id)&&e)try{var a,r,t,d,n;I(!0);let{data:{session:i}}=await l.supabase.auth.getSession(),o=null==i?void 0:i.access_token;if(!o){console.error("No se pudo obtener token de autenticaci\xf3n");return}let c=await fetch("/api/modelo-plataformas/credentials?platform_id=".concat(e,"&model_id=").concat(s.id),{headers:{Authorization:"Bearer ".concat(o)}});if(c.ok){let e=await c.json();e.success?R({...e.data,hasCredentials:void 0!==e.hasCredentials?e.hasCredentials:!!((null===(a=e.data)||void 0===a?void 0:a.login_username)&&(null===(r=e.data)||void 0===r?void 0:r.login_password))}):R({login_username:null,login_password:null,login_url:(null===(t=e.data)||void 0===t?void 0:t.login_url)||(null==L?void 0:null===(d=L.calculator_platforms)||void 0===d?void 0:d.login_url)||null,hasCredentials:!1})}else console.error("Error cargando credenciales:",await c.text()),R({login_username:null,login_password:null,login_url:(null==L?void 0:null===(n=L.calculator_platforms)||void 0===n?void 0:n.login_url)||null,hasCredentials:!1})}catch(e){console.error("Error cargando credenciales:",e),R(null)}finally{I(!1)}},Y=e=>{navigator.clipboard.writeText(e).then(()=>{alert("Copiado al portapapeles")}).catch(e=>{console.error("Error copiando al portapapeles:",e)})},Q=async e=>{if((null==s?void 0:s.id)&&e)try{V(!0);let{data:{session:a}}=await l.supabase.auth.getSession(),r=null==a?void 0:a.access_token;if(!r){console.error("No se pudo obtener token de autenticaci\xf3n");return}let t=await fetch("/api/modelo-plataformas/credentials-3cx?platform_id=".concat(e,"&model_id=").concat(s.id),{headers:{Authorization:"Bearer ".concat(r)}});if(t.ok){let e=await t.json();e.success&&e.data?J({app_3cx_username:e.data.app_3cx_username||"",app_3cx_password:e.data.app_3cx_password||"",hasCredentials:!!(e.data.app_3cx_username&&e.data.app_3cx_password)}):J({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1})}else J({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1})}catch(e){console.error("Error cargando credenciales 3CX:",e),J({app_3cx_username:"",app_3cx_password:"",hasCredentials:!1})}finally{V(!1)}},K=e=>{switch(e){case"disponible":return"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600 hover:bg-slate-300 dark:hover:bg-slate-600";case"solicitada":return"bg-blue-300 dark:bg-blue-700 text-blue-800 dark:text-blue-300 border border-blue-400 dark:border-blue-600 hover:bg-blue-400 dark:hover:bg-blue-600";case"pendiente":return"bg-yellow-300 dark:bg-yellow-700 text-yellow-800 dark:text-yellow-300 border border-yellow-400 dark:border-yellow-600 hover:bg-yellow-400 dark:hover:bg-yellow-600";case"entregada":return"bg-green-300 dark:bg-green-700 text-green-800 dark:text-green-300 border border-green-400 dark:border-green-600 hover:bg-green-400 dark:hover:bg-green-600";case"confirmada":return"bg-emerald-300 dark:bg-emerald-700 text-emerald-800 dark:text-emerald-300 border border-emerald-400 dark:border-emerald-600 hover:bg-emerald-400 dark:hover:bg-emerald-600";case"desactivada":return"bg-gray-800 dark:bg-gray-600 text-white dark:text-gray-200 border border-gray-800 dark:border-gray-500 hover:opacity-90";case"inviable":return"bg-red-300 dark:bg-red-700 text-red-800 dark:text-red-300 border border-red-400 dark:border-red-600 hover:bg-red-400 dark:hover:bg-red-600";default:return"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600"}},ee=e=>{(null==L?void 0:L.id)===e.id?P(null):P(e)},ea=!!L&&((null===(e=L.calculator_platforms.id)||void 0===e?void 0:e.toLowerCase())==="superfoon"||(null===(a=L.calculator_platforms.name)||void 0===a?void 0:a.toLowerCase().includes("superfoon")));return n?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,r.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400"})})})}):c?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,r.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(y.Z,{className:"w-16 h-16 text-red-500 dark:text-red-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:c})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,r.jsxs)("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16",children:[(0,r.jsx)("div",{className:"mb-8 sm:mb-12",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-indigo-600/10 rounded-xl blur-xl"}),(0,r.jsx)("div",{className:"relative bg-white/80 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-white/20 dark:border-gray-600/20 shadow-lg dark:shadow-lg dark:shadow-blue-900/15 dark:ring-0.5 dark:ring-blue-400/20",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md flex-shrink-0",children:(0,r.jsx)(f.Z,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("h1",{className:"text-base sm:text-lg md:text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent leading-tight whitespace-nowrap overflow-hidden text-ellipsis",children:"Mi Portafolio"}),(0,r.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:"Gestiona tus plataformas y confirma entregas"})]})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\xdaltima actualizaci\xf3n"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(null==h?void 0:h.lastUpdated)?new Date(h.lastUpdated).toLocaleString("es-ES"):"N/A"})]})})]})})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-1 sm:space-x-1 mb-6 sm:mb-8",children:[(0,r.jsx)("button",{onClick:()=>A("platforms"),className:"px-4 sm:px-5 py-2.5 sm:py-2 rounded-lg text-sm sm:text-base font-medium transition-all duration-200 active:scale-95 touch-manipulation ".concat("platforms"===S?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-white/70 dark:bg-gray-700/70 text-gray-600 dark:text-gray-300 hover:bg-white/90 dark:hover:bg-gray-600/80"),children:"Mis Plataformas"}),(0,r.jsx)("button",{onClick:()=>A("analytics"),className:"px-4 sm:px-5 py-2.5 sm:py-2 rounded-lg text-sm sm:text-base font-medium transition-all duration-200 active:scale-95 touch-manipulation ".concat("analytics"===S?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md":"bg-white/70 dark:bg-gray-700/70 text-gray-600 dark:text-gray-300 hover:bg-white/90 dark:hover:bg-gray-600/80"),children:"An\xe1lisis y Estad\xedsticas"})]}),"platforms"===S&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 sm:p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[(0,r.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Mis Plataformas"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 dark:text-gray-400"}),(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[(null==h?void 0:h.platforms.length)||0," plataformas"]})]})]}),(null==h?void 0:h.platforms.length)===0?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(f.Z,{className:"w-16 h-16 text-gray-300 dark:text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No tienes plataformas asignadas"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Contacta a tu administrador para asignar plataformas a tu portafolio."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-2 mb-4 sm:mb-6",children:null==h?void 0:h.platforms.map(e=>(0,r.jsx)("button",{type:"button",className:"px-3 sm:px-2.5 py-2 sm:py-1 rounded-full text-xs sm:text-[11px] leading-4 sm:leading-5 font-medium transition-all duration-200 inline-flex items-center justify-center min-h-[40px] sm:min-h-0 active:scale-95 touch-manipulation shadow-sm sm:shadow-none ".concat(K(e.status)," ").concat((null==L?void 0:L.id)===e.id?"ring-2 ring-blue-500 ring-offset-2 sm:ring-offset-2 ring-offset-1 scale-105 sm:scale-100":"hover:scale-105 sm:hover:scale-100"),onClick:()=>ee(e),children:(0,r.jsx)("span",{className:"truncate max-w-[140px] sm:max-w-none",children:e.calculator_platforms.name})},e.id))}),(0,r.jsx)("div",{className:"overflow-visible transition-all duration-500 ease-out transform ".concat(L?"opacity-100 translate-y-0 scale-100":"max-h-0 opacity-0 translate-y-0 scale-100 overflow-hidden"),children:L&&(0,r.jsxs)("div",{className:"border-2 sm:border border-gray-200 dark:border-gray-600/20 rounded-xl sm:rounded-lg p-4 sm:p-4 bg-white dark:bg-gray-700/80 hover:shadow-lg transition-shadow duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 shadow-md sm:shadow-none",children:[(0,r.jsx)("div",{className:"flex justify-end mb-3 sm:hidden",children:(0,r.jsx)("button",{onClick:()=>P(null),className:"p-2 rounded-full bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-500 active:scale-95 transition-all touch-manipulation","aria-label":"Cerrar",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0 mb-5 sm:mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 sm:w-auto sm:h-auto flex items-center justify-center",children:(e=>{switch(e){case"confirmada":default:return(0,r.jsx)(p.Z,{className:"w-5 h-5 text-green-500"});case"entregada":return(0,r.jsx)(b.Z,{className:"w-5 h-5 text-yellow-500"});case"desactivada":return(0,r.jsx)(y.Z,{className:"w-5 h-5 text-red-500"})}})(L.status)}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("h3",{className:"text-lg sm:text-lg font-bold text-gray-900 dark:text-gray-100 break-words sm:truncate",children:L.calculator_platforms.name}),(0,r.jsxs)("p",{className:"text-sm sm:text-sm text-gray-500 dark:text-gray-400 break-words sm:truncate mt-1",children:[L.calculator_platforms.id," • ",L.calculator_platforms.currency]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-3 sm:flex-shrink-0",children:[(0,r.jsx)("span",{className:"px-4 py-2 sm:px-3 sm:py-1 rounded-full text-sm sm:text-sm font-semibold text-center ".concat((e=>{switch(e){case"confirmada":default:return"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700/50 text-green-700 dark:text-green-300";case"entregada":return"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-700/50 text-yellow-700 dark:text-yellow-300";case"desactivada":return"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700/50 text-red-700 dark:text-red-300"}})(L.status)),children:(e=>{switch(e){case"confirmada":default:return"Confirmada";case"entregada":return"Pendiente de confirmaci\xf3n";case"desactivada":return"Desactivada"}})(L.status)}),"entregada"===L.status&&(0,r.jsx)("button",{onClick:()=>W(L.platform_id),disabled:M===L.platform_id,className:"w-full sm:w-auto px-5 py-3 sm:px-4 sm:py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center space-x-2 text-base sm:text-sm font-medium shadow-md hover:shadow-lg active:scale-95 touch-manipulation min-h-[48px] sm:min-h-0",children:M===L.platform_id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 sm:h-4 sm:w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Confirmando..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 sm:w-4 sm:h-4"}),(0,r.jsx)("span",{children:"Confirmar Recepci\xf3n"})]})})]})]}),(0,r.jsx)("div",{className:"mb-5 sm:mb-4 border-b-2 sm:border-b border-gray-200 dark:border-gray-600",children:(0,r.jsxs)("div",{className:"flex gap-2 sm:space-x-1",children:[(0,r.jsx)("button",{onClick:()=>U("details"),className:"flex-1 sm:flex-none px-5 sm:px-4 py-3 sm:py-2 text-base sm:text-sm font-semibold sm:font-medium transition-all duration-200 active:scale-95 touch-manipulation min-h-[48px] sm:min-h-0 ".concat("details"===T?"border-b-[3px] sm:border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20 sm:bg-transparent":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600/30 sm:hover:bg-transparent"),children:"Detalles"}),(0,r.jsx)("button",{onClick:()=>U("metrics"),className:"flex-1 sm:flex-none px-5 sm:px-4 py-3 sm:py-2 text-base sm:text-sm font-semibold sm:font-medium transition-all duration-200 active:scale-95 touch-manipulation min-h-[48px] sm:min-h-0 ".concat("metrics"===T?"border-b-[3px] sm:border-b-2 border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20 sm:bg-transparent":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600/30 sm:hover:bg-transparent"),children:"M\xe9tricas"})]})}),"details"===T&&(0,r.jsx)("div",{className:"space-y-5 sm:space-y-4",children:("entregada"===L.status||"confirmada"===L.status)&&(0,r.jsxs)("div",{className:"mt-2 sm:mt-4 pt-5 sm:pt-4 border-t-2 sm:border-t border-gray-200 dark:border-gray-600 space-y-5 sm:space-y-4",children:[D?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Cargando credenciales..."})]}):(null==O?void 0:O.hasCredentials)?(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl sm:rounded-lg p-5 sm:p-4 space-y-4 sm:space-y-3 border-2 sm:border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4 sm:mb-3",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5 sm:w-4 sm:h-4 text-blue-600 dark:text-blue-400"}),(0,r.jsx)("h4",{className:"text-base sm:text-sm font-bold sm:font-semibold text-gray-900 dark:text-gray-100",children:"Credenciales de Acceso"})]}),O.login_username&&(0,r.jsxs)("div",{className:"space-y-2 sm:space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm sm:text-xs font-semibold sm:font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-2",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"}),(0,r.jsx)("span",{children:"Usuario"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:O.login_username,readOnly:!0,className:"flex-1 px-3 sm:px-3 py-2.5 sm:py-2 h-12 sm:h-auto bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 touch-manipulation"}),(0,r.jsx)("button",{onClick:()=>Y(O.login_username),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 active:scale-95 transition-all touch-manipulation",title:"Copiar usuario",children:(0,r.jsx)(k,{className:"w-4 h-4 sm:w-4 sm:h-4"})})]})]}),O.login_password&&(0,r.jsxs)("div",{className:"space-y-2 sm:space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm sm:text-xs font-semibold sm:font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"}),(0,r.jsx)("span",{children:"Contrase\xf1a"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:z?"text":"password",value:O.login_password,readOnly:!0,className:"flex-1 px-3 sm:px-3 py-2.5 sm:py-2 h-12 sm:h-auto bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono touch-manipulation"}),(0,r.jsx)("button",{onClick:()=>F(!z),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 active:scale-95 transition-all touch-manipulation",title:z?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:z?(0,r.jsx)(j,{className:"w-4 h-4"}):(0,r.jsx)(N.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>Y(O.login_password),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 active:scale-95 transition-all touch-manipulation",title:"Copiar contrase\xf1a",children:(0,r.jsx)(k,{className:"w-4 h-4"})})]})]}),(O.login_url||L.calculator_platforms.login_url)&&(0,r.jsx)("div",{className:"pt-4 sm:pt-3 mt-4 sm:mt-3 border-t-2 sm:border-t border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("a",{href:O.login_url||L.calculator_platforms.login_url||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center space-x-2 px-5 sm:px-4 py-3.5 sm:py-2.5 h-14 sm:h-auto bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl sm:rounded-lg hover:from-blue-600 hover:to-indigo-700 active:scale-95 transition-all duration-200 shadow-lg hover:shadow-xl text-base sm:text-sm font-semibold sm:font-medium touch-manipulation",children:[(0,r.jsx)(_.Z,{className:"w-5 h-5 sm:w-4 sm:h-4"}),(0,r.jsx)("span",{children:"Abrir plataforma"})]})})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),(0,r.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Las credenciales a\xfan no han sido configuradas por el administrador."})]})}),((null==O?void 0:O.login_url)||L.calculator_platforms.login_url)&&(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsxs)("a",{href:(null==O?void 0:O.login_url)||L.calculator_platforms.login_url||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center space-x-2 px-4 sm:px-4 py-3 sm:py-2.5 h-12 sm:h-auto bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 active:scale-95 transition-all duration-200 shadow-md hover:shadow-lg text-sm sm:text-sm font-medium touch-manipulation",children:[(0,r.jsx)(_.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Abrir plataforma"})]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2 text-center font-medium",children:"Haz clic para acceder a la plataforma"})]})]}),ea&&(0,r.jsxs)("div",{className:"pt-5 sm:pt-4 mt-5 sm:mt-4 border-t-2 sm:border-t border-dashed border-gray-300 dark:border-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4 sm:mb-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 sm:w-2 sm:h-2 bg-blue-500 rounded-full animate-ping absolute"}),(0,r.jsx)("div",{className:"w-2.5 h-2.5 sm:w-2 sm:h-2 bg-blue-500 rounded-full relative"})]}),(0,r.jsx)("p",{className:"text-base sm:text-sm font-bold sm:font-semibold text-gray-700 dark:text-gray-300",children:"\uD83D\uDCDE App de llamadas 3CX"}),(0,r.jsx)(o,{className:"w-5 h-5 sm:w-4 sm:h-4 text-blue-600 dark:text-blue-400"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl sm:rounded-lg p-5 sm:p-4 space-y-4 sm:space-y-3 border-2 sm:border border-purple-200 dark:border-purple-800 mb-4 sm:mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4 sm:mb-3",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5 sm:w-4 sm:h-4 text-purple-600 dark:text-purple-400"}),(0,r.jsx)("h4",{className:"text-base sm:text-sm font-bold sm:font-semibold text-gray-900 dark:text-gray-100",children:"Credenciales App 3CX"})]}),q?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Cargando..."})]}):$.hasCredentials?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2 sm:space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm sm:text-xs font-semibold sm:font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-2",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"}),(0,r.jsx)("span",{children:"Usuario 3CX"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:$.app_3cx_username||"",readOnly:!0,className:"flex-1 px-3 sm:px-3 py-2.5 sm:py-2 h-12 sm:h-auto bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none touch-manipulation"}),(0,r.jsx)("button",{onClick:()=>Y($.app_3cx_username||""),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 active:scale-95 transition-all touch-manipulation",title:"Copiar usuario",children:(0,r.jsx)(k,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2 sm:space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm sm:text-xs font-semibold sm:font-medium text-gray-700 dark:text-gray-300 flex items-center space-x-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"}),(0,r.jsx)("span",{children:"Contrase\xf1a 3CX"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:X?"text":"password",value:$.app_3cx_password||"",readOnly:!0,className:"flex-1 px-3 sm:px-3 py-2.5 sm:py-2 h-12 sm:h-auto bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-gray-100 focus:outline-none font-mono touch-manipulation"}),(0,r.jsx)("button",{onClick:()=>H(!X),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 active:scale-95 transition-all touch-manipulation",title:X?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a",children:X?(0,r.jsx)(j,{className:"w-4 h-4"}):(0,r.jsx)(N.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>Y($.app_3cx_password||""),className:"p-2.5 sm:p-2 min-h-[48px] sm:min-h-0 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 active:scale-95 transition-all touch-manipulation",title:"Copiar contrase\xf1a",children:(0,r.jsx)(k,{className:"w-4 h-4"})})]})]})]}):(0,r.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),(0,r.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Las credenciales de 3CX a\xfan no han sido configuradas por el administrador."})]})})]}),(0,r.jsxs)("a",{href:"https://superfoon.synergy4.com/#/login",target:"_blank",rel:"noopener noreferrer",className:"w-full inline-flex items-center justify-center space-x-2 px-5 sm:px-4 py-3.5 sm:py-2.5 h-14 sm:h-auto bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl sm:rounded-lg hover:from-blue-600 hover:to-indigo-700 active:scale-95 transition-all duration-200 shadow-lg hover:shadow-xl text-base sm:text-sm font-semibold sm:font-medium mb-4 sm:mb-3 touch-manipulation",children:[(0,r.jsx)(_.Z,{className:"w-5 h-5 sm:w-4 sm:h-4"}),(0,r.jsx)("span",{children:"Abrir app"})]}),(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-600 dark:text-gray-400 text-center font-medium break-all px-2",children:"https://superfoon.synergy4.com/#/login"}),(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-500 mt-2 sm:mt-1 text-center",children:"⚡ Acceso directo a la aplicaci\xf3n de llamadas"})]})]})}),"metrics"===T&&(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-600/80 rounded-lg p-3 sm:p-4",children:[(0,r.jsx)("h4",{className:"text-xs sm:text-sm font-semibold text-gray-700 dark:text-gray-200 mb-3",children:"Estad\xedsticas de Rendimiento"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-2 sm:p-0 bg-white/50 dark:bg-gray-700/50 rounded-lg sm:bg-transparent",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Promedio Conexi\xf3n"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:[L.stats.connectionPercentage,"%"]})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-0 bg-white/50 dark:bg-gray-700/50 rounded-lg sm:bg-transparent",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Promedio Quincenal"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,r.jsxs)("p",{className:"text-base sm:text-lg font-bold text-green-600 dark:text-green-400",children:["$",L.stats.avgUsdModelo.toFixed(2)," USD"]}),(0,r.jsx)("span",{className:"text-xs sm:text-sm font-medium ".concat("↑"===L.stats.trend?"text-green-500 dark:text-green-400":"↓"===L.stats.trend?"text-red-500 dark:text-red-400":"text-gray-400 dark:text-gray-500"),children:L.stats.trend})]})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-0 bg-white/50 dark:bg-gray-700/50 rounded-lg sm:bg-transparent",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total (30 d\xedas)"}),(0,r.jsxs)("p",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",L.stats.totalUsdModelo.toFixed(2)," USD"]})]}),(0,r.jsxs)("div",{className:"text-center p-2 sm:p-0 bg-white/50 dark:bg-gray-700/50 rounded-lg sm:bg-transparent",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1",children:"\xdaltima Actividad"}),(0,r.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-gray-100",children:L.stats.lastActivity?new Date(L.stats.lastActivity).toLocaleDateString("es-ES"):"N/A"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0 pt-4 sm:pt-0 mt-4 sm:mt-0 border-t-2 sm:border-t-0 border-gray-200 dark:border-gray-600",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:space-x-6",children:[L.delivered_at&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.Z,{className:"w-4 h-4 sm:w-3 sm:h-3 text-gray-400 dark:text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-400 dark:text-gray-500 font-medium",children:"Entregada"}),(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-400",children:new Date(L.delivered_at).toLocaleDateString("es-ES")})]})]}),L.confirmed_at&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4 sm:w-3 sm:h-3 text-gray-400 dark:text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-400 dark:text-gray-500 font-medium",children:"Confirmada"}),(0,r.jsx)("p",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-400",children:new Date(L.confirmed_at).toLocaleDateString("es-ES")})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4 sm:w-3 sm:h-3 text-gray-400 dark:text-gray-500"}),(0,r.jsx)("span",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Plataforma activa"})]})]})]})})]})]})}),"analytics"===S&&(0,r.jsxs)("div",{className:"space-y-6",children:[h&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6",children:[(0,r.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 sm:p-6 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Plataformas"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:h.summary.totalPlatforms})]}),(0,r.jsx)(f.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 dark:text-blue-400 flex-shrink-0"})]})}),(0,r.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 sm:p-6 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300",children:"Activas"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600 dark:text-green-400",children:h.summary.activePlatforms})]}),(0,r.jsx)(p.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600 dark:text-green-400 flex-shrink-0"})]})}),(0,r.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 sm:p-6 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300",children:"Pendientes"}),(0,r.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:h.summary.pendingConfirmation})]}),(0,r.jsx)(b.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-yellow-600 dark:text-yellow-400 flex-shrink-0"})]})}),(0,r.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 sm:p-6 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15 col-span-2 md:col-span-1",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-300",children:"Ganancias (30 d\xedas)"}),(0,r.jsxs)("p",{className:"text-lg sm:text-2xl font-bold text-green-600 dark:text-green-400 truncate",children:["$",h.summary.totalCopModelo.toLocaleString("es-CO")," COP"]})]}),(0,r.jsx)(g,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600 dark:text-green-400 flex-shrink-0"})]})})]}),(0,r.jsx)("div",{className:"relative bg-white/70 dark:bg-gray-700/80 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-6 dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:(0,r.jsx)(u,{modelId:null==s?void 0:s.id})})]})]})})}},5922:function(e,a,s){"use strict";s.r(a),s.d(a,{supabase:function(){return r}});let r=(0,s(5257).createClient)("https://mhernfrkvwigxdubiozm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZXJuZnJrdndpZ3hkdWJpb3ptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MTY1NDcsImV4cCI6MjA3NDM5MjU0N30.v7qBceGTwaqyDZe5h9yLBjWwuuGEwAq6KVsAH_RNw8c")},622:function(e,a,s){"use strict";var r=s(2265),t=Symbol.for("react.element"),l=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,a,s){var r,l={},o=null,c=null;for(r in void 0!==s&&(o=""+s),void 0!==a.key&&(o=""+a.key),void 0!==a.ref&&(c=a.ref),a)d.call(a,r)&&!i.hasOwnProperty(r)&&(l[r]=a[r]);if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===l[r]&&(l[r]=a[r]);return{$$typeof:t,type:e,key:o,ref:c,props:l,_owner:n.current}}a.Fragment=l,a.jsx=o,a.jsxs=o},7437:function(e,a,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[5257,2971,4938,1744],function(){return e(e.s=2279)}),_N_E=e.O()}]);