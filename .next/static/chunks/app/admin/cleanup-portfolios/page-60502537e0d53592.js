(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7619],{3195:function(e,s,r){Promise.resolve().then(r.bind(r,4049))},4049:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return t}});var a=r(7437),n=r(2265);function t(){let[e,s]=(0,n.useState)(!1),[r,t]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),i=async()=>{try{s(!0),o(null),t(null);let e=await fetch("/api/cleanup-incorrect-portfolios",{method:"POST",headers:{"Content-Type":"application/json"}}),r=await e.json();r.success?t(r):o(r.error||"Error desconocido")}catch(e){o(e.message||"Error de conexi\xf3n")}finally{s(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50 to-orange-50 pt-24",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83E\uDDF9 Limpiar Portafolios Incorrectos"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Esta herramienta elimina los portafolios que se crearon incorrectamente durante la sincronizaci\xf3n autom\xe1tica, que hered\xf3 el mismo portafolio a todas las modelos."}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"⚠️ \xbfQu\xe9 hace esta limpieza?"}),(0,a.jsxs)("ul",{className:"text-red-800 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:'• Busca portafolios creados con "Sincronizaci\xf3n autom\xe1tica de configuraci\xf3n existente"'}),(0,a.jsx)("li",{children:"• Los elimina completamente de la base de datos"}),(0,a.jsx)("li",{children:"• Permite que cada modelo configure su calculadora individualmente"}),(0,a.jsx)("li",{children:"• Restaura el estado original antes de la sincronizaci\xf3n incorrecta"})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-yellow-900 mb-2",children:"⚠️ Importante"}),(0,a.jsx)("p",{className:"text-yellow-800 text-sm",children:"Esta acci\xf3n es irreversible. Los portafolios eliminados tendr\xe1n que ser configurados nuevamente cuando cada modelo configure su calculadora por primera vez."})]}),(0,a.jsx)("button",{onClick:i,disabled:e,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Limpiando..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83E\uDDF9"}),(0,a.jsx)("span",{children:"Ejecutar Limpieza"})]})}),l&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"❌ Error"}),(0,a.jsx)("p",{className:"text-red-800 text-sm",children:l})]}),r&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"✅ Limpieza Completada"}),(0,a.jsx)("p",{className:"text-green-800 text-sm mb-4",children:r.message}),r.results&&r.results.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900",children:"Portafolios eliminados por modelo:"}),(0,a.jsx)("div",{className:"space-y-1",children:r.results.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)("span",{className:"text-green-600",children:"✅"}),(0,a.jsxs)("span",{className:"text-green-800",children:[e.email,": ",e.platforms_deleted," portafolios eliminados"]})]},s))})]})]})]})]})})})})}},622:function(e,s,r){"use strict";var a=r(2265),n=Symbol.for("react.element"),t=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,s,r){var a,t={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)l.call(s,a)&&!i.hasOwnProperty(a)&&(t[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===t[a]&&(t[a]=s[a]);return{$$typeof:n,type:e,key:c,ref:d,props:t,_owner:o.current}}s.Fragment=t,s.jsx=c,s.jsxs=c},7437:function(e,s,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[2971,4938,1744],function(){return e(e.s=3195)}),_N_E=e.O()}]);