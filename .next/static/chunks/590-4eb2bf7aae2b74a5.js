"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{5531:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(2265);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),n=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...m},u)=>(0,r.createElement)("svg",{ref:u,...d,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:i("lucide",o),...!l&&!n(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),m=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...o},n)=>(0,r.createElement)(c,{ref:n,iconNode:t,className:i(`lucide-${s(l(e))}`,`lucide-${e}`,a),...o}));return a.displayName=l(e),a}},4530:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(5531).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9806:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(5531).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6141:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(5531).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2549:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(5531).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1185:function(e,t,a){a.d(t,{Z:function(){return o}});var r=a(7437),s=a(2265);function o(e){let{compact:t=!1,showTitle:a=!0,refreshTrigger:o,userRole:l}=e,[i,n]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(null);async function x(){try{c(!0),u(null);let e=await fetch("/api/rates?activeOnly=true"),t=await e.json();if(!t.success)throw Error(t.error||"Error al cargar tasas");let a=new Date,r=["USD→COP","EUR→USD","GBP→USD"],s=t.data.filter(e=>{let t=e.valid_to?new Date(e.valid_to):null;return(!t||t>a)&&r.includes(e.kind)}).sort((e,t)=>new Date(t.valid_from).getTime()-new Date(e.valid_from).getTime()).reduce((e,t)=>(e.find(e=>e.kind===t.kind)||e.push(t),e),[]).sort((e,t)=>{let a={"USD→COP":1,"EUR→USD":2,"GBP→USD":3};return(a[e.kind]||4)-(a[t.kind]||4)});n(s)}catch(e){u(e.message||"Error inesperado")}finally{c(!1)}}(0,s.useEffect)(()=>{x()},[]),(0,s.useEffect)(()=>{void 0!==o&&x()},[o]);let h=e=>{switch(e){case"USD→COP":return"USD → COP";case"EUR→USD":return"EUR → USD";case"GBP→USD":return"GBP → USD";default:return e}},p=e=>"global"===e?"Global":e.startsWith("group:")?"Grupo: ".concat(e.replace("group:","")):e,f=e=>{switch(e){case"manual":return"✏️";case"ECB":return"\uD83C\uDFDB️";case"system":return"\uD83E\uDD16";case"OXR":return"\uD83D\uDCCA";default:return"\uD83D\uDCCB"}};return t?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-600/20 p-4 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300 cursor-pointer",children:[a&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Solo manuales"})]}),d&&(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin ml-auto"})]}),m?(0,r.jsx)("p",{className:"text-red-600 text-xs",children:m}):(0,r.jsx)("div",{className:"space-y-1",children:0===i.length?(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-xs text-center py-2",children:"No hay tasas de calculadora"}):i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-gray-50 dark:bg-white rounded-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs",children:f(e.source)}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-900",children:h(e.kind)})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:e.value}),"superadmin_aff"!==l&&(0,r.jsx)("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:p(e.scope)})]})]},e.id))})]}):(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/20 dark:border-gray-600/20 shadow-md dark:shadow-lg dark:shadow-blue-900/10 dark:ring-0.5 dark:ring-blue-500/15",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Tasas de Calculadora"}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Solo tasas manuales"})]})]}),(0,r.jsx)("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/80 backdrop-blur-sm border border-blue-200/50 rounded-lg hover:bg-blue-100/80 focus:ring-2 focus:ring-blue-500/20 transition-all duration-200",disabled:d,children:d?"Actualizando...":"Actualizar"})]}),m?(0,r.jsxs)("div",{className:"text-center py-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("p",{className:"text-red-600 text-xs mb-3",children:m}),(0,r.jsx)("button",{onClick:x,className:"px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/80 backdrop-blur-sm border border-red-200/50 rounded-lg hover:bg-red-100/80 focus:ring-2 focus:ring-red-500/20 transition-all duration-200",children:"Reintentar"})]}):(0,r.jsx)("div",{className:"space-y-2",children:0===i.length?(0,r.jsxs)("div",{className:"text-center py-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium mb-1",children:"No hay tasas de calculadora"}),(0,r.jsx)("p",{className:"text-gray-400 dark:text-gray-400 text-xs",children:"Configura las tasas manualmente"})]}):i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-white backdrop-blur-sm rounded-lg border border-gray-200/30 dark:border-gray-500/30 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gray-50 dark:bg-gray-50 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs",children:f(e.source)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:h(e.kind)}),"superadmin_aff"!==l&&(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-900",children:p(e.scope)})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-900",children:e.value}),(0,r.jsx)("div",{className:"text-xs text-gray-800 dark:text-gray-900",children:new Date(e.valid_from).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]})]},e.id))})]})}},4065:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(7437),s=a(2265),o=a(1396),l=a.n(o),i=a(6605),n=a(6727);function d(e){let{userRole:t,userId:a,userGroups:o=[]}=e,[d,c]=(0,s.useState)(null),[m,u]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,b]=(0,s.useState)("current"),[y,k]=(0,s.useState)(null),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return"COP"===t?new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e):new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},w=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e||h(!0),f(null);let r=(0,n.iR)(),s=r;if("period-1"===g){let[e,t]=r.split("-");s="".concat(e,"-").concat(t,"-15")}else if("period-2"===g){let[e,t]=r.split("-"),a=new Date(parseInt(e),parseInt(t)-1,1),o=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();s="".concat(e,"-").concat(t,"-").concat(String(o).padStart(2,"0"))}let l=new URLSearchParams({adminId:a,userRole:t,periodDate:s}),i=await fetch("/api/admin/billing-summary?".concat(l)),d=await i.json();if(!d.success)throw Error(d.error||"Error al cargar los datos");if(d.affiliateStudioName&&k(d.affiliateStudioName),d.groupedData&&Array.isArray(d.groupedData)&&d.groupedData.length>0){let e=d.summary||{totalModels:d.groupedData.reduce((e,t)=>e+t.totalModels,0),totalUsdBruto:d.groupedData.reduce((e,t)=>e+t.totalUsdBruto,0),totalUsdModelo:d.groupedData.reduce((e,t)=>e+(t.totalUsdModelo||0),0),totalUsdSede:d.groupedData.reduce((e,t)=>e+t.totalUsdSede,0),totalCopModelo:d.groupedData.reduce((e,t)=>e+(t.totalCopModelo||0),0),totalCopSede:d.groupedData.reduce((e,t)=>e+(t.totalCopSede||0),0)};c(e),u(d.groupedData)}else{let e=d.data||[];"admin"===t&&o.length>0&&(e=e.filter(e=>o.includes(e.groupName)));let a={totalModels:e.length,totalUsdBruto:e.reduce((e,t)=>e+t.usdBruto,0),totalUsdModelo:e.reduce((e,t)=>e+t.usdModelo,0),totalUsdSede:e.reduce((e,t)=>e+t.usdSede,0),totalCopModelo:e.reduce((e,t)=>e+t.copModelo,0),totalCopSede:e.reduce((e,t)=>e+t.copSede,0)},r=new Map;e.forEach(e=>{let a=e.organizationId||"unknown",s=e.groupId||"unknown";if(!r.has(a)){let e="superadmin_aff"===t&&d.affiliateStudioName?d.affiliateStudioName:"Agencia Innova";r.set(a,{sedeId:a,sedeName:e,totalModels:0,groups:[],totalUsdBruto:0,totalUsdModelo:0,totalUsdSede:0})}let o=r.get(a);o.totalModels++,o.totalUsdBruto+=e.usdBruto,o.totalUsdModelo+=e.usdModelo,o.totalUsdSede+=e.usdSede;let l=o.groups.find(e=>e.groupId===s);l||(l={groupId:s,groupName:e.groupName||"Grupo Desconocido",totalModels:0,totalUsdBruto:0,totalUsdModelo:0,totalUsdSede:0},o.groups.push(l)),l.totalModels++,l.totalUsdBruto+=e.usdBruto,l.totalUsdModelo+=e.usdModelo,l.totalUsdSede+=e.usdSede}),c(a),u(Array.from(r.values()))}}catch(e){console.error("Error loading billing data:",e),f(e.message||"Error al cargar los datos")}finally{e||h(!1)}},{isPolling:j,isSilentUpdating:N}=(0,i.t)(w,[a,t,o],{refreshInterval:15e3,enabled:!0,silentUpdate:!0,onRefresh:()=>{console.log("\uD83D\uDD04 [BILLING-SUMMARY-COMPACT] Datos actualizados autom\xe1ticamente")}});return((0,s.useEffect)(()=>{a&&t&&w()},[a,t,o,g]),x)?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-700/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"})})]}):p?(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm rounded-xl shadow-md border border-white/20 dark:border-gray-700/20 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-red-500 to-red-600 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("div",{className:"text-sm text-red-600 mb-2",children:p}),(0,r.jsx)("button",{onClick:()=>w(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Reintentar"})]})]}):(0,r.jsxs)("div",{className:"relative bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-green-900/10 dark:ring-0.5 dark:ring-green-500/15 border border-white/20 dark:border-gray-600/20 p-4 hover:shadow-xl hover:bg-white/95 dark:hover:bg-gray-600/80 hover:scale-[1.02] transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-md flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Resumen de Facturaci\xf3n"})]}),(0,r.jsx)(l(),{href:"/admin/sedes/dashboard",className:"text-xs text-blue-600 dark:text-white hover:text-blue-800 dark:hover:text-gray-200 font-medium",children:"Ver completo →"})]}),d&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-blue-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-blue-600",children:["$",v(d.totalUsdBruto)]}),(0,r.jsx)("div",{className:"text-xs text-blue-700",children:"USD Bruto"})]}),(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-green-600",children:["$",v(d.totalUsdModelo)]}),(0,r.jsx)("div",{className:"text-xs text-green-700",children:"USD Modelos"})]}),(0,r.jsxs)("div",{className:"text-center p-2 rounded-lg bg-purple-50/80",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-purple-600",children:["$",v(d.totalUsdSede)]}),(0,r.jsx)("div",{className:"text-xs text-purple-700",children:"superadmin_aff"===t&&y?"USD ".concat(y):"USD Agencia"})]})]}),m.length>0&&(0,r.jsxs)("div",{className:"border-t border-gray-200/50 pt-3",children:[(0,r.jsxs)("div",{className:"text-xs font-medium text-gray-900 dark:text-white mb-2",children:[d.totalModels," modelos • ","super_admin"===t?"Todas las sedes":"Tu sede"]}),(0,r.jsx)("div",{className:"max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:(0,r.jsx)("div",{className:"space-y-2 pr-2",children:m.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-white rounded-lg border border-gray-200/40 dark:border-gray-600/40 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded flex items-center justify-center ".concat(e.isAffiliate?"bg-gradient-to-br from-purple-500/10 to-pink-500/10":"bg-gradient-to-br from-blue-500/10 to-indigo-500/10"),children:(0,r.jsx)("svg",{className:"w-2.5 h-2.5 ".concat(e.isAffiliate?"text-purple-600":"text-blue-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-900 dark:text-gray-900",children:e.sedeName}),e.isAffiliate&&(0,r.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",children:"Afiliado"})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-900 dark:text-gray-900",children:[e.totalModels," modelos • ",e.groups.length," grupos"]})]})]}),e.groups.length>0&&(0,r.jsx)("div",{className:"ml-6 space-y-1",children:e.groups.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-1.5 bg-gray-50/60 rounded",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-br from-gray-400/20 to-gray-500/20 rounded flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-1.5 h-1.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-900",children:e.groupName}),(0,r.jsxs)("div",{className:"text-xs text-gray-900 dark:text-gray-900",children:[e.totalModels," modelos"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end min-w-[70px]",children:[(0,r.jsxs)("div",{className:"text-xs font-semibold text-blue-600 dark:text-blue-600 leading-tight",children:["$",v(e.totalUsdBruto)]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight mt-0.5",children:"USD Bruto"})]})]},e.groupId))})]},e.sedeId))})})]})]})]})}},1761:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(7437),s=a(2265),o=a(6141),l=a(4530),i=a(9806),n=a(2549),d=a(327);function c(e){let{userRole:t,userGroups:a,userId:c}=e,[m,u]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null);(0,s.useEffect)(()=>{g()},[t,a,c]),(0,s.useEffect)(()=>{m.length>0&&console.log("\uD83D\uDD0D Timeline requests con fechas:",m.map(e=>({id:e.id,status:e.status,requested_at:e.requested_at,delivered_at:e.delivered_at,confirmed_at:e.confirmed_at,deactivated_at:e.deactivated_at,reverted_at:e.reverted_at,updated_at:e.updated_at})))},[m]);let g=async()=>{try{h(!0),f(null);let e=await fetch("/api/modelo-plataformas/timeline",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userRole:t,userGroups:a||[],userId:c||""})});if(!e.ok)throw Error("Error al cargar timeline");let r=await e.json();u(r.requests||[])}catch(e){f(e instanceof Error?e.message:"Error desconocido")}finally{h(!1)}},b=async e=>{try{if(!(await fetch("/api/modelo-plataformas/timeline/".concat(e,"/close"),{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("Error al cerrar solicitud");await g()}catch(e){f(e instanceof Error?e.message:"Error al cerrar solicitud")}},y=e=>{switch(e){case"solicitada":return"#93c5fd";case"pendiente":return"#fde047";case"entregada":return"#86efac";case"inviable":return"#fca5a5";default:return"#e2e8f0"}},k=e=>{switch(e){case"solicitada":case"pendiente":default:return(0,r.jsx)(o.Z,{className:"w-4 h-4"});case"entregada":return(0,r.jsx)(l.Z,{className:"w-4 h-4"});case"inviable":return(0,r.jsx)(i.Z,{className:"w-4 h-4"})}},v=e=>"entregada"===e||"inviable"===e;return x?(0,r.jsx)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-300 text-sm",children:"Cargando timeline..."})]})}):p?(0,r.jsx)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-4",children:(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)(i.Z,{className:"w-6 h-6 text-red-500 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-red-600 text-sm",children:p})]})}):(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl shadow-md dark:shadow-lg dark:shadow-purple-900/10 dark:ring-0.5 dark:ring-purple-500/15 border border-white/20 dark:border-gray-600/20 p-3 sm:p-4",style:{overflow:"visible"},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 mb-3 sm:mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 sm:w-4 sm:h-4 mr-2"}),"Timeline Portafolio Modelos"]}),(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:[m.length," solicitud",1!==m.length?"es":""]})]}),0===m.length?(0,r.jsxs)("div",{className:"text-center py-4 sm:py-4",children:[(0,r.jsx)(o.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-300 text-xs sm:text-sm",children:"No hay solicitudes de plataformas activas"})]}):(0,r.jsxs)("div",{className:"max-h-96 sm:max-h-80 overflow-y-auto space-y-2.5 sm:space-y-3 relative",style:{overflowX:"visible"},children:[m.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-lg border border-white/30 dark:border-gray-600/30 p-3 sm:p-3",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 mb-2.5 sm:mb-2",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:space-x-2 min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 sm:w-2 sm:h-2 rounded-full flex-shrink-0",style:{backgroundColor:y(e.status)}}),(0,r.jsx)("span",{className:"text-sm sm:text-sm font-semibold sm:font-medium text-gray-900 dark:text-gray-100 truncate",children:(0,d.W)(e.model_email)})]}),(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-1.5 sm:gap-0 sm:space-x-2",children:[(0,r.jsx)("span",{className:"hidden sm:inline text-xs text-gray-500 dark:text-gray-300",children:"•"}),(0,r.jsx)("span",{className:"text-xs sm:text-xs font-semibold sm:font-medium px-2.5 sm:px-2 py-1 sm:py-1 rounded-full text-white",style:{backgroundColor:y(e.status),textShadow:"0 1px 2px rgba(0,0,0,0.3)",display:"inline-block"},children:e.platform_name}),(0,r.jsx)("span",{className:"hidden sm:inline text-xs text-gray-500 dark:text-gray-300",children:"•"}),(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:e.group_name})]})]}),v(e.status)&&(0,r.jsx)("button",{onClick:()=>b(e.id),className:"p-2 sm:p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors active:scale-95 touch-manipulation self-start sm:self-auto",title:"Cerrar solicitud",children:(0,r.jsx)(n.Z,{className:"w-4 h-4 sm:w-3 sm:h-3"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 overflow-x-auto sm:ml-[calc(2rem+1.5rem+0.5rem+1.5rem+0.5rem+3.5rem)] pb-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:y("solicitada")},children:k("solicitada")}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:[new Date(e.requested_at).toLocaleDateString()," ",new Date(e.requested_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:"Solicitada"})]}),["pendiente","entregada","inviable"].includes(e.status)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 sm:w-6 h-0.5 bg-gray-300 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:y("pendiente")},children:k("pendiente")}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:[e.updated_at?"".concat(new Date(e.updated_at).toLocaleDateString()," ").concat(new Date(e.updated_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})):"Sin fecha",(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 whitespace-nowrap",children:"Pendiente"})]})]}),["entregada","inviable"].includes(e.status)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 sm:w-6 h-0.5 bg-gray-300 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"w-5 h-5 sm:w-5 sm:h-5 rounded-full flex items-center justify-center text-white text-xs cursor-help active:scale-95 touch-manipulation",style:{backgroundColor:y(e.status)},children:k(e.status)}),(0,r.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-[99999]",children:["entregada"===e.status&&e.delivered_at?"".concat(new Date(e.delivered_at).toLocaleDateString()," ").concat(new Date(e.delivered_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})):"inviable"===e.status&&e.reverted_at?"".concat(new Date(e.reverted_at).toLocaleDateString()," ").concat(new Date(e.reverted_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})):"Finalizado",(0,r.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-3 border-r-3 border-t-3 border-transparent border-t-gray-900"})]})]}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 capitalize whitespace-nowrap",children:"entregada"===e.status?"Entregada":"Inviable"})]})]})]})]},e.id)),m.length>5&&(0,r.jsx)("div",{className:"text-center py-2 sm:py-2",children:(0,r.jsxs)("span",{className:"text-xs sm:text-xs text-gray-500 dark:text-gray-300",children:["Y ",m.length-5," solicitud",m.length-5!=1?"es":""," m\xe1s..."]})})]})]})}},9482:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(7437),s=a(9102),o=a.n(s),l=a(2265),i=a(2507);function n(e){let{className:t=""}=e,[a,s]=(0,l.useState)({europe:"",japan:"",uk:"",colombia:""}),[n,c]=(0,l.useState)(0),[m,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=()=>{let e=new Date,t=t=>new Intl.DateTimeFormat("es-CO",{timeZone:t,hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0}).format(e).toUpperCase();s({europe:t("Europe/Berlin"),japan:t("Asia/Tokyo"),uk:t("Europe/London"),colombia:t("America/Bogota")});let a=(0,i.iR)(),[r,o,l]=a.split("-").map(Number),n=new Date(r,o,0).getDate(),d=[],c=e=>e<=0?"Periodo cerrado":"".concat(Math.floor(e/36e5),"h ").concat(Math.floor(e%36e5/6e4),"m");if(15===l||l===n){let t=new Date(e);t.setHours(10,0,0,0);let r=t.getTime()-e.getTime(),s=c(r),o=r<=0;d.push({text:o?"Periodo cerrado para dxlive":"".concat(s," para cierre de periodo dxlive"),urgent:r>0&&r<=18e5,closed:o});let l=(0,i.o8)(e).colombiaDateTime;if(new Intl.DateTimeFormat("en-CA",{timeZone:"America/Bogota",year:"numeric",month:"2-digit",day:"2-digit"}).format(l)<a){let t=new Date(e);t.setDate(t.getDate()+1),l=(0,i.o8)(t).colombiaDateTime}let n=l.getTime()-e.getTime(),m=c(n),u=n<=0;d.push({text:u?"Periodo cerrado para p\xe1ginas Eur":"".concat(m," para cierre de periodo p\xe1ginas Eur"),urgent:n>0&&n<=18e5,closed:u});let x=new Date(e);x.setHours(24,0,0,0);let h=x.getTime()-e.getTime(),p=c(h),f=h<=0;d.push({text:f?"Periodo cerrado (total)":"".concat(p," para cierre total de periodo"),urgent:h>0&&h<=18e5,closed:f})}else{let e=(l<15?15:n)-l;d.push({text:"".concat(e," ").concat(1===e?"d\xeda":"d\xedas"," para el pr\xf3ximo cierre de periodo"),urgent:!1,closed:!1})}u(d)};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{if(m.length<=1)return;let e=setInterval(()=>{c(e=>(e+1)%m.length)},4e3);return()=>clearInterval(e)},[m.length]);let x=m[n];return(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 "+"w-full max-w-full mx-auto mb-6 px-2 ".concat(t),children:[(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 relative",children:[(0,r.jsx)("div",{className:"jsx-1e31773023b9cf88 absolute inset-0 bg-gradient-to-r from-blue-500/10 via-indigo-500/10 to-purple-500/10 rounded-2xl blur-xl"}),(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 relative overflow-hidden bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-xl border border-white/30 dark:border-gray-700/40 shadow-lg py-1.5 px-6 flex flex-row items-center justify-between gap-6 ring-1 ring-blue-500/10 dark:ring-blue-400/10 h-11",children:[(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 flex items-center gap-5 sm:gap-8 border-r border-gray-300/50 dark:border-gray-600/50 pr-6 h-full",children:[(0,r.jsx)(d,{label:"EUR",time:a.europe,icon:"\uD83C\uDDEA\uD83C\uDDFA",color:"blue"}),(0,r.jsx)(d,{label:"UK",time:a.uk,icon:"\uD83C\uDDEC\uD83C\uDDE7",color:"purple"}),(0,r.jsx)(d,{label:"JPN",time:a.japan,icon:"\uD83C\uDDEF\uD83C\uDDF5",color:"red"}),(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 hidden lg:flex items-center gap-2 px-2.5 py-1 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700/50 dark:to-gray-700/50 rounded-lg border border-blue-200/50 dark:border-gray-600/50",children:[(0,r.jsx)("span",{className:"jsx-1e31773023b9cf88 text-[9px] font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"COL"}),(0,r.jsx)("span",{className:"jsx-1e31773023b9cf88 text-xs font-mono font-medium text-gray-800 dark:text-gray-200",children:a.colombia})]})]}),(0,r.jsx)("div",{className:"jsx-1e31773023b9cf88 flex-1 flex items-center overflow-hidden h-full relative",children:x&&(0,r.jsxs)("div",{className:"jsx-1e31773023b9cf88 flex items-center gap-3 animate-fade-in-smooth whitespace-nowrap",children:[(0,r.jsx)("span",{className:"jsx-1e31773023b9cf88 "+"flex h-1.5 w-1.5 rounded-full flex-shrink-0 ".concat(x.closed?"bg-purple-500 dark:bg-purple-400":x.urgent?"bg-orange-500 animate-pulse-fast":"bg-blue-500 animate-pulse-slow")}),(0,r.jsx)("p",{className:"jsx-1e31773023b9cf88 "+"text-xs sm:text-sm font-medium uppercase tracking-wide ".concat(x.closed?"text-purple-600 dark:text-purple-400":x.urgent?"text-orange-600 dark:text-orange-400 animate-blink":"text-gray-700 dark:text-gray-200"),children:x.text})]},n)})]})]}),(0,r.jsx)(o(),{id:"1e31773023b9cf88",children:"@-webkit-keyframes fadeInSmooth{from{opacity:0;-webkit-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes fadeInSmooth{from{opacity:0;-moz-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes fadeInSmooth{from{opacity:0;-o-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes fadeInSmooth{from{opacity:0;-webkit-transform:translatex(15px);-moz-transform:translatex(15px);-o-transform:translatex(15px);transform:translatex(15px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.animate-fade-in-smooth{-webkit-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;-moz-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;-o-animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards;animation:fadeInSmooth.6s cubic-bezier(.16,1,.3,1)forwards}@-webkit-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@-moz-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@-o-keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}@keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}.animate-blink{-webkit-animation:blink 1s ease-in-out infinite;-moz-animation:blink 1s ease-in-out infinite;-o-animation:blink 1s ease-in-out infinite;animation:blink 1s ease-in-out infinite}@-webkit-keyframes pulseSlow{0%,100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.6;-webkit-transform:scale(.95);transform:scale(.95)}}@-moz-keyframes pulseSlow{0%,100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}50%{opacity:.6;-moz-transform:scale(.95);transform:scale(.95)}}@-o-keyframes pulseSlow{0%,100%{opacity:1;-o-transform:scale(1);transform:scale(1)}50%{opacity:.6;-o-transform:scale(.95);transform:scale(.95)}}@keyframes pulseSlow{0%,100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:.6;-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}}.animate-pulse-slow{-webkit-animation:pulseSlow 2s ease-in-out infinite;-moz-animation:pulseSlow 2s ease-in-out infinite;-o-animation:pulseSlow 2s ease-in-out infinite;animation:pulseSlow 2s ease-in-out infinite}@-webkit-keyframes pulseFast{0%,100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.3;-webkit-transform:scale(.9);transform:scale(.9)}}@-moz-keyframes pulseFast{0%,100%{opacity:1;-moz-transform:scale(1);transform:scale(1)}50%{opacity:.3;-moz-transform:scale(.9);transform:scale(.9)}}@-o-keyframes pulseFast{0%,100%{opacity:1;-o-transform:scale(1);transform:scale(1)}50%{opacity:.3;-o-transform:scale(.9);transform:scale(.9)}}@keyframes pulseFast{0%,100%{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}50%{opacity:.3;-webkit-transform:scale(.9);-moz-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}}.animate-pulse-fast{-webkit-animation:pulseFast.8s ease-in-out infinite;-moz-animation:pulseFast.8s ease-in-out infinite;-o-animation:pulseFast.8s ease-in-out infinite;animation:pulseFast.8s ease-in-out infinite}"})]})}function d(e){let{label:t,time:a,icon:s,color:o}=e,l=a.split("\xa0"),i=l[0]||a.split(" ")[0],n=l[1]||a.split(" ")[1]||"";return n=n.charAt(0).toUpperCase(),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs",children:s}),(0,r.jsx)("span",{className:"text-[9px] font-semibold text-white dark:text-white uppercase tracking-wide",children:t}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-sm font-mono font-semibold bg-gradient-to-br ".concat({blue:"from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500",purple:"from-purple-500 to-purple-600 dark:from-purple-400 dark:to-purple-500",red:"from-red-500 to-red-600 dark:from-red-400 dark:to-red-500"}[o]," bg-clip-text text-transparent"),children:i}),(0,r.jsx)("span",{className:"text-[9px] font-semibold text-white/60 dark:text-white/60",children:n})]})]})}},6605:function(e,t,a){a.d(t,{t:function(){return s}});var r=a(2265);function s(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{refreshInterval:s=3e4,enabled:o=!0,onRefresh:l,silentUpdate:i=!0}=a,n=(0,r.useRef)(null),d=(0,r.useRef)(!0),[c,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),h=(0,r.useCallback)(()=>{l&&l(),e()},[e,l]),p=(0,r.useCallback)(async()=>{if(d.current){x(!0);try{l&&l(),await e(!0)}catch(e){console.error("\uD83D\uDD04 [BILLING-POLLING] Error en actualizaci\xf3n silenciosa:",e)}finally{d.current&&x(!1)}}},[e,l]);return(0,r.useEffect)(()=>(d.current=!0,()=>{d.current=!1}),[]),(0,r.useEffect)(()=>(n.current&&clearInterval(n.current),o&&d.current?(m(!0),n.current=setInterval(()=>{d.current&&(console.log("\uD83D\uDD04 [BILLING-POLLING] Actualizaci\xf3n silenciosa iniciada"),i?p():(l&&l(),e()))},s)):m(!1),()=>{n.current&&clearInterval(n.current)}),[s,o,e,l,i,p,...t]),(0,r.useEffect)(()=>()=>{n.current&&clearInterval(n.current)},[]),{isPolling:c,isSilentUpdating:u,manualRefresh:h}}},327:function(e,t,a){a.d(t,{W:function(){return r}});let r=e=>e?e.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(""):""}}]);